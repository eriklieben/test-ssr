!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=72)}([function(t,e,n){"use strict";var s=Object.prototype.hasOwnProperty;function i(t,e){return s.call(t,e)}function r(t){return!(t>=55296&&t<=57343)&&(!(t>=64976&&t<=65007)&&(65535!=(65535&t)&&65534!=(65535&t)&&(!(t>=0&&t<=8)&&(11!==t&&(!(t>=14&&t<=31)&&(!(t>=127&&t<=159)&&!(t>1114111)))))))}function o(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var a=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,c=new RegExp(a.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),l=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,h=n(6);var u=/[&<>"]/,p=/[&<>"]/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function f(t){return d[t]}var g=/[.?*+^$[\]\\(){}|-]/g;var m=n(2);e.lib={},e.lib.mdurl=n(7),e.lib.ucmicro=n(22),e.assign=function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach((function(e){if(e){if("object"!=typeof e)throw new TypeError(e+"must be object");Object.keys(e).forEach((function(n){t[n]=e[n]}))}})),t},e.isString=function(t){return"[object String]"===function(t){return Object.prototype.toString.call(t)}(t)},e.has=i,e.unescapeMd=function(t){return t.indexOf("\\")<0?t:t.replace(a,"$1")},e.unescapeAll=function(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(c,(function(t,e,n){return e||function(t,e){var n=0;return i(h,e)?h[e]:35===e.charCodeAt(0)&&l.test(e)&&r(n="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10))?o(n):t}(t,n)}))},e.isValidEntityCode=r,e.fromCodePoint=o,e.escapeHtml=function(t){return u.test(t)?t.replace(p,f):t},e.arrayReplaceAt=function(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))},e.isSpace=function(t){switch(t){case 9:case 32:return!0}return!1},e.isWhiteSpace=function(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},e.isMdAsciiPunct=function(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},e.isPunctChar=function(t){return m.test(t)},e.escapeRE=function(t){return t.replace(g,"\\$&")},e.normalizeReference=function(t){return t=t.trim().replace(/\s+/g," "),"Ṿ"==="ẞ".toLowerCase()&&(t=t.replace(/ẞ/g,"ß")),t.toLowerCase().toUpperCase()}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",s=t[3];if(!s)return n;if(e&&"function"==typeof btoa){var i=(o=s,a=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),r=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([i]).join("\n")}var o,a,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,s){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(s)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(i[o]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);s&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e){t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(t,e,n){"use strict";function s(){this.__rules__=[],this.__cache__=null}s.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1},s.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.__cache__={},e.forEach((function(e){t.__cache__[e]=[],t.__rules__.forEach((function(n){n.enabled&&(e&&n.alt.indexOf(e)<0||t.__cache__[e].push(n.fn))}))}))},s.prototype.at=function(t,e,n){var s=this.__find__(t),i=n||{};if(-1===s)throw new Error("Parser rule not found: "+t);this.__rules__[s].fn=e,this.__rules__[s].alt=i.alt||[],this.__cache__=null},s.prototype.before=function(t,e,n,s){var i=this.__find__(t),r=s||{};if(-1===i)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null},s.prototype.after=function(t,e,n,s){var i=this.__find__(t),r=s||{};if(-1===i)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null},s.prototype.push=function(t,e,n){var s=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:s.alt||[]}),this.__cache__=null},s.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var s=this.__find__(t);if(s<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[s].enabled=!0,n.push(t)}),this),this.__cache__=null,n},s.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach((function(t){t.enabled=!1})),this.enable(t,e)},s.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var s=this.__find__(t);if(s<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[s].enabled=!1,n.push(t)}),this),this.__cache__=null,n},s.prototype.getRules=function(t){return null===this.__cache__&&this.__compile__(),this.__cache__[t]||[]},t.exports=s},function(t,e,n){"use strict";function s(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}s.prototype.attrIndex=function(t){var e,n,s;if(!this.attrs)return-1;for(n=0,s=(e=this.attrs).length;n<s;n++)if(e[n][0]===t)return n;return-1},s.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]},s.prototype.attrSet=function(t,e){var n=this.attrIndex(t),s=[t,e];n<0?this.attrPush(s):this.attrs[n]=s},s.prototype.attrGet=function(t){var e=this.attrIndex(t),n=null;return e>=0&&(n=this.attrs[e][1]),n},s.prototype.attrJoin=function(t,e){var n=this.attrIndex(t);n<0?this.attrPush([t,e]):this.attrs[n][1]=this.attrs[n][1]+" "+e},t.exports=s},function(t,e,n){"use strict";t.exports=n(16)},function(t,e,n){"use strict";t.exports=n(17)},function(t,e,n){"use strict";t.exports.encode=n(18),t.exports.decode=n(19),t.exports.format=n(20),t.exports.parse=n(21)},function(t,e){t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(t,e){t.exports=/[\0-\x1F\x7F-\x9F]/},function(t,e){t.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(t,e,n){"use strict";var s="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",r=new RegExp("^(?:"+s+"|"+i+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),o=new RegExp("^(?:"+s+"|"+i+")");t.exports.HTML_TAG_RE=r,t.exports.HTML_OPEN_CLOSE_TAG_RE=o},function(t,e,n){"use strict";function s(t,e){var n,s,i,r,o,a=[],c=e.length;for(n=0;n<c;n++)126===(i=e[n]).marker&&-1!==i.end&&(r=e[i.end],(o=t.tokens[i.token]).type="s_open",o.tag="s",o.nesting=1,o.markup="~~",o.content="",(o=t.tokens[r.token]).type="s_close",o.tag="s",o.nesting=-1,o.markup="~~",o.content="","text"===t.tokens[r.token-1].type&&"~"===t.tokens[r.token-1].content&&a.push(r.token-1));for(;a.length;){for(s=(n=a.pop())+1;s<t.tokens.length&&"s_close"===t.tokens[s].type;)s++;n!==--s&&(o=t.tokens[s],t.tokens[s]=t.tokens[n],t.tokens[n]=o)}}t.exports.tokenize=function(t,e){var n,s,i,r,o=t.pos,a=t.src.charCodeAt(o);if(e)return!1;if(126!==a)return!1;if(i=(s=t.scanDelims(t.pos,!0)).length,r=String.fromCharCode(a),i<2)return!1;for(i%2&&(t.push("text","",0).content=r,i--),n=0;n<i;n+=2)t.push("text","",0).content=r+r,t.delimiters.push({marker:a,length:0,jump:n,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return t.pos+=s.length,!0},t.exports.postProcess=function(t){var e,n=t.tokens_meta,i=t.tokens_meta.length;for(s(t,t.delimiters),e=0;e<i;e++)n[e]&&n[e].delimiters&&s(t,n[e].delimiters)}},function(t,e,n){"use strict";function s(t,e){var n,s,i,r,o,a;for(n=e.length-1;n>=0;n--)95!==(s=e[n]).marker&&42!==s.marker||-1!==s.end&&(i=e[s.end],a=n>0&&e[n-1].end===s.end+1&&e[n-1].token===s.token-1&&e[s.end+1].token===i.token+1&&e[n-1].marker===s.marker,o=String.fromCharCode(s.marker),(r=t.tokens[s.token]).type=a?"strong_open":"em_open",r.tag=a?"strong":"em",r.nesting=1,r.markup=a?o+o:o,r.content="",(r=t.tokens[i.token]).type=a?"strong_close":"em_close",r.tag=a?"strong":"em",r.nesting=-1,r.markup=a?o+o:o,r.content="",a&&(t.tokens[e[n-1].token].content="",t.tokens[e[s.end+1].token].content="",n--))}t.exports.tokenize=function(t,e){var n,s,i=t.pos,r=t.src.charCodeAt(i);if(e)return!1;if(95!==r&&42!==r)return!1;for(s=t.scanDelims(t.pos,42===r),n=0;n<s.length;n++)t.push("text","",0).content=String.fromCharCode(r),t.delimiters.push({marker:r,length:s.length,jump:n,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return t.pos+=s.length,!0},t.exports.postProcess=function(t){var e,n=t.tokens_meta,i=t.tokens_meta.length;for(s(t,t.delimiters),e=0;e<i;e++)n[e]&&n[e].delimiters&&s(t,n[e].delimiters)}},function(t,e,n){"use strict";var s=n(1),i=n.n(s)()(!0);i.push([t.i,"\n\nmain {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n\n  height: 100vh;\n}k die \n\nmarkdown-preview {\n  font-family: Poppins;\n}","",{version:3,sources:["webpack://src/my-app.css"],names:[],mappings:";;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,SAAS;;EAET,aAAa;AACf,CAAC;;;EAGC,oBAAoB;AACtB",sourcesContent:["\n\nmain {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n\n  height: 100vh;\n}k die \n\nmarkdown-preview {\n  font-family: Poppins;\n}"],sourceRoot:""}]),e.a=i},function(t,e,n){"use strict";var s=n(1),i=n.n(s)()(!0);i.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),e.a=i},function(t,e,n){"use strict";var s=n(0),i=n(24),r=n(28),o=n(29),a=n(37),c=n(51),l=n(64),h=n(7),u=n(66),p={default:n(69),zero:n(70),commonmark:n(71)},d=/^(vbscript|javascript|file|data):/,f=/^data:image\/(gif|png|jpeg|webp);/;function g(t){var e=t.trim().toLowerCase();return!d.test(e)||!!f.test(e)}var m=["http:","https:","mailto:"];function v(t){var e=h.parse(t,!0);if(e.hostname&&(!e.protocol||m.indexOf(e.protocol)>=0))try{e.hostname=u.toASCII(e.hostname)}catch(t){}return h.encode(h.format(e))}function b(t){var e=h.parse(t,!0);if(e.hostname&&(!e.protocol||m.indexOf(e.protocol)>=0))try{e.hostname=u.toUnicode(e.hostname)}catch(t){}return h.decode(h.format(e),h.decode.defaultChars+"%")}function y(t,e){if(!(this instanceof y))return new y(t,e);e||s.isString(t)||(e=t||{},t="default"),this.inline=new c,this.block=new a,this.core=new o,this.renderer=new r,this.linkify=new l,this.validateLink=g,this.normalizeLink=v,this.normalizeLinkText=b,this.utils=s,this.helpers=s.assign({},i),this.options={},this.configure(t),e&&this.set(e)}y.prototype.set=function(t){return s.assign(this.options,t),this},y.prototype.configure=function(t){var e,n=this;if(s.isString(t)&&!(t=p[e=t]))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&n.set(t.options),t.components&&Object.keys(t.components).forEach((function(e){t.components[e].rules&&n[e].ruler.enableOnly(t.components[e].rules),t.components[e].rules2&&n[e].ruler2.enableOnly(t.components[e].rules2)})),this},y.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.enable(t,!0))}),this),n=n.concat(this.inline.ruler2.enable(t,!0));var s=t.filter((function(t){return n.indexOf(t)<0}));if(s.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+s);return this},y.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.disable(t,!0))}),this),n=n.concat(this.inline.ruler2.disable(t,!0));var s=t.filter((function(t){return n.indexOf(t)<0}));if(s.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+s);return this},y.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this},y.prototype.parse=function(t,e){if("string"!=typeof t)throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens},y.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},y.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens},y.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)},t.exports=y},function(t){t.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(t,e,n){"use strict";var s={};function i(t,e,n){var r,o,a,c,l,h="";for("string"!=typeof e&&(n=e,e=i.defaultChars),void 0===n&&(n=!0),l=function(t){var e,n,i=s[t];if(i)return i;for(i=s[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?i.push(n):i.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)i[t.charCodeAt(e)]=t[e];return i}(e),r=0,o=t.length;r<o;r++)if(a=t.charCodeAt(r),n&&37===a&&r+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3)))h+=t.slice(r,r+3),r+=2;else if(a<128)h+=l[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&r+1<o&&(c=t.charCodeAt(r+1))>=56320&&c<=57343){h+=encodeURIComponent(t[r]+t[r+1]),r++;continue}h+="%EF%BF%BD"}else h+=encodeURIComponent(t[r]);return h}i.defaultChars=";/?:@&=+$,-_.!~*'()#",i.componentChars="-_.!~*'()",t.exports=i},function(t,e,n){"use strict";var s={};function i(t,e){var n;return"string"!=typeof e&&(e=i.defaultChars),n=function(t){var e,n,i=s[t];if(i)return i;for(i=s[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),i.push(n);for(e=0;e<t.length;e++)i[n=t.charCodeAt(e)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return i}(e),t.replace(/(%[a-f0-9]{2})+/gi,(function(t){var e,s,i,r,o,a,c,l="";for(e=0,s=t.length;e<s;e+=3)(i=parseInt(t.slice(e+1,e+3),16))<128?l+=n[i]:192==(224&i)&&e+3<s&&128==(192&(r=parseInt(t.slice(e+4,e+6),16)))?(l+=(c=i<<6&1984|63&r)<128?"��":String.fromCharCode(c),e+=3):224==(240&i)&&e+6<s&&(r=parseInt(t.slice(e+4,e+6),16),o=parseInt(t.slice(e+7,e+9),16),128==(192&r)&&128==(192&o))?(l+=(c=i<<12&61440|r<<6&4032|63&o)<2048||c>=55296&&c<=57343?"���":String.fromCharCode(c),e+=6):240==(248&i)&&e+9<s&&(r=parseInt(t.slice(e+4,e+6),16),o=parseInt(t.slice(e+7,e+9),16),a=parseInt(t.slice(e+10,e+12),16),128==(192&r)&&128==(192&o)&&128==(192&a))?((c=i<<18&1835008|r<<12&258048|o<<6&4032|63&a)<65536||c>1114111?l+="����":(c-=65536,l+=String.fromCharCode(55296+(c>>10),56320+(1023&c))),e+=9):l+="�";return l}))}i.defaultChars=";/?:@&=+$,#",i.componentChars="",t.exports=i},function(t,e,n){"use strict";t.exports=function(t){var e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&-1!==t.hostname.indexOf(":")?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||""}},function(t,e,n){"use strict";function s(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var i=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(a),l=["%","/","?",";","#"].concat(c),h=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};s.prototype.parse=function(t,e){var n,s,r,a,c,g=t;if(g=g.trim(),!e&&1===t.split("#").length){var m=o.exec(g);if(m)return this.pathname=m[1],m[2]&&(this.search=m[2]),this}var v=i.exec(g);if(v&&(r=(v=v[0]).toLowerCase(),this.protocol=v,g=g.substr(v.length)),(e||v||g.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(c="//"===g.substr(0,2))||v&&d[v]||(g=g.substr(2),this.slashes=!0)),!d[v]&&(c||v&&!f[v])){var b,y,w=-1;for(n=0;n<h.length;n++)-1!==(a=g.indexOf(h[n]))&&(-1===w||a<w)&&(w=a);for(-1!==(y=-1===w?g.lastIndexOf("@"):g.lastIndexOf("@",w))&&(b=g.slice(0,y),g=g.slice(y+1),this.auth=b),w=-1,n=0;n<l.length;n++)-1!==(a=g.indexOf(l[n]))&&(-1===w||a<w)&&(w=a);-1===w&&(w=g.length),":"===g[w-1]&&w--;var k=g.slice(0,w);g=g.slice(w),this.parseHost(k),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x){var C=this.hostname.split(/\./);for(n=0,s=C.length;n<s;n++){var S=C[n];if(S&&!S.match(u)){for(var A="",T=0,E=S.length;T<E;T++)S.charCodeAt(T)>127?A+="x":A+=S[T];if(!A.match(u)){var _=C.slice(0,n),I=C.slice(n+1),R=S.match(p);R&&(_.push(R[1]),I.unshift(R[2])),I.length&&(g=I.join(".")+g),this.hostname=_.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var O=g.indexOf("#");-1!==O&&(this.hash=g.substr(O),g=g.slice(0,O));var P=g.indexOf("?");return-1!==P&&(this.search=g.substr(P),g=g.slice(0,P)),g&&(this.pathname=g),f[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},s.prototype.parseHost=function(t){var e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},t.exports=function(t,e){if(t&&t instanceof s)return t;var n=new s;return n.parse(t,e),n}},function(t,e,n){"use strict";e.Any=n(8),e.Cc=n(9),e.Cf=n(23),e.P=n(2),e.Z=n(10)},function(t,e){t.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},function(t,e,n){"use strict";e.parseLinkLabel=n(25),e.parseLinkDestination=n(26),e.parseLinkTitle=n(27)},function(t,e,n){"use strict";t.exports=function(t,e,n){var s,i,r,o,a=-1,c=t.posMax,l=t.pos;for(t.pos=e+1,s=1;t.pos<c;){if(93===(r=t.src.charCodeAt(t.pos))&&0===--s){i=!0;break}if(o=t.pos,t.md.inline.skipToken(t),91===r)if(o===t.pos-1)s++;else if(n)return t.pos=l,-1}return i&&(a=t.pos),t.pos=l,a}},function(t,e,n){"use strict";var s=n(0).unescapeAll;t.exports=function(t,e,n){var i,r,o=e,a={ok:!1,pos:0,lines:0,str:""};if(60===t.charCodeAt(e)){for(e++;e<n;){if(10===(i=t.charCodeAt(e)))return a;if(60===i)return a;if(62===i)return a.pos=e+1,a.str=s(t.slice(o+1,e)),a.ok=!0,a;92===i&&e+1<n?e+=2:e++}return a}for(r=0;e<n&&32!==(i=t.charCodeAt(e))&&!(i<32||127===i);)if(92===i&&e+1<n){if(32===t.charCodeAt(e+1))break;e+=2}else{if(40===i&&++r>32)return a;if(41===i){if(0===r)break;r--}e++}return o===e||0!==r||(a.str=s(t.slice(o,e)),a.lines=0,a.pos=e,a.ok=!0),a}},function(t,e,n){"use strict";var s=n(0).unescapeAll;t.exports=function(t,e,n){var i,r,o=0,a=e,c={ok:!1,pos:0,lines:0,str:""};if(e>=n)return c;if(34!==(r=t.charCodeAt(e))&&39!==r&&40!==r)return c;for(e++,40===r&&(r=41);e<n;){if((i=t.charCodeAt(e))===r)return c.pos=e+1,c.lines=o,c.str=s(t.slice(a+1,e)),c.ok=!0,c;if(40===i&&41===r)return c;10===i?o++:92===i&&e+1<n&&(e++,10===t.charCodeAt(e)&&o++),e++}return c}},function(t,e,n){"use strict";var s=n(0).assign,i=n(0).unescapeAll,r=n(0).escapeHtml,o={};function a(){this.rules=s({},o)}o.code_inline=function(t,e,n,s,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+r(t[e].content)+"</code>"},o.code_block=function(t,e,n,s,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+r(t[e].content)+"</code></pre>\n"},o.fence=function(t,e,n,s,o){var a,c,l,h,u,p=t[e],d=p.info?i(p.info).trim():"",f="",g="";return d&&(f=(l=d.split(/(\s+)/g))[0],g=l.slice(2).join("")),0===(a=n.highlight&&n.highlight(p.content,f,g)||r(p.content)).indexOf("<pre")?a+"\n":d?(c=p.attrIndex("class"),h=p.attrs?p.attrs.slice():[],c<0?h.push(["class",n.langPrefix+f]):h[c][1]+=" "+n.langPrefix+f,u={attrs:h},"<pre><code"+o.renderAttrs(u)+">"+a+"</code></pre>\n"):"<pre><code"+o.renderAttrs(p)+">"+a+"</code></pre>\n"},o.image=function(t,e,n,s,i){var r=t[e];return r.attrs[r.attrIndex("alt")][1]=i.renderInlineAsText(r.children,n,s),i.renderToken(t,e,n)},o.hardbreak=function(t,e,n){return n.xhtmlOut?"<br />\n":"<br>\n"},o.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},o.text=function(t,e){return r(t[e].content)},o.html_block=function(t,e){return t[e].content},o.html_inline=function(t,e){return t[e].content},a.prototype.renderAttrs=function(t){var e,n,s;if(!t.attrs)return"";for(s="",e=0,n=t.attrs.length;e<n;e++)s+=" "+r(t.attrs[e][0])+'="'+r(t.attrs[e][1])+'"';return s},a.prototype.renderToken=function(t,e,n){var s,i="",r=!1,o=t[e];return o.hidden?"":(o.block&&-1!==o.nesting&&e&&t[e-1].hidden&&(i+="\n"),i+=(-1===o.nesting?"</":"<")+o.tag,i+=this.renderAttrs(o),0===o.nesting&&n.xhtmlOut&&(i+=" /"),o.block&&(r=!0,1===o.nesting&&e+1<t.length&&("inline"===(s=t[e+1]).type||s.hidden||-1===s.nesting&&s.tag===o.tag)&&(r=!1)),i+=r?">\n":">")},a.prototype.renderInline=function(t,e,n){for(var s,i="",r=this.rules,o=0,a=t.length;o<a;o++)void 0!==r[s=t[o].type]?i+=r[s](t,o,e,n,this):i+=this.renderToken(t,o,e);return i},a.prototype.renderInlineAsText=function(t,e,n){for(var s="",i=0,r=t.length;i<r;i++)"text"===t[i].type?s+=t[i].content:"image"===t[i].type&&(s+=this.renderInlineAsText(t[i].children,e,n));return s},a.prototype.render=function(t,e,n){var s,i,r,o="",a=this.rules;for(s=0,i=t.length;s<i;s++)"inline"===(r=t[s].type)?o+=this.renderInline(t[s].children,e,n):void 0!==a[r]?o+=a[t[s].type](t,s,e,n,this):o+=this.renderToken(t,s,e,n);return o},t.exports=a},function(t,e,n){"use strict";var s=n(3),i=[["normalize",n(30)],["block",n(31)],["inline",n(32)],["linkify",n(33)],["replacements",n(34)],["smartquotes",n(35)]];function r(){this.ruler=new s;for(var t=0;t<i.length;t++)this.ruler.push(i[t][0],i[t][1])}r.prototype.process=function(t){var e,n,s;for(e=0,n=(s=this.ruler.getRules("")).length;e<n;e++)s[e](t)},r.prototype.State=n(36),t.exports=r},function(t,e,n){"use strict";var s=/\r\n?|\n/g,i=/\0/g;t.exports=function(t){var e;e=(e=t.src.replace(s,"\n")).replace(i,"�"),t.src=e}},function(t,e,n){"use strict";t.exports=function(t){var e;t.inlineMode?((e=new t.Token("inline","",0)).content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}},function(t,e,n){"use strict";t.exports=function(t){var e,n,s,i=t.tokens;for(n=0,s=i.length;n<s;n++)"inline"===(e=i[n]).type&&t.md.inline.parse(e.content,t.md,t.env,e.children)}},function(t,e,n){"use strict";var s=n(0).arrayReplaceAt;function i(t){return/^<\/a\s*>/i.test(t)}t.exports=function(t){var e,n,r,o,a,c,l,h,u,p,d,f,g,m,v,b,y,w,k=t.tokens;if(t.md.options.linkify)for(n=0,r=k.length;n<r;n++)if("inline"===k[n].type&&t.md.linkify.pretest(k[n].content))for(g=0,e=(o=k[n].children).length-1;e>=0;e--)if("link_close"!==(c=o[e]).type){if("html_inline"===c.type&&(w=c.content,/^<a[>\s]/i.test(w)&&g>0&&g--,i(c.content)&&g++),!(g>0)&&"text"===c.type&&t.md.linkify.test(c.content)){for(u=c.content,y=t.md.linkify.match(u),l=[],f=c.level,d=0,h=0;h<y.length;h++)m=y[h].url,v=t.md.normalizeLink(m),t.md.validateLink(v)&&(b=y[h].text,b=y[h].schema?"mailto:"!==y[h].schema||/^mailto:/i.test(b)?t.md.normalizeLinkText(b):t.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):t.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,""),(p=y[h].index)>d&&((a=new t.Token("text","",0)).content=u.slice(d,p),a.level=f,l.push(a)),(a=new t.Token("link_open","a",1)).attrs=[["href",v]],a.level=f++,a.markup="linkify",a.info="auto",l.push(a),(a=new t.Token("text","",0)).content=b,a.level=f,l.push(a),(a=new t.Token("link_close","a",-1)).level=--f,a.markup="linkify",a.info="auto",l.push(a),d=y[h].lastIndex);d<u.length&&((a=new t.Token("text","",0)).content=u.slice(d),a.level=f,l.push(a)),k[n].children=o=s(o,e,l)}}else for(e--;o[e].level!==c.level&&"link_open"!==o[e].type;)e--}},function(t,e,n){"use strict";var s=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,i=/\((c|tm|r|p)\)/i,r=/\((c|tm|r|p)\)/gi,o={c:"©",r:"®",p:"§",tm:"™"};function a(t,e){return o[e.toLowerCase()]}function c(t){var e,n,s=0;for(e=t.length-1;e>=0;e--)"text"!==(n=t[e]).type||s||(n.content=n.content.replace(r,a)),"link_open"===n.type&&"auto"===n.info&&s--,"link_close"===n.type&&"auto"===n.info&&s++}function l(t){var e,n,i=0;for(e=t.length-1;e>=0;e--)"text"!==(n=t[e]).type||i||s.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1—").replace(/(^|\s)--(?=\s|$)/gm,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1–")),"link_open"===n.type&&"auto"===n.info&&i--,"link_close"===n.type&&"auto"===n.info&&i++}t.exports=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&(i.test(t.tokens[e].content)&&c(t.tokens[e].children),s.test(t.tokens[e].content)&&l(t.tokens[e].children))}},function(t,e,n){"use strict";var s=n(0).isWhiteSpace,i=n(0).isPunctChar,r=n(0).isMdAsciiPunct,o=/['"]/,a=/['"]/g;function c(t,e,n){return t.substr(0,e)+n+t.substr(e+1)}function l(t,e){var n,o,l,h,u,p,d,f,g,m,v,b,y,w,k,x,C,S,A,T,E;for(A=[],n=0;n<t.length;n++){for(o=t[n],d=t[n].level,C=A.length-1;C>=0&&!(A[C].level<=d);C--);if(A.length=C+1,"text"===o.type){u=0,p=(l=o.content).length;t:for(;u<p&&(a.lastIndex=u,h=a.exec(l));){if(k=x=!0,u=h.index+1,S="'"===h[0],g=32,h.index-1>=0)g=l.charCodeAt(h.index-1);else for(C=n-1;C>=0&&("softbreak"!==t[C].type&&"hardbreak"!==t[C].type);C--)if(t[C].content){g=t[C].content.charCodeAt(t[C].content.length-1);break}if(m=32,u<p)m=l.charCodeAt(u);else for(C=n+1;C<t.length&&("softbreak"!==t[C].type&&"hardbreak"!==t[C].type);C++)if(t[C].content){m=t[C].content.charCodeAt(0);break}if(v=r(g)||i(String.fromCharCode(g)),b=r(m)||i(String.fromCharCode(m)),y=s(g),(w=s(m))?k=!1:b&&(y||v||(k=!1)),y?x=!1:v&&(w||b||(x=!1)),34===m&&'"'===h[0]&&g>=48&&g<=57&&(x=k=!1),k&&x&&(k=v,x=b),k||x){if(x)for(C=A.length-1;C>=0&&(f=A[C],!(A[C].level<d));C--)if(f.single===S&&A[C].level===d){f=A[C],S?(T=e.md.options.quotes[2],E=e.md.options.quotes[3]):(T=e.md.options.quotes[0],E=e.md.options.quotes[1]),o.content=c(o.content,h.index,E),t[f.token].content=c(t[f.token].content,f.pos,T),u+=E.length-1,f.token===n&&(u+=T.length-1),p=(l=o.content).length,A.length=C;continue t}k?A.push({token:n,pos:h.index,single:S,level:d}):x&&S&&(o.content=c(o.content,h.index,"’"))}else S&&(o.content=c(o.content,h.index,"’"))}}}}t.exports=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&o.test(t.tokens[e].content)&&l(t.tokens[e].children,t)}},function(t,e,n){"use strict";var s=n(4);function i(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}i.prototype.Token=s,t.exports=i},function(t,e,n){"use strict";var s=n(3),i=[["table",n(38),["paragraph","reference"]],["code",n(39)],["fence",n(40),["paragraph","reference","blockquote","list"]],["blockquote",n(41),["paragraph","reference","blockquote","list"]],["hr",n(42),["paragraph","reference","blockquote","list"]],["list",n(43),["paragraph","reference","blockquote"]],["reference",n(44)],["heading",n(45),["paragraph","reference","blockquote"]],["lheading",n(46)],["html_block",n(47),["paragraph","reference","blockquote"]],["paragraph",n(49)]];function r(){this.ruler=new s;for(var t=0;t<i.length;t++)this.ruler.push(i[t][0],i[t][1],{alt:(i[t][2]||[]).slice()})}r.prototype.tokenize=function(t,e,n){for(var s,i=this.ruler.getRules(""),r=i.length,o=e,a=!1,c=t.md.options.maxNesting;o<n&&(t.line=o=t.skipEmptyLines(o),!(o>=n))&&!(t.sCount[o]<t.blkIndent);){if(t.level>=c){t.line=n;break}for(s=0;s<r&&!i[s](t,o,n,!1);s++);t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),(o=t.line)<n&&t.isEmpty(o)&&(a=!0,o++,t.line=o)}},r.prototype.parse=function(t,e,n,s){var i;t&&(i=new this.State(t,e,n,s),this.tokenize(i,i.line,i.lineMax))},r.prototype.State=n(50),t.exports=r},function(t,e,n){"use strict";var s=n(0).isSpace;function i(t,e){var n=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];return t.src.substr(n,s-n)}function r(t){var e,n=[],s=0,i=t.length,r=!1,o=0,a="";for(e=t.charCodeAt(s);s<i;)124===e&&(r?(a+=t.substring(o,s-1),o=s):(n.push(a+t.substring(o,s)),a="",o=s+1)),r=92===e,s++,e=t.charCodeAt(s);return n.push(a+t.substring(o)),n}t.exports=function(t,e,n,o){var a,c,l,h,u,p,d,f,g,m,v,b,y,w,k,x;if(e+2>n)return!1;if(p=e+1,t.sCount[p]<t.blkIndent)return!1;if(t.sCount[p]-t.blkIndent>=4)return!1;if((l=t.bMarks[p]+t.tShift[p])>=t.eMarks[p])return!1;if(124!==(a=t.src.charCodeAt(l++))&&45!==a&&58!==a)return!1;for(;l<t.eMarks[p];){if(124!==(a=t.src.charCodeAt(l))&&45!==a&&58!==a&&!s(a))return!1;l++}for(d=(c=i(t,e+1)).split("|"),m=[],h=0;h<d.length;h++){if(!(v=d[h].trim())){if(0===h||h===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?m.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?m.push("left"):m.push("")}if(-1===(c=i(t,e).trim()).indexOf("|"))return!1;if(t.sCount[e]-t.blkIndent>=4)return!1;if((d=r(c)).length&&""===d[0]&&d.shift(),d.length&&""===d[d.length-1]&&d.pop(),0===(f=d.length)||f!==m.length)return!1;if(o)return!0;for(w=t.parentType,t.parentType="table",x=t.md.block.ruler.getRules("blockquote"),(g=t.push("table_open","table",1)).map=b=[e,0],(g=t.push("thead_open","thead",1)).map=[e,e+1],(g=t.push("tr_open","tr",1)).map=[e,e+1],h=0;h<d.length;h++)g=t.push("th_open","th",1),m[h]&&(g.attrs=[["style","text-align:"+m[h]]]),(g=t.push("inline","",0)).content=d[h].trim(),g.children=[],g=t.push("th_close","th",-1);for(g=t.push("tr_close","tr",-1),g=t.push("thead_close","thead",-1),p=e+2;p<n&&!(t.sCount[p]<t.blkIndent);p++){for(k=!1,h=0,u=x.length;h<u;h++)if(x[h](t,p,n,!0)){k=!0;break}if(k)break;if(!(c=i(t,p).trim()))break;if(t.sCount[p]-t.blkIndent>=4)break;for((d=r(c)).length&&""===d[0]&&d.shift(),d.length&&""===d[d.length-1]&&d.pop(),p===e+2&&((g=t.push("tbody_open","tbody",1)).map=y=[e+2,0]),(g=t.push("tr_open","tr",1)).map=[p,p+1],h=0;h<f;h++)g=t.push("td_open","td",1),m[h]&&(g.attrs=[["style","text-align:"+m[h]]]),(g=t.push("inline","",0)).content=d[h]?d[h].trim():"",g.children=[],g=t.push("td_close","td",-1);g=t.push("tr_close","tr",-1)}return y&&(g=t.push("tbody_close","tbody",-1),y[1]=p),g=t.push("table_close","table",-1),b[1]=p,t.parentType=w,t.line=p,!0}},function(t,e,n){"use strict";t.exports=function(t,e,n){var s,i,r;if(t.sCount[e]-t.blkIndent<4)return!1;for(i=s=e+1;s<n;)if(t.isEmpty(s))s++;else{if(!(t.sCount[s]-t.blkIndent>=4))break;i=++s}return t.line=i,(r=t.push("code_block","code",0)).content=t.getLines(e,i,4+t.blkIndent,!0),r.map=[e,t.line],!0}},function(t,e,n){"use strict";t.exports=function(t,e,n,s){var i,r,o,a,c,l,h,u=!1,p=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(p+3>d)return!1;if(126!==(i=t.src.charCodeAt(p))&&96!==i)return!1;if(c=p,(r=(p=t.skipChars(p,i))-c)<3)return!1;if(h=t.src.slice(c,p),o=t.src.slice(p,d),96===i&&o.indexOf(String.fromCharCode(i))>=0)return!1;if(s)return!0;for(a=e;!(++a>=n)&&!((p=c=t.bMarks[a]+t.tShift[a])<(d=t.eMarks[a])&&t.sCount[a]<t.blkIndent);)if(t.src.charCodeAt(p)===i&&!(t.sCount[a]-t.blkIndent>=4||(p=t.skipChars(p,i))-c<r||(p=t.skipSpaces(p))<d)){u=!0;break}return r=t.sCount[e],t.line=a+(u?1:0),(l=t.push("fence","code",0)).info=o,l.content=t.getLines(e+1,a,r,!0),l.markup=h,l.map=[e,t.line],!0}},function(t,e,n){"use strict";var s=n(0).isSpace;t.exports=function(t,e,n,i){var r,o,a,c,l,h,u,p,d,f,g,m,v,b,y,w,k,x,C,S,A=t.lineMax,T=t.bMarks[e]+t.tShift[e],E=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(62!==t.src.charCodeAt(T++))return!1;if(i)return!0;for(c=d=t.sCount[e]+1,32===t.src.charCodeAt(T)?(T++,c++,d++,r=!1,w=!0):9===t.src.charCodeAt(T)?(w=!0,(t.bsCount[e]+d)%4==3?(T++,c++,d++,r=!1):r=!0):w=!1,f=[t.bMarks[e]],t.bMarks[e]=T;T<E&&(o=t.src.charCodeAt(T),s(o));)9===o?d+=4-(d+t.bsCount[e]+(r?1:0))%4:d++,T++;for(g=[t.bsCount[e]],t.bsCount[e]=t.sCount[e]+1+(w?1:0),h=T>=E,b=[t.sCount[e]],t.sCount[e]=d-c,y=[t.tShift[e]],t.tShift[e]=T-t.bMarks[e],x=t.md.block.ruler.getRules("blockquote"),v=t.parentType,t.parentType="blockquote",p=e+1;p<n&&(S=t.sCount[p]<t.blkIndent,!((T=t.bMarks[p]+t.tShift[p])>=(E=t.eMarks[p])));p++)if(62!==t.src.charCodeAt(T++)||S){if(h)break;for(k=!1,a=0,l=x.length;a<l;a++)if(x[a](t,p,n,!0)){k=!0;break}if(k){t.lineMax=p,0!==t.blkIndent&&(f.push(t.bMarks[p]),g.push(t.bsCount[p]),y.push(t.tShift[p]),b.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}f.push(t.bMarks[p]),g.push(t.bsCount[p]),y.push(t.tShift[p]),b.push(t.sCount[p]),t.sCount[p]=-1}else{for(c=d=t.sCount[p]+1,32===t.src.charCodeAt(T)?(T++,c++,d++,r=!1,w=!0):9===t.src.charCodeAt(T)?(w=!0,(t.bsCount[p]+d)%4==3?(T++,c++,d++,r=!1):r=!0):w=!1,f.push(t.bMarks[p]),t.bMarks[p]=T;T<E&&(o=t.src.charCodeAt(T),s(o));)9===o?d+=4-(d+t.bsCount[p]+(r?1:0))%4:d++,T++;h=T>=E,g.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(w?1:0),b.push(t.sCount[p]),t.sCount[p]=d-c,y.push(t.tShift[p]),t.tShift[p]=T-t.bMarks[p]}for(m=t.blkIndent,t.blkIndent=0,(C=t.push("blockquote_open","blockquote",1)).markup=">",C.map=u=[e,0],t.md.block.tokenize(t,e,p),(C=t.push("blockquote_close","blockquote",-1)).markup=">",t.lineMax=A,t.parentType=v,u[1]=t.line,a=0;a<y.length;a++)t.bMarks[a+e]=f[a],t.tShift[a+e]=y[a],t.sCount[a+e]=b[a],t.bsCount[a+e]=g[a];return t.blkIndent=m,!0}},function(t,e,n){"use strict";var s=n(0).isSpace;t.exports=function(t,e,n,i){var r,o,a,c,l=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(42!==(r=t.src.charCodeAt(l++))&&45!==r&&95!==r)return!1;for(o=1;l<h;){if((a=t.src.charCodeAt(l++))!==r&&!s(a))return!1;a===r&&o++}return!(o<3)&&(i||(t.line=e+1,(c=t.push("hr","hr",0)).map=[e,t.line],c.markup=Array(o+1).join(String.fromCharCode(r))),!0)}},function(t,e,n){"use strict";var s=n(0).isSpace;function i(t,e){var n,i,r,o;return i=t.bMarks[e]+t.tShift[e],r=t.eMarks[e],42!==(n=t.src.charCodeAt(i++))&&45!==n&&43!==n||i<r&&(o=t.src.charCodeAt(i),!s(o))?-1:i}function r(t,e){var n,i=t.bMarks[e]+t.tShift[e],r=i,o=t.eMarks[e];if(r+1>=o)return-1;if((n=t.src.charCodeAt(r++))<48||n>57)return-1;for(;;){if(r>=o)return-1;if(!((n=t.src.charCodeAt(r++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(r-i>=10)return-1}return r<o&&(n=t.src.charCodeAt(r),!s(n))?-1:r}t.exports=function(t,e,n,s){var o,a,c,l,h,u,p,d,f,g,m,v,b,y,w,k,x,C,S,A,T,E,_,I,R,O,P,$,j=!1,V=!0;if(t.sCount[e]-t.blkIndent>=4)return!1;if(t.listIndent>=0&&t.sCount[e]-t.listIndent>=4&&t.sCount[e]<t.blkIndent)return!1;if(s&&"paragraph"===t.parentType&&t.tShift[e]>=t.blkIndent&&(j=!0),(_=r(t,e))>=0){if(p=!0,R=t.bMarks[e]+t.tShift[e],b=Number(t.src.substr(R,_-R-1)),j&&1!==b)return!1}else{if(!((_=i(t,e))>=0))return!1;p=!1}if(j&&t.skipSpaces(_)>=t.eMarks[e])return!1;if(v=t.src.charCodeAt(_-1),s)return!0;for(m=t.tokens.length,p?($=t.push("ordered_list_open","ol",1),1!==b&&($.attrs=[["start",b]])):$=t.push("bullet_list_open","ul",1),$.map=g=[e,0],$.markup=String.fromCharCode(v),w=e,I=!1,P=t.md.block.ruler.getRules("list"),C=t.parentType,t.parentType="list";w<n;){for(E=_,y=t.eMarks[w],u=k=t.sCount[w]+_-(t.bMarks[e]+t.tShift[e]);E<y;){if(9===(o=t.src.charCodeAt(E)))k+=4-(k+t.bsCount[w])%4;else{if(32!==o)break;k++}E++}if((h=(a=E)>=y?1:k-u)>4&&(h=1),l=u+h,($=t.push("list_item_open","li",1)).markup=String.fromCharCode(v),$.map=d=[e,0],T=t.tight,A=t.tShift[e],S=t.sCount[e],x=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=l,t.tight=!0,t.tShift[e]=a-t.bMarks[e],t.sCount[e]=k,a>=y&&t.isEmpty(e+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,e,n,!0),t.tight&&!I||(V=!1),I=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=x,t.tShift[e]=A,t.sCount[e]=S,t.tight=T,($=t.push("list_item_close","li",-1)).markup=String.fromCharCode(v),w=e=t.line,d[1]=w,a=t.bMarks[e],w>=n)break;if(t.sCount[w]<t.blkIndent)break;if(t.sCount[e]-t.blkIndent>=4)break;for(O=!1,c=0,f=P.length;c<f;c++)if(P[c](t,w,n,!0)){O=!0;break}if(O)break;if(p){if((_=r(t,w))<0)break}else if((_=i(t,w))<0)break;if(v!==t.src.charCodeAt(_-1))break}return($=p?t.push("ordered_list_close","ol",-1):t.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(v),g[1]=w,t.line=w,t.parentType=C,V&&function(t,e){var n,s,i=t.level+2;for(n=e+2,s=t.tokens.length-2;n<s;n++)t.tokens[n].level===i&&"paragraph_open"===t.tokens[n].type&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}(t,m),!0}},function(t,e,n){"use strict";var s=n(0).normalizeReference,i=n(0).isSpace;t.exports=function(t,e,n,r){var o,a,c,l,h,u,p,d,f,g,m,v,b,y,w,k,x=0,C=t.bMarks[e]+t.tShift[e],S=t.eMarks[e],A=e+1;if(t.sCount[e]-t.blkIndent>=4)return!1;if(91!==t.src.charCodeAt(C))return!1;for(;++C<S;)if(93===t.src.charCodeAt(C)&&92!==t.src.charCodeAt(C-1)){if(C+1===S)return!1;if(58!==t.src.charCodeAt(C+1))return!1;break}for(l=t.lineMax,w=t.md.block.ruler.getRules("reference"),g=t.parentType,t.parentType="reference";A<l&&!t.isEmpty(A);A++)if(!(t.sCount[A]-t.blkIndent>3||t.sCount[A]<0)){for(y=!1,u=0,p=w.length;u<p;u++)if(w[u](t,A,l,!0)){y=!0;break}if(y)break}for(S=(b=t.getLines(e,A,t.blkIndent,!1).trim()).length,C=1;C<S;C++){if(91===(o=b.charCodeAt(C)))return!1;if(93===o){f=C;break}(10===o||92===o&&++C<S&&10===b.charCodeAt(C))&&x++}if(f<0||58!==b.charCodeAt(f+1))return!1;for(C=f+2;C<S;C++)if(10===(o=b.charCodeAt(C)))x++;else if(!i(o))break;if(!(m=t.md.helpers.parseLinkDestination(b,C,S)).ok)return!1;if(h=t.md.normalizeLink(m.str),!t.md.validateLink(h))return!1;for(a=C=m.pos,c=x+=m.lines,v=C;C<S;C++)if(10===(o=b.charCodeAt(C)))x++;else if(!i(o))break;for(m=t.md.helpers.parseLinkTitle(b,C,S),C<S&&v!==C&&m.ok?(k=m.str,C=m.pos,x+=m.lines):(k="",C=a,x=c);C<S&&(o=b.charCodeAt(C),i(o));)C++;if(C<S&&10!==b.charCodeAt(C)&&k)for(k="",C=a,x=c;C<S&&(o=b.charCodeAt(C),i(o));)C++;return!(C<S&&10!==b.charCodeAt(C))&&(!!(d=s(b.slice(1,f)))&&(r||(void 0===t.env.references&&(t.env.references={}),void 0===t.env.references[d]&&(t.env.references[d]={title:k,href:h}),t.parentType=g,t.line=e+x+1),!0))}},function(t,e,n){"use strict";var s=n(0).isSpace;t.exports=function(t,e,n,i){var r,o,a,c,l=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(35!==(r=t.src.charCodeAt(l))||l>=h)return!1;for(o=1,r=t.src.charCodeAt(++l);35===r&&l<h&&o<=6;)o++,r=t.src.charCodeAt(++l);return!(o>6||l<h&&!s(r))&&(i||(h=t.skipSpacesBack(h,l),(a=t.skipCharsBack(h,35,l))>l&&s(t.src.charCodeAt(a-1))&&(h=a),t.line=e+1,(c=t.push("heading_open","h"+String(o),1)).markup="########".slice(0,o),c.map=[e,t.line],(c=t.push("inline","",0)).content=t.src.slice(l,h).trim(),c.map=[e,t.line],c.children=[],(c=t.push("heading_close","h"+String(o),-1)).markup="########".slice(0,o)),!0)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var s,i,r,o,a,c,l,h,u,p,d=e+1,f=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;for(p=t.parentType,t.parentType="paragraph";d<n&&!t.isEmpty(d);d++)if(!(t.sCount[d]-t.blkIndent>3)){if(t.sCount[d]>=t.blkIndent&&(c=t.bMarks[d]+t.tShift[d])<(l=t.eMarks[d])&&(45===(u=t.src.charCodeAt(c))||61===u)&&(c=t.skipChars(c,u),(c=t.skipSpaces(c))>=l)){h=61===u?1:2;break}if(!(t.sCount[d]<0)){for(i=!1,r=0,o=f.length;r<o;r++)if(f[r](t,d,n,!0)){i=!0;break}if(i)break}}return!!h&&(s=t.getLines(e,d,t.blkIndent,!1).trim(),t.line=d+1,(a=t.push("heading_open","h"+String(h),1)).markup=String.fromCharCode(u),a.map=[e,t.line],(a=t.push("inline","",0)).content=s,a.map=[e,t.line-1],a.children=[],(a=t.push("heading_close","h"+String(h),-1)).markup=String.fromCharCode(u),t.parentType=p,!0)}},function(t,e,n){"use strict";var s=n(48),i=n(11).HTML_OPEN_CLOSE_TAG_RE,r=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+s.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(i.source+"\\s*$"),/^$/,!1]];t.exports=function(t,e,n,s){var i,o,a,c,l=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(!t.md.options.html)return!1;if(60!==t.src.charCodeAt(l))return!1;for(c=t.src.slice(l,h),i=0;i<r.length&&!r[i][0].test(c);i++);if(i===r.length)return!1;if(s)return r[i][2];if(o=e+1,!r[i][1].test(c))for(;o<n&&!(t.sCount[o]<t.blkIndent);o++)if(l=t.bMarks[o]+t.tShift[o],h=t.eMarks[o],c=t.src.slice(l,h),r[i][1].test(c)){0!==c.length&&o++;break}return t.line=o,(a=t.push("html_block","",0)).map=[e,o],a.content=t.getLines(e,o,t.blkIndent,!0),!0}},function(t,e,n){"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},function(t,e,n){"use strict";t.exports=function(t,e){var n,s,i,r,o,a,c=e+1,l=t.md.block.ruler.getRules("paragraph"),h=t.lineMax;for(a=t.parentType,t.parentType="paragraph";c<h&&!t.isEmpty(c);c++)if(!(t.sCount[c]-t.blkIndent>3||t.sCount[c]<0)){for(s=!1,i=0,r=l.length;i<r;i++)if(l[i](t,c,h,!0)){s=!0;break}if(s)break}return n=t.getLines(e,c,t.blkIndent,!1).trim(),t.line=c,(o=t.push("paragraph_open","p",1)).map=[e,t.line],(o=t.push("inline","",0)).content=n,o.map=[e,t.line],o.children=[],o=t.push("paragraph_close","p",-1),t.parentType=a,!0}},function(t,e,n){"use strict";var s=n(4),i=n(0).isSpace;function r(t,e,n,s){var r,o,a,c,l,h,u,p;for(this.src=t,this.md=e,this.env=n,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",p=!1,a=c=h=u=0,l=(o=this.src).length;c<l;c++){if(r=o.charCodeAt(c),!p){if(i(r)){h++,9===r?u+=4-u%4:u++;continue}p=!0}10!==r&&c!==l-1||(10!==r&&c++,this.bMarks.push(a),this.eMarks.push(c),this.tShift.push(h),this.sCount.push(u),this.bsCount.push(0),p=!1,h=0,u=0,a=c+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}r.prototype.push=function(t,e,n){var i=new s(t,e,n);return i.block=!0,n<0&&this.level--,i.level=this.level,n>0&&this.level++,this.tokens.push(i),i},r.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},r.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},r.prototype.skipSpaces=function(t){for(var e,n=this.src.length;t<n&&(e=this.src.charCodeAt(t),i(e));t++);return t},r.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;for(;t>e;)if(!i(this.src.charCodeAt(--t)))return t+1;return t},r.prototype.skipChars=function(t,e){for(var n=this.src.length;t<n&&this.src.charCodeAt(t)===e;t++);return t},r.prototype.skipCharsBack=function(t,e,n){if(t<=n)return t;for(;t>n;)if(e!==this.src.charCodeAt(--t))return t+1;return t},r.prototype.getLines=function(t,e,n,s){var r,o,a,c,l,h,u,p=t;if(t>=e)return"";for(h=new Array(e-t),r=0;p<e;p++,r++){for(o=0,u=c=this.bMarks[p],l=p+1<e||s?this.eMarks[p]+1:this.eMarks[p];c<l&&o<n;){if(a=this.src.charCodeAt(c),i(a))9===a?o+=4-(o+this.bsCount[p])%4:o++;else{if(!(c-u<this.tShift[p]))break;o++}c++}h[r]=o>n?new Array(o-n+1).join(" ")+this.src.slice(c,l):this.src.slice(c,l)}return h.join("")},r.prototype.Token=s,t.exports=r},function(t,e,n){"use strict";var s=n(3),i=[["text",n(52)],["newline",n(53)],["escape",n(54)],["backticks",n(55)],["strikethrough",n(12).tokenize],["emphasis",n(13).tokenize],["link",n(56)],["image",n(57)],["autolink",n(58)],["html_inline",n(59)],["entity",n(60)]],r=[["balance_pairs",n(61)],["strikethrough",n(12).postProcess],["emphasis",n(13).postProcess],["text_collapse",n(62)]];function o(){var t;for(this.ruler=new s,t=0;t<i.length;t++)this.ruler.push(i[t][0],i[t][1]);for(this.ruler2=new s,t=0;t<r.length;t++)this.ruler2.push(r[t][0],r[t][1])}o.prototype.skipToken=function(t){var e,n,s=t.pos,i=this.ruler.getRules(""),r=i.length,o=t.md.options.maxNesting,a=t.cache;if(void 0===a[s]){if(t.level<o)for(n=0;n<r&&(t.level++,e=i[n](t,!0),t.level--,!e);n++);else t.pos=t.posMax;e||t.pos++,a[s]=t.pos}else t.pos=a[s]},o.prototype.tokenize=function(t){for(var e,n,s=this.ruler.getRules(""),i=s.length,r=t.posMax,o=t.md.options.maxNesting;t.pos<r;){if(t.level<o)for(n=0;n<i&&!(e=s[n](t,!1));n++);if(e){if(t.pos>=r)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},o.prototype.parse=function(t,e,n,s){var i,r,o,a=new this.State(t,e,n,s);for(this.tokenize(a),o=(r=this.ruler2.getRules("")).length,i=0;i<o;i++)r[i](a)},o.prototype.State=n(63),t.exports=o},function(t,e,n){"use strict";function s(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}t.exports=function(t,e){for(var n=t.pos;n<t.posMax&&!s(t.src.charCodeAt(n));)n++;return n!==t.pos&&(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}},function(t,e,n){"use strict";var s=n(0).isSpace;t.exports=function(t,e){var n,i,r=t.pos;if(10!==t.src.charCodeAt(r))return!1;for(n=t.pending.length-1,i=t.posMax,e||(n>=0&&32===t.pending.charCodeAt(n)?n>=1&&32===t.pending.charCodeAt(n-1)?(t.pending=t.pending.replace(/ +$/,""),t.push("hardbreak","br",0)):(t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0)):t.push("softbreak","br",0)),r++;r<i&&s(t.src.charCodeAt(r));)r++;return t.pos=r,!0}},function(t,e,n){"use strict";for(var s=n(0).isSpace,i=[],r=0;r<256;r++)i.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){i[t.charCodeAt(0)]=1})),t.exports=function(t,e){var n,r=t.pos,o=t.posMax;if(92!==t.src.charCodeAt(r))return!1;if(++r<o){if((n=t.src.charCodeAt(r))<256&&0!==i[n])return e||(t.pending+=t.src[r]),t.pos+=2,!0;if(10===n){for(e||t.push("hardbreak","br",0),r++;r<o&&(n=t.src.charCodeAt(r),s(n));)r++;return t.pos=r,!0}}return e||(t.pending+="\\"),t.pos++,!0}},function(t,e,n){"use strict";t.exports=function(t,e){var n,s,i,r,o,a,c,l,h=t.pos;if(96!==t.src.charCodeAt(h))return!1;for(n=h,h++,s=t.posMax;h<s&&96===t.src.charCodeAt(h);)h++;if(c=(i=t.src.slice(n,h)).length,t.backticksScanned&&(t.backticks[c]||0)<=n)return e||(t.pending+=i),t.pos+=c,!0;for(o=a=h;-1!==(o=t.src.indexOf("`",a));){for(a=o+1;a<s&&96===t.src.charCodeAt(a);)a++;if((l=a-o)===c)return e||((r=t.push("code_inline","code",0)).markup=i,r.content=t.src.slice(h,o).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=a,!0;t.backticks[l]=o}return t.backticksScanned=!0,e||(t.pending+=i),t.pos+=c,!0}},function(t,e,n){"use strict";var s=n(0).normalizeReference,i=n(0).isSpace;t.exports=function(t,e){var n,r,o,a,c,l,h,u,p="",d="",f=t.pos,g=t.posMax,m=t.pos,v=!0;if(91!==t.src.charCodeAt(t.pos))return!1;if(c=t.pos+1,(a=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)return!1;if((l=a+1)<g&&40===t.src.charCodeAt(l)){for(v=!1,l++;l<g&&(r=t.src.charCodeAt(l),i(r)||10===r);l++);if(l>=g)return!1;if(m=l,(h=t.md.helpers.parseLinkDestination(t.src,l,t.posMax)).ok){for(p=t.md.normalizeLink(h.str),t.md.validateLink(p)?l=h.pos:p="",m=l;l<g&&(r=t.src.charCodeAt(l),i(r)||10===r);l++);if(h=t.md.helpers.parseLinkTitle(t.src,l,t.posMax),l<g&&m!==l&&h.ok)for(d=h.str,l=h.pos;l<g&&(r=t.src.charCodeAt(l),i(r)||10===r);l++);}(l>=g||41!==t.src.charCodeAt(l))&&(v=!0),l++}if(v){if(void 0===t.env.references)return!1;if(l<g&&91===t.src.charCodeAt(l)?(m=l+1,(l=t.md.helpers.parseLinkLabel(t,l))>=0?o=t.src.slice(m,l++):l=a+1):l=a+1,o||(o=t.src.slice(c,a)),!(u=t.env.references[s(o)]))return t.pos=f,!1;p=u.href,d=u.title}return e||(t.pos=c,t.posMax=a,t.push("link_open","a",1).attrs=n=[["href",p]],d&&n.push(["title",d]),t.md.inline.tokenize(t),t.push("link_close","a",-1)),t.pos=l,t.posMax=g,!0}},function(t,e,n){"use strict";var s=n(0).normalizeReference,i=n(0).isSpace;t.exports=function(t,e){var n,r,o,a,c,l,h,u,p,d,f,g,m,v="",b=t.pos,y=t.posMax;if(33!==t.src.charCodeAt(t.pos))return!1;if(91!==t.src.charCodeAt(t.pos+1))return!1;if(l=t.pos+2,(c=t.md.helpers.parseLinkLabel(t,t.pos+1,!1))<0)return!1;if((h=c+1)<y&&40===t.src.charCodeAt(h)){for(h++;h<y&&(r=t.src.charCodeAt(h),i(r)||10===r);h++);if(h>=y)return!1;for(m=h,(p=t.md.helpers.parseLinkDestination(t.src,h,t.posMax)).ok&&(v=t.md.normalizeLink(p.str),t.md.validateLink(v)?h=p.pos:v=""),m=h;h<y&&(r=t.src.charCodeAt(h),i(r)||10===r);h++);if(p=t.md.helpers.parseLinkTitle(t.src,h,t.posMax),h<y&&m!==h&&p.ok)for(d=p.str,h=p.pos;h<y&&(r=t.src.charCodeAt(h),i(r)||10===r);h++);else d="";if(h>=y||41!==t.src.charCodeAt(h))return t.pos=b,!1;h++}else{if(void 0===t.env.references)return!1;if(h<y&&91===t.src.charCodeAt(h)?(m=h+1,(h=t.md.helpers.parseLinkLabel(t,h))>=0?a=t.src.slice(m,h++):h=c+1):h=c+1,a||(a=t.src.slice(l,c)),!(u=t.env.references[s(a)]))return t.pos=b,!1;v=u.href,d=u.title}return e||(o=t.src.slice(l,c),t.md.inline.parse(o,t.md,t.env,g=[]),(f=t.push("image","img",0)).attrs=n=[["src",v],["alt",""]],f.children=g,f.content=o,d&&n.push(["title",d])),t.pos=h,t.posMax=y,!0}},function(t,e,n){"use strict";var s=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,i=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;t.exports=function(t,e){var n,r,o,a,c,l,h=t.pos;if(60!==t.src.charCodeAt(h))return!1;for(c=t.pos,l=t.posMax;;){if(++h>=l)return!1;if(60===(a=t.src.charCodeAt(h)))return!1;if(62===a)break}return n=t.src.slice(c+1,h),i.test(n)?(r=t.md.normalizeLink(n),!!t.md.validateLink(r)&&(e||((o=t.push("link_open","a",1)).attrs=[["href",r]],o.markup="autolink",o.info="auto",(o=t.push("text","",0)).content=t.md.normalizeLinkText(n),(o=t.push("link_close","a",-1)).markup="autolink",o.info="auto"),t.pos+=n.length+2,!0)):!!s.test(n)&&(r=t.md.normalizeLink("mailto:"+n),!!t.md.validateLink(r)&&(e||((o=t.push("link_open","a",1)).attrs=[["href",r]],o.markup="autolink",o.info="auto",(o=t.push("text","",0)).content=t.md.normalizeLinkText(n),(o=t.push("link_close","a",-1)).markup="autolink",o.info="auto"),t.pos+=n.length+2,!0))}},function(t,e,n){"use strict";var s=n(11).HTML_TAG_RE;t.exports=function(t,e){var n,i,r,o=t.pos;return!!t.md.options.html&&(r=t.posMax,!(60!==t.src.charCodeAt(o)||o+2>=r)&&(!(33!==(n=t.src.charCodeAt(o+1))&&63!==n&&47!==n&&!function(t){var e=32|t;return e>=97&&e<=122}(n))&&(!!(i=t.src.slice(o).match(s))&&(e||(t.push("html_inline","",0).content=t.src.slice(o,o+i[0].length)),t.pos+=i[0].length,!0))))}},function(t,e,n){"use strict";var s=n(6),i=n(0).has,r=n(0).isValidEntityCode,o=n(0).fromCodePoint,a=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,c=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(t,e){var n,l,h=t.pos,u=t.posMax;if(38!==t.src.charCodeAt(h))return!1;if(h+1<u)if(35===t.src.charCodeAt(h+1)){if(l=t.src.slice(h).match(a))return e||(n="x"===l[1][0].toLowerCase()?parseInt(l[1].slice(1),16):parseInt(l[1],10),t.pending+=r(n)?o(n):o(65533)),t.pos+=l[0].length,!0}else if((l=t.src.slice(h).match(c))&&i(s,l[1]))return e||(t.pending+=s[l[1]]),t.pos+=l[0].length,!0;return e||(t.pending+="&"),t.pos++,!0}},function(t,e,n){"use strict";function s(t,e){var n,s,i,r,o,a,c,l,h={},u=e.length;for(n=0;n<u;n++)if((i=e[n]).length=i.length||0,i.close){for(h.hasOwnProperty(i.marker)||(h[i.marker]=[-1,-1,-1]),o=h[i.marker][i.length%3],a=s=n-i.jump-1;s>o;s-=r.jump+1)if((r=e[s]).marker===i.marker&&r.open&&r.end<0&&(c=!1,(r.close||i.open)&&(r.length+i.length)%3==0&&(r.length%3==0&&i.length%3==0||(c=!0)),!c)){l=s>0&&!e[s-1].open?e[s-1].jump+1:0,i.jump=n-s+l,i.open=!1,r.end=n,r.jump=l,r.close=!1,a=-1;break}-1!==a&&(h[i.marker][(i.length||0)%3]=a)}}t.exports=function(t){var e,n=t.tokens_meta,i=t.tokens_meta.length;for(s(0,t.delimiters),e=0;e<i;e++)n[e]&&n[e].delimiters&&s(0,n[e].delimiters)}},function(t,e,n){"use strict";t.exports=function(t){var e,n,s=0,i=t.tokens,r=t.tokens.length;for(e=n=0;e<r;e++)i[e].nesting<0&&s--,i[e].level=s,i[e].nesting>0&&s++,"text"===i[e].type&&e+1<r&&"text"===i[e+1].type?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}},function(t,e,n){"use strict";var s=n(4),i=n(0).isWhiteSpace,r=n(0).isPunctChar,o=n(0).isMdAsciiPunct;function a(t,e,n,s){this.src=t,this.env=n,this.md=e,this.tokens=s,this.tokens_meta=Array(s.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}a.prototype.pushPending=function(){var t=new s("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},a.prototype.push=function(t,e,n){this.pending&&this.pushPending();var i=new s(t,e,n),r=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(r),i},a.prototype.scanDelims=function(t,e){var n,s,a,c,l,h,u,p,d,f=t,g=!0,m=!0,v=this.posMax,b=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;f<v&&this.src.charCodeAt(f)===b;)f++;return a=f-t,s=f<v?this.src.charCodeAt(f):32,u=o(n)||r(String.fromCharCode(n)),d=o(s)||r(String.fromCharCode(s)),h=i(n),(p=i(s))?g=!1:d&&(h||u||(g=!1)),h?m=!1:u&&(p||d||(m=!1)),e?(c=g,l=m):(c=g&&(!m||u),l=m&&(!g||d)),{can_open:c,can_close:l,length:a}},a.prototype.Token=s,t.exports=a},function(t,e,n){"use strict";function s(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach((function(e){e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t}function i(t){return Object.prototype.toString.call(t)}function r(t){return"[object Function]"===i(t)}function o(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var a={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(t,e,n){var s=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(s)?s.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var s=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(s)?e>=3&&":"===t[e-3]||e>=3&&"/"===t[e-3]?0:s.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var s=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(s)?s.match(n.re.mailto)[0].length:0}}},l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function h(t){var e=t.re=n(65)(t.__opts__),s=t.__tlds__.slice();function a(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.__tlds_replaced__||s.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),s.push(e.src_xn),e.src_tlds=s.join("|"),e.email_fuzzy=RegExp(a(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(a(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(a(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(a(e.tpl_host_fuzzy_test),"i");var c=[];function l(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.__compiled__={},Object.keys(t.__schemas__).forEach((function(e){var n=t.__schemas__[e];if(null!==n){var s={validate:null,link:null};if(t.__compiled__[e]=s,"[object Object]"===i(n))return!function(t){return"[object RegExp]"===i(t)}(n.validate)?r(n.validate)?s.validate=n.validate:l(e,n):s.validate=function(t){return function(e,n){var s=e.slice(n);return t.test(s)?s.match(t)[0].length:0}}(n.validate),void(r(n.normalize)?s.normalize=n.normalize:n.normalize?l(e,n):s.normalize=function(t,e){e.normalize(t)});!function(t){return"[object String]"===i(t)}(n)?l(e,n):c.push(e)}})),c.forEach((function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)})),t.__compiled__[""]={validate:null,normalize:function(t,e){e.normalize(t)}};var h=Object.keys(t.__compiled__).filter((function(e){return e.length>0&&t.__compiled__[e]})).map(o).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+h+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+h+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(t){t.__index__=-1,t.__text_cache__=""}(t)}function u(t,e){var n=t.__index__,s=t.__last_index__,i=t.__text_cache__.slice(n,s);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=s+e,this.raw=i,this.text=i,this.url=i}function p(t,e){var n=new u(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function d(t,e){if(!(this instanceof d))return new d(t,e);var n;e||(n=t,Object.keys(n||{}).reduce((function(t,e){return t||a.hasOwnProperty(e)}),!1)&&(e=t,t={})),this.__opts__=s({},a,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=s({},c,t),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},h(this)}d.prototype.add=function(t,e){return this.__schemas__[t]=e,h(this),this},d.prototype.set=function(t){return this.__opts__=s(this.__opts__,t),this},d.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,s,i,r,o,a,c;if(this.re.schema_test.test(t))for((a=this.re.schema_search).lastIndex=0;null!==(e=a.exec(t));)if(i=this.testSchemaAt(t,e[2],a.lastIndex)){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=n.index+n[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&t.indexOf("@")>=0&&null!==(s=t.match(this.re.email_fuzzy))&&(r=s.index+s[1].length,o=s.index+s[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=o)),this.__index__>=0},d.prototype.pretest=function(t){return this.re.pretest.test(t)},d.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0},d.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(p(this,e)),e=this.__last_index__);for(var s=e?t.slice(e):t;this.test(s);)n.push(p(this,e)),s=s.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null},d.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter((function(t,e,n){return t!==n[e-1]})).reverse(),h(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,h(this),this)},d.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},d.prototype.onCompile=function(){},t.exports=d},function(t,e,n){"use strict";t.exports=function(t){var e={};e.src_Any=n(8).source,e.src_Cc=n(9).source,e.src_Z=n(10).source,e.src_P=n(2).source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");return e.src_pseudo_letter="(?:(?![><｜]|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|[><｜]|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}},function(t,e,n){(function(t,s){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(r){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof s&&s;o.global!==o&&o.window!==o&&o.self;var a,c=2147483647,l=/^xn--/,h=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,f=String.fromCharCode;function g(t){throw new RangeError(p[t])}function m(t,e){for(var n=t.length,s=[];n--;)s[n]=e(t[n]);return s}function v(t,e){var n=t.split("@"),s="";return n.length>1&&(s=n[0]+"@",t=n[1]),s+m((t=t.replace(u,".")).split("."),e).join(".")}function b(t){for(var e,n,s=[],i=0,r=t.length;i<r;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<r?56320==(64512&(n=t.charCodeAt(i++)))?s.push(((1023&e)<<10)+(1023&n)+65536):(s.push(e),i--):s.push(e);return s}function y(t){return m(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,n){var s=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;s+=36)t=d(t/35);return d(s+36*t/(t+38))}function x(t){var e,n,s,i,r,o,a,l,h,u,p,f=[],m=t.length,v=0,b=128,w=72;for((n=t.lastIndexOf("-"))<0&&(n=0),s=0;s<n;++s)t.charCodeAt(s)>=128&&g("not-basic"),f.push(t.charCodeAt(s));for(i=n>0?n+1:0;i<m;){for(r=v,o=1,a=36;i>=m&&g("invalid-input"),((l=(p=t.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||l>d((c-v)/o))&&g("overflow"),v+=l*o,!(l<(h=a<=w?1:a>=w+26?26:a-w));a+=36)o>d(c/(u=36-h))&&g("overflow"),o*=u;w=k(v-r,e=f.length+1,0==r),d(v/e)>c-b&&g("overflow"),b+=d(v/e),v%=e,f.splice(v++,0,b)}return y(f)}function C(t){var e,n,s,i,r,o,a,l,h,u,p,m,v,y,x,C=[];for(m=(t=b(t)).length,e=128,n=0,r=72,o=0;o<m;++o)(p=t[o])<128&&C.push(f(p));for(s=i=C.length,i&&C.push("-");s<m;){for(a=c,o=0;o<m;++o)(p=t[o])>=e&&p<a&&(a=p);for(a-e>d((c-n)/(v=s+1))&&g("overflow"),n+=(a-e)*v,e=a,o=0;o<m;++o)if((p=t[o])<e&&++n>c&&g("overflow"),p==e){for(l=n,h=36;!(l<(u=h<=r?1:h>=r+26?26:h-r));h+=36)x=l-u,y=36-u,C.push(f(w(u+x%y,0))),l=d(x/y);C.push(f(w(l,0))),r=k(n,v,s==i),n=0,++s}++n,++e}return C.join("")}a={version:"1.4.1",ucs2:{decode:b,encode:y},decode:x,encode:C,toASCII:function(t){return v(t,(function(t){return h.test(t)?"xn--"+C(t):t}))},toUnicode:function(t){return v(t,(function(t){return l.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(67)(t),n(68))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},function(t,e,n){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},function(t,e,n){"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},function(t,e,n){"use strict";n.r(e);var s={};n.r(s),n.d(s,"name",(function(){return Df})),n.d(s,"template",(function(){return Lf})),n.d(s,"default",(function(){return Ff})),n.d(s,"dependencies",(function(){return qf})),n.d(s,"shadowOptions",(function(){return Nf})),n.d(s,"register",(function(){return Bf}));var i={};n.r(i),n.d(i,"MarkdownPreview",(function(){return Kf}));var r={};function o(t){return"object"==typeof t&&null!==t||"function"==typeof t}function a(t){return null==t}n.r(r),n.d(r,"name",(function(){return Gf})),n.d(r,"template",(function(){return Qf})),n.d(r,"default",(function(){return Zf})),n.d(r,"dependencies",(function(){return Jf})),n.d(r,"shadowOptions",(function(){return Yf})),n.d(r,"register",(function(){return tg}));const c=new WeakMap;function l(t,e,n,s,i){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${i}, but got: ${Object.prototype.toString.call(s)} (${String(s)})`)}function h(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return""+t}}function u(t,e,n){let s=c.get(t);if(void 0===s){if(!n)return;s=new Map,c.set(t,s)}let i=s.get(e);if(void 0===i){if(!n)return;i=new Map,s.set(e,i)}return i}function p(t,e,n){const s=u(e,n,!1);return void 0!==s&&s.has(t)}function d(t,e,n){const s=u(e,n,!1);if(void 0!==s)return s.get(t)}function f(t,e,n,s){u(n,s,!0).set(t,e)}function g(t,e){const n=[],s=u(t,e,!1);if(void 0===s)return n;const i=s.keys();let r=0;for(const t of i)n[r]=t,++r;return n}function m(t,e){return function(n,s){if(!o(n))throw l("@metadata",[t,e,n,s],"target",n,"Object or Function");f(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(s))}}function v(t,e,n,s){if(void 0!==n){if(!Array.isArray(t))throw l("Metadata.decorate",[t,e,n,s],"decorators",t,"Array");if(!o(e))throw l("Metadata.decorate",[t,e,n,s],"target",e,"Object or Function");if(!o(s)&&!a(s))throw l("Metadata.decorate",[t,e,n,s],"attributes",s,"Object, Function, null, or undefined");return null===s&&(s=void 0),function(t,e,n,s){for(let i=t.length-1;i>=0;--i){const r=(0,t[i])(e,n,s);if(!a(r)){if(!o(r))throw l("DecorateProperty",[t,e,n,s],"decorated",r,"Object, Function, null, or undefined");s=r}}return s}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return""+t}}(n),s)}if(!Array.isArray(t))throw l("Metadata.decorate",[t,e,n,s],"decorators",t,"Array");if("function"!=typeof e)throw l("Metadata.decorate",[t,e,n,s],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const s=(0,t[n])(e);if(!a(s)){if("function"!=typeof s)throw l("DecorateConstructor",[t,e],"decorated",s,"Function, null, or undefined");e=s}}return e}(t,e)}function b(t,e,n,s){if(!o(n))throw l("Metadata.define",[t,e,n,s],"target",n,"Object or Function");return f(t,e,n,h(s))}function y(t,e,n){if(!o(e))throw l("Metadata.has",[t,e,n],"target",e,"Object or Function");return function t(e,n,s){if(p(e,n,s))return!0;const i=Object.getPrototypeOf(n);return null!==i&&t(e,i,s)}(t,e,h(n))}function w(t,e,n){if(!o(e))throw l("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return p(t,e,h(n))}function k(t,e,n){if(!o(e))throw l("Metadata.get",[t,e,n],"target",e,"Object or Function");return function t(e,n,s){if(p(e,n,s))return d(e,n,s);const i=Object.getPrototypeOf(n);return null!==i?t(e,i,s):void 0}(t,e,h(n))}function x(t,e,n){if(!o(e))throw l("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return d(t,e,h(n))}function C(t,e){if(!o(t))throw l("Metadata.getKeys",[t,e],"target",t,"Object or Function");return function t(e,n){const s=g(e,n),i=Object.getPrototypeOf(e);if(null===i)return s;const r=t(i,n),o=s.length;if(0===o)return r;const a=r.length;if(0===a)return s;const c=new Set,l=[];let h,u=0;for(let t=0;t<o;++t)h=s[t],c.has(h)||(c.add(h),l[u]=h,++u);for(let t=0;t<a;++t)h=r[t],c.has(h)||(c.add(h),l[u]=h,++u);return l}(t,h(e))}function S(t,e){if(!o(t))throw l("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return g(t,h(e))}function A(t,e,n){if(!o(e))throw l("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const s=u(t,n,!1);return void 0!==s&&s.delete(e)}(e,t,h(n))}const T={define:b,has:y,hasOwn:w,get:k,getOwn:x,getKeys:C,getOwnKeys:S,delete:A};function E(t,e,n,s,i){if(!Reflect.defineProperty(t,e,{writable:s,enumerable:!1,configurable:i,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}function _(t,e,n){E(t,"[[$au]]",c,e,n),E(t,"metadata",m,e,n),E(t,"decorate",v,e,n),E(t,"defineMetadata",b,e,n),E(t,"hasMetadata",y,e,n),E(t,"hasOwnMetadata",w,e,n),E(t,"getMetadata",k,e,n),E(t,"getOwnMetadata",x,e,n),E(t,"getMetadataKeys",C,e,n),E(t,"getOwnMetadataKeys",S,e,n),E(t,"deleteMetadata",A,e,n)}const I=Object.freeze([]),R=Object.freeze({});function O(){}const P={};function $(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=P[t];if(void 0!==e)return e;const n=t.length;if(0===n)return P[t]=!1;let s=0;for(let e=0;e<n;++e)if(s=t.charCodeAt(e),0===e&&48===s&&n>1||s<48||s>57)return P[t]=!1;return P[t]=!0}default:return!1}}function j(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function V(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const D=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Object.create(null),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const s=t.length;if(0===s)return t;let i,r=!1,o="",a="",c=0,l=t.charAt(0),h=n(l);for(let u=0;u<s;++u)i=c,a=l,c=h,l=t.charAt(u+1),h=n(l),0===c?o.length>0&&(r=!0):(!r&&o.length>0&&2===c&&(r=3===i||3===h),o+=e(a,r),r=!1);return o}}(),L=function(){const t=Object.create(null);function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let s=t[n];return void 0===s&&(s=t[n]=D(n,e)),s}}(),F=function(){const t=Object.create(null);return function(e){let n=t[e];return void 0===n&&(n=L(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),q=function(){const t=Object.create(null);function e(t,e){return e?"-"+t.toLowerCase():t.toLowerCase()}return function(n){let s=t[n];return void 0===s&&(s=t[n]=D(n,e)),s}}();function N(t){const{length:e}=t,n=Array(e);for(let s=0;s<e;++s)n[s]=t[s];return n}const M={};function B(t){return void 0===M[t]&&(M[t]=0),++M[t]}function U(t,e){return t-e}function z(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function H(...t){const e=[];let n=0;const s=t.length;let i,r=0;for(let o=0;o<s;++o)if(i=t[o],void 0!==i){r=i.length;for(let t=0;t<r;++t)e[n++]=i[t]}return e}function W(...t){const e=t.length;let n;for(let s=0;s<e;++s)if(n=t[s],void 0!==n)return n;throw new Error("No default value found")}const K=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let s=t,i=0,r=void 0;return function(o){if(r=n.get(o),void 0===r)for(n.set(o,r=[s=o]),i=0;(s=e(s))!==t;)r[++i]=s;return r}}();function G(...t){return Object.assign(Object.create(null),...t)}const Q=function(){const t=new WeakMap;let e=!1,n="",s=0;return function(i){return e=t.get(i),void 0===e&&(n=i.toString(),s=n.length,e=s>=29&&s<=100&&125===n.charCodeAt(s-1)&&n.charCodeAt(s-2)<=32&&93===n.charCodeAt(s-3)&&101===n.charCodeAt(s-4)&&100===n.charCodeAt(s-5)&&111===n.charCodeAt(s-6)&&99===n.charCodeAt(s-7)&&32===n.charCodeAt(s-8)&&101===n.charCodeAt(s-9)&&118===n.charCodeAt(s-10)&&105===n.charCodeAt(s-11)&&116===n.charCodeAt(s-12)&&97===n.charCodeAt(s-13)&&110===n.charCodeAt(s-14)&&88===n.charCodeAt(s-15),t.set(i,e)),e}}();function Z(t,e){return t instanceof Promise?t.then(e):e(t)}function J(...t){let e=void 0,n=void 0,s=void 0;for(let i=0,r=t.length;i<r;++i)e=t[i],(e=t[i])instanceof Promise&&(void 0===n?n=e:void 0===s?s=[n,e]:s.push(e));return void 0===s?n:Promise.all(s)}const Y={name:"au:annotation",appendTo(t,e){const n=T.getOwn(Y.name,t);void 0===n?T.define(Y.name,[e],t):n.push(e)},set(t,e,n){T.define(Y.keyFor(e),n,t)},get:(t,e)=>T.getOwn(Y.keyFor(e),t),getKeys(t){let e=T.getOwn(Y.name,t);return void 0===e&&T.define(Y.name,e=[],t),e},isKey:t=>t.startsWith(Y.name),keyFor:(t,e)=>void 0===e?`${Y.name}:${t}`:`${Y.name}:${t}:${e}`},X={name:"au:resource",appendTo(t,e){const n=T.getOwn(X.name,t);void 0===n?T.define(X.name,[e],t):n.push(e)},has:t=>T.hasOwn(X.name,t),getAll(t){const e=T.getOwn(X.name,t);return void 0===e?I:e.map(e=>T.getOwn(e,t))},getKeys(t){let e=T.getOwn(X.name,t);return void 0===e&&T.define(X.name,e=[],t),e},isKey:t=>t.startsWith(X.name),keyFor:(t,e)=>void 0===e?`${X.name}:${t}`:`${X.name}:${t}:${e}`},tt={annotation:Y,resource:X},et=Object.prototype.hasOwnProperty;function nt(t,e,n,s){let i=T.getOwn(tt.annotation.keyFor(t),n);return void 0===i?(i=e[t],void 0===i?(i=n[t],void 0!==i&&et.call(n,t)?i:s()):i):i}function st(t,e,n){let s=T.getOwn(tt.annotation.keyFor(t),e);return void 0===s?(s=e[t],void 0!==s&&et.call(e,t)?s:n()):s}function it(t,e,n){const s=e[t];return void 0===s?n():s}!function(t,e=!0,n=!1,s=!0,i=!0){if(function(t){return"[[$au]]"in t}(t)){if(t["[[$au]]"]===c)return;throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)+"..."}`})).join("\n\n");throw new Error("Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n"+t)}n&&_(t,s,i)}else _(t,s,i)}(Reflect);class rt{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,It(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:s}=this;return this.container=this.key=void 0,n.registerResolver(s,new wt(s,t,e))}}function ot(t){const e=t.slice(),n=Object.keys(t),s=n.length;let i;for(let r=0;r<s;++r)i=n[r],$(i)||(e[i]=t[i]);return e}const at={none(t){throw Error(t.toString()+" not registered, did you forget to add @singleton()?")},singleton:t=>new wt(t,1,t),transient:t=>new wt(t,2,t)};class ct{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,n;return void 0===t||t===ct.DEFAULT?ct.DEFAULT:new ct(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(n=t.defaultResolver)&&void 0!==n?n:at.singleton)}}ct.DEFAULT=ct.from({});const lt={createContainer:t=>new Tt(null,ct.from(t)),getDesignParamtypes:t=>T.getOwn("design:paramtypes",t),getAnnotationParamtypes(t){const e=tt.annotation.keyFor("di:paramtypes");return T.getOwn(e,t)},getOrCreateAnnotationParamTypes(t){const e=tt.annotation.keyFor("di:paramtypes");let n=T.getOwn(e,t);return void 0===n&&(T.define(e,n=[],t),tt.annotation.appendTo(t,e)),n},getDependencies(t){const e=tt.annotation.keyFor("di:dependencies");let n=T.getOwn(e,t);if(void 0===n){const s=t.inject;if(void 0===s){const e=lt.getDesignParamtypes(t),s=lt.getAnnotationParamtypes(t);if(void 0===e)if(void 0===s){const e=Object.getPrototypeOf(t);n="function"==typeof e&&e!==Function.prototype?ot(lt.getDependencies(e)):[]}else n=ot(s);else if(void 0===s)n=ot(e);else{n=ot(e);let t,i=s.length;for(let e=0;e<i;++e)t=s[e],void 0!==t&&(n[e]=t);const r=Object.keys(s);let o;i=r.length;for(let t=0;t<i;++t)o=r[t],$(o)||(n[o]=s[o])}}else n=ot(s);T.define(e,n,t),tt.annotation.appendTo(t,e)}return n},createInterface(t){const e=function(t,n,s){if(null==t||void 0!==new.target)throw new Error(`No registration for interface: '${e.friendlyName}'`);return lt.getOrCreateAnnotationParamTypes(t)[s]=e,t};return e.$isInterface=!0,e.friendlyName=null==t?"(anonymous)":t,e.noDefault=function(){return e},e.withDefault=function(t){return e.withDefault=function(){throw new Error("You can only define one default implementation for an interface.")},e.register=function(n,s){return t(new rt(n,null!=s?s:e))},e},e.toString=function(){return`InterfaceSymbol<${e.friendlyName}>`},e},inject:(...t)=>function(e,n,s){if("number"==typeof s){const n=lt.getOrCreateAnnotationParamTypes(e),i=t[0];void 0!==i&&(n[s]=i)}else if(n){const s=lt.getOrCreateAnnotationParamTypes(e.constructor),i=t[0];void 0!==i&&(s[n]=i)}else if(s){const e=s.value,n=lt.getOrCreateAnnotationParamTypes(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}else{const n=lt.getOrCreateAnnotationParamTypes(e);let s;for(let e=0;e<t.length;++e)s=t[e],void 0!==s&&(n[e]=s)}},transient:t=>(t.register=function(e){return Rt.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=dt)=>(t.register=function(e){return Rt.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},ht=lt.createInterface("IContainer").noDefault(),ut=ht;function pt(t){return function(e){const n=function(t,e,s){lt.inject(n)(t,e,s)};return n.$isResolver=!0,n.resolve=function(n,s){return t(e,n,s)},n}}lt.inject;const dt={scoped:!1};const ft=(gt=(t,e,n,s)=>n.getAll(t,s),function(t,e){e=!!e;const n=function(t,e,s){lt.inject(n)(t,e,s)};return n.$isResolver=!0,n.resolve=function(n,s){return gt(t,n,s,e)},n});var gt;pt((t,e,n)=>()=>n.get(t));const mt=pt((t,e,n)=>n.has(t,!0)?n.get(t):void 0);function vt(t,e,n){lt.inject(vt)(t,e,n)}vt.$isResolver=!0,vt.resolve=()=>{};pt((t,e,n)=>{const s=bt(t,e),i=new Ot(String(t));return i.prepare(s),n.registerResolver(t,i,!0),s}),pt((t,e,n)=>bt(t,e));function bt(t,e){return e.getFactory(t).construct(e)}var yt;!function(t){t[t.instance=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.callback=3]="callback",t[t.array=4]="array",t[t.alias=5]="alias"}(yt||(yt={}));class wt{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error("Cyclic dependency found: "+this.state.name);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(t){var e,n,s;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(s=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==s?s:null;default:return null}}}class kt{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map((function(e){return t.get(e)}))):new this.Type(...this.dependencies.map((function(e){return t.get(e)})),...e),null==this.transformers?n:this.transformers.reduce((function(t,e){return e(t)}),n)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const xt={$isResolver:!0,resolve:(t,e)=>e};function Ct(t){return"function"==typeof t.register}function St(t){return function(t){return Ct(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}const At=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);tt.annotation.keyFor("di:factory");class Tt{constructor(t,e){this.parent=t,this.config=e,this.registerDepth=0,this.disposableResolvers=new Set,null===t?(this.root=this,this.resolvers=new Map,this.factories=new Map,this.resourceResolvers=Object.create(null)):(this.root=t.root,this.resolvers=new Map,this.factories=t.factories,e.inheritParentResources?this.resourceResolvers=Object.assign(Object.create(null),t.resourceResolvers,this.root.resourceResolvers):this.resourceResolvers=Object.assign(Object.create(null),this.root.resourceResolvers)),this.resolvers.set(ht,xt)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.registerDepth)throw new Error(`Unable to autoregister dependency: [${t.map(String)}]`);let e,n,s,i,r;for(let a=0,c=t.length;a<c;++a)if(e=t[a],o(e))if(Ct(e))e.register(this);else if(tt.resource.has(e)){const t=tt.resource.getAll(e);if(1===t.length)t[0].register(this);else{const e=t.length;for(let n=0;n<e;++n)t[n].register(this)}}else if(void 0!==e.prototype)Rt.singleton(e,e).register(this);else for(n=Object.keys(e),i=0,r=n.length;i<r;++i)s=e[n[i]],o(s)&&(Ct(s)?s.register(this):this.register(s));return--this.registerDepth,this}registerResolver(t,e,n=!1){Pt(t);const s=this.resolvers,i=s.get(t);return null==i?(s.set(t,e),function(t){return"string"==typeof t&&t.indexOf(":")>0}(t)&&(this.resourceResolvers[t]=e)):i instanceof wt&&4===i.strategy?i.state.push(e):s.set(t,new wt(t,4,[i,e])),n&&this.disposableResolvers.add(e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Pt(t),void 0!==t.resolve)return t;let n,s=this;for(;null!=s;){if(n=s.resolvers.get(t),null!=n)return n;if(null==s.parent){const n=St(t)?this:s;return e?this.jitRegister(t,n):null}s=s.parent}return null}has(t,e=!1){return!!this.resolvers.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Pt(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.resolvers.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const s=St(t)?this:n;return e=this.jitRegister(t,s),e.resolve(n,this)}n=n.parent}throw new Error("Unable to resolve key: "+t)}getAll(t,e=!1){Pt(t);const n=this;let s,i=n;if(e){let e=I;for(;null!=i;)s=i.resolvers.get(t),null!=s&&(e=e.concat($t(s,i,n))),i=i.parent;return e}for(;null!=i;){if(s=i.resolvers.get(t),null!=s)return $t(s,i,n);if(i=i.parent,null==i)return I}return I}getFactory(t){let e=this.factories.get(t);if(void 0===e){if(Q(t))throw new Error(t.name+" is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.");this.factories.set(t,e=new kt(t,lt.getDependencies(t)))}return e}registerFactory(t,e){this.factories.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===ct.DEFAULT?new Tt(this,this.config):new Tt(this,ct.from({...this.config,inheritParentResources:!1})):new Tt(this,ct.from(null!=t?t:this.config))}disposeResolvers(){var t;const e=Array.from(this.disposableResolvers);for(;e.length>0;)null===(t=e.pop())||void 0===t||t.dispose()}find(t,e){const n=t.keyFrom(e);let s=this.resourceResolvers[n];if(void 0===s&&(s=this.root.resourceResolvers[n],void 0===s))return null;if(null===s)return null;if("function"==typeof s.getFactory){const e=s.getFactory(this);if(null==e)return null;const n=T.getOwn(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){var n,s;const i=t.keyFrom(e);let r=this.resourceResolvers[i];return void 0===r?(r=this.root.resourceResolvers[i],void 0===r?null:null!==(n=r.resolve(this.root,this))&&void 0!==n?n:null):null!==(s=r.resolve(this,this))&&void 0!==s?s:null}dispose(){this.disposeResolvers(),this.resolvers.clear()}jitRegister(t,e){if("function"!=typeof t)throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this resource?`);if(At.has(t.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${t.name}. Did you forget to add @inject(Key)`);if(Ct(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.resolvers.get(t);if(null!=n)return n;throw new Error("Invalid resolver returned from the static register method")}return n}if(tt.resource.has(t)){const n=tt.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let s=0;s<t;++s)n[s].register(e)}const s=e.resolvers.get(t);if(null!=s)return s;throw new Error("Invalid resolver returned from the static register method")}if(t.$isInterface)throw new Error("Attempted to jitRegister an interface: "+t.friendlyName);{const n=this.config.defaultResolver(t,e);return e.resolvers.set(t,n),n}}}class Et{constructor(t,e){this.key=t,this.params=e}register(t){if(t.has(this.key,!0)){t.get(this.key).register(t,...this.params)}else t.register(...this.params.filter(t=>"object"==typeof t))}}const _t=new WeakMap;function It(t){return function(e,n,s){if(_t.has(s))return _t.get(s);const i=t(e,n,s);return _t.set(s,i),i}}const Rt={instance:(t,e)=>new wt(t,0,e),singleton:(t,e)=>new wt(t,1,e),transient:(t,e)=>new wt(t,2,e),callback:(t,e)=>new wt(t,3,e),cachedCallback:(t,e)=>new wt(t,3,It(e)),aliasTo:(t,e)=>new wt(e,5,t),defer:(t,...e)=>new Et(t,e)};class Ot{constructor(t){this.friendlyName=t,this.instance=null}prepare(t){this.instance=t}get $isResolver(){return!0}resolve(){if(null==this.instance)throw new Error(`Cannot call resolve ${this.friendlyName} before calling prepare or after calling dispose.`);return this.instance}dispose(){this.instance=null}}function Pt(t){if(null==t)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function $t(t,e,n){if(t instanceof wt&&4===t.strategy){const s=t.state;let i=s.length;const r=new Array(i);for(;i--;)r[i]=s[i].resolve(e,n);return r}return[t.resolve(e,n)]}const jt=new Map;function Vt(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class Dt{constructor(t,e={}){var n,s,i,r,o,a,c,l,h,u,p,d,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(s=null===(n=t.clearInterval)||void 0===n?void 0:n.bind(t))&&void 0!==s?s:Vt("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(i=t.clearTimeout)||void 0===i?void 0:i.bind(t))&&void 0!==r?r:Vt("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:Vt("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(l=null===(c=t.setInterval)||void 0===c?void 0:c.bind(t))&&void 0!==l?l:Vt("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:Vt("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(d=null===(p=t.performance)||void 0===p?void 0:p.now)||void 0===d?void 0:d.bind(t.performance))&&void 0!==f?f:Vt("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.macroTaskQueue=new Ft(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let n=jt.get(t);return void 0===n&&jt.set(t,n=new Dt(t,e)),n}static set(t,e){jt.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.macroTaskQueue.flush())}}function Lt(t){return t.persistent}class Ft{constructor(t,e,n){this.platform=t,this.$request=e,this.$cancel=n,this.processing=[],this.suspenderTask=void 0,this.pendingAsyncCount=0,this.pending=[],this.delayed=[],this.flushRequested=!1,this.yieldPromise=void 0,this.taskPool=[],this.taskPoolSize=0,this.lastRequest=0,this.lastFlush=0,this.requestFlush=()=>{this.tracer.enabled&&this.tracer.enter(this,"requestFlush"),this.flushRequested||(this.flushRequested=!0,this.lastRequest=this.platform.performanceNow(),this.$request()),this.tracer.enabled&&this.tracer.leave(this,"requestFlush")},this.tracer=new zt(t.console)}get isEmpty(){return 0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get hasNoMoreFiniteWork(){return 0===this.pendingAsyncCount&&this.processing.every(Lt)&&this.pending.every(Lt)&&this.delayed.every(Lt)}flush(t=this.platform.performanceNow()){if(this.tracer.enabled&&this.tracer.enter(this,"flush"),this.flushRequested=!1,this.lastFlush=t,void 0===this.suspenderTask){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.suspenderTask=e,this.requestFlush(),void(this.tracer.enabled&&this.tracer.leave(this,"flush early async"));++this.pendingAsyncCount}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.pendingAsyncCount>0)&&this.requestFlush(),void 0!==this.yieldPromise&&this.hasNoMoreFiniteWork){const t=this.yieldPromise;this.yieldPromise=void 0,t.resolve()}}else this.requestFlush();this.tracer.enabled&&this.tracer.leave(this,"flush full")}cancel(){this.tracer.enabled&&this.tracer.enter(this,"cancel"),this.flushRequested&&(this.$cancel(),this.flushRequested=!1),this.tracer.enabled&&this.tracer.leave(this,"cancel")}async yield(){this.tracer.enabled&&this.tracer.enter(this,"yield"),this.isEmpty?this.tracer.enabled&&this.tracer.leave(this,"yield empty"):(void 0===this.yieldPromise&&(this.tracer.enabled&&this.tracer.trace(this,"yield - creating promise"),this.yieldPromise=Qt()),await this.yieldPromise,this.tracer.enabled&&this.tracer.leave(this,"yield task"))}queueTask(t,e){this.tracer.enabled&&this.tracer.enter(this,"queueTask");const{delay:n,preempt:s,persistent:i,reusable:r,suspend:o}={...Ht,...e};if(s){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(i)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.requestFlush();const a=this.platform.performanceNow();let c;if(r){const e=this.taskPool,l=this.taskPoolSize-1;l>=0?(c=e[l],e[l]=void 0,this.taskPoolSize=l,c.reuse(a,n,s,i,o,t)):c=new Ut(this.tracer,this,a,a+n,s,i,o,r,t)}else c=new Ut(this.tracer,this,a,a+n,s,i,o,r,t);return s?this.processing[this.processing.length]=c:0===n?this.pending[this.pending.length]=c:this.delayed[this.delayed.length]=c,this.tracer.enabled&&this.tracer.leave(this,"queueTask"),c}remove(t){this.tracer.enabled&&this.tracer.enter(this,"remove");let e=this.processing.indexOf(t);if(e>-1)return this.processing.splice(e,1),void(this.tracer.enabled&&this.tracer.leave(this,"remove processing"));if(e=this.pending.indexOf(t),e>-1)return this.pending.splice(e,1),void(this.tracer.enabled&&this.tracer.leave(this,"remove pending"));if(e=this.delayed.indexOf(t),e>-1)return this.delayed.splice(e,1),void(this.tracer.enabled&&this.tracer.leave(this,"remove delayed"));throw this.tracer.enabled&&this.tracer.leave(this,"remove error"),new Error(`Task #${t.id} could not be found`)}returnToPool(t){this.tracer.enabled&&this.tracer.trace(this,"returnToPool"),this.taskPool[this.taskPoolSize++]=t}resetPersistentTask(t){this.tracer.enabled&&this.tracer.enter(this,"resetPersistentTask"),t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t,this.tracer.enabled&&this.tracer.leave(this,"resetPersistentTask")}completeAsyncTask(t){var e;if(this.tracer.enabled&&this.tracer.enter(this,"completeAsyncTask"),!0===t.suspend){if(this.suspenderTask!==t)throw this.tracer.enabled&&this.tracer.leave(this,"completeAsyncTask error"),new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.suspenderTask)||void 0===e?void 0:e.id}, task=${t.id}`);this.suspenderTask=void 0}else--this.pendingAsyncCount;if(void 0!==this.yieldPromise&&this.hasNoMoreFiniteWork){const t=this.yieldPromise;this.yieldPromise=void 0,t.resolve()}this.isEmpty&&this.cancel(),this.tracer.enabled&&this.tracer.leave(this,"completeAsyncTask")}}class qt extends Error{constructor(t){super("Task was canceled."),this.task=t}}let Nt=0;var Mt,Bt;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(Mt||(Mt={}));class Ut{constructor(t,e,n,s,i,r,o,a,c){this.tracer=t,this.taskQueue=e,this.createdTime=n,this.queueTime=s,this.preempt=i,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=c,this.id=++Nt,this.resolve=void 0,this.reject=void 0,this._result=void 0,this._status=0}get result(){const t=this._result;if(void 0===t)switch(this._status){case 0:{const t=this._result=Qt();return this.resolve=t.resolve,this.reject=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this._result=Promise.resolve();case 3:return this._result=Promise.reject(new qt(this))}return t}get status(){return this._status}run(t=this.taskQueue.platform.performanceNow()){if(this.tracer.enabled&&this.tracer.enter(this,"run"),0!==this._status)throw this.tracer.enabled&&this.tracer.leave(this,"run error"),new Error(`Cannot run task in ${this._status} state`);const{persistent:e,reusable:n,taskQueue:s,callback:i,resolve:r,reject:o,createdTime:a}=this;this._status=1;try{const c=i(t-a);c instanceof Promise?c.then(t=>{this.persistent?s.resetPersistentTask(this):(this._status=e?3:2,this.dispose()),s.completeAsyncTask(this),this.tracer.enabled&&this.tracer.leave(this,"run async then"),void 0!==r&&r(t),!this.persistent&&n&&s.returnToPool(this)}).catch(t=>{if(this.persistent||this.dispose(),s.completeAsyncTask(this),this.tracer.enabled&&this.tracer.leave(this,"run async catch"),void 0===o)throw t;o(t)}):(this.persistent?s.resetPersistentTask(this):(this._status=e?3:2,this.dispose()),this.tracer.enabled&&this.tracer.leave(this,"run sync success"),void 0!==r&&r(c),!this.persistent&&n&&s.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),this.tracer.enabled&&this.tracer.leave(this,"run sync error"),void 0===o)throw t;o(t)}}cancel(){if(this.tracer.enabled&&this.tracer.enter(this,"cancel"),0===this._status){const t=this.taskQueue,e=this.reusable,n=this.reject;return t.remove(this),t.isEmpty&&t.cancel(),this._status=3,this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new qt(this)),this.tracer.enabled&&this.tracer.leave(this,"cancel true =pending"),!0}return 1===this._status&&this.persistent?(this.persistent=!1,this.tracer.enabled&&this.tracer.leave(this,"cancel true =running+persistent"),!0):(this.tracer.enabled&&this.tracer.leave(this,"cancel false"),!1)}reset(t){this.tracer.enabled&&this.tracer.enter(this,"reset");const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this._status=0,this.resolve=void 0,this.reject=void 0,this._result=void 0,this.tracer.enabled&&this.tracer.leave(this,"reset")}reuse(t,e,n,s,i,r){this.tracer.enabled&&this.tracer.enter(this,"reuse"),this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=s,this.suspend=i,this.callback=r,this._status=0,this.tracer.enabled&&this.tracer.leave(this,"reuse")}dispose(){this.tracer.enabled&&this.tracer.trace(this,"dispose"),this.callback=void 0,this.resolve=void 0,this.reject=void 0,this._result=void 0}}class zt{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log("  ".repeat(this.depth++)+"> ",t,e)}leave(t,e){this.log("  ".repeat(--this.depth)+"< ",t,e)}trace(t,e){this.log("  ".repeat(this.depth)+"- ",t,e)}log(t,e,n){if(e instanceof Ft){const s=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.suspenderTask}`;this.console.log(`${t}[Q.${n}] ${s}`)}else{const s=e.id,i=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,c=e.persistent,l=e.suspend,h=`id=${s} created=${i} queue=${r} preempt=${o} persistent=${c} reusable=${a} status=${function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e._status)} suspend=${l}`;this.console.log(`${t}[T.${n}] ${h}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(Bt||(Bt={}));const Ht={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let Wt,Kt;function Gt(t,e){Wt=t,Kt=e}function Qt(){const t=new Promise(Gt);return t.resolve=Wt,t.reject=Kt,t}var Zt,Jt,Yt=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Xt=function(t,e){return function(n,s){e(n,s,t)}};!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(Zt||(Zt={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Jt||(Jt={}));const te=lt.createInterface("ILogConfig").withDefault(t=>t.instance(new ae(0,3))),ee=lt.createInterface("ISink").noDefault(),ne=lt.createInterface("ILogEventFactory").withDefault(t=>t.singleton(ue)),se=lt.createInterface("ILogger").withDefault(t=>t.singleton(de)),ie=lt.createInterface("ILogScope").noDefault(),re=Object.freeze({key:tt.annotation.keyFor("logger-sink-handles"),define(t,e){return T.define(this.key,e.handles,t.prototype),t},getHandles(t){return T.get(this.key,t)}});const oe=G({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class ae{constructor(t,e){this.colorOptions=t,this.level=e}}const ce=function(){const t=[G({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),G({TRC:oe.grey("TRC"),DBG:oe.grey("DBG"),INF:oe.white("INF"),WRN:oe.yellow("WRN"),ERR:oe.red("ERR"),FTL:oe.red("FTL"),QQQ:oe.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function le(t,e){return 0===e?new Date(t).toISOString():oe.grey(new Date(t).toISOString())}class he{constructor(t,e,n,s,i,r){this.severity=t,this.message=e,this.optionalParams=n,this.scope=s,this.colorOptions=i,this.timestamp=r}toString(){const{severity:t,message:e,scope:n,colorOptions:s,timestamp:i}=this;return 0===n.length?`${le(i,s)} [${ce(t,s)}] ${e}`:`${le(i,s)} [${ce(t,s)} ${function(t,e){return 0===e?t.join("."):t.map(oe.cyan).join(".")}(n,s)}] ${e}`}}let ue=class{constructor(t){this.config=t}createLogEvent(t,e,n,s){return new he(e,n,s,t.scope,this.config.colorOptions,Date.now())}};ue=Yt([Xt(0,te)],ue);class pe{constructor(t){this.handleEvent=function(e){const n=e.optionalParams;if(void 0===n||0===n.length)switch(e.severity){case 0:case 1:return t.debug(e.toString());case 2:return t.info(e.toString());case 3:return t.warn(e.toString());case 4:case 5:return t.error(e.toString())}else switch(e.severity){case 0:case 1:return t.debug(e.toString(),...n);case 2:return t.info(e.toString(),...n);case 3:return t.warn(e.toString(),...n);case 4:case 5:return t.error(e.toString(),...n)}}}}let de=class t{constructor(t,e,n,s=[],i=null){var r,o,a,c,l,h;let u,p,d,f,g,m;if(this.config=t,this.factory=e,this.scope=s,this.scopedLoggers=Object.create(null),null===i){this.root=this,this.parent=this,u=this.traceSinks=[],p=this.debugSinks=[],d=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],m=this.fatalSinks=[];for(const t of n){const e=re.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&p.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&d.push(t),(null===(c=null==e?void 0:e.includes(3))||void 0===c||c)&&f.push(t),(null===(l=null==e?void 0:e.includes(4))||void 0===l||l)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&m.push(t)}}else this.root=i.root,this.parent=i,u=this.traceSinks=i.traceSinks,p=this.debugSinks=i.debugSinks,d=this.infoSinks=i.infoSinks,f=this.warnSinks=i.warnSinks,g=this.errorSinks=i.errorSinks,m=this.fatalSinks=i.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const n=this.scopedLoggers;let s=n[e];return void 0===s&&(s=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),s}emit(t,e,n,s){const i="function"==typeof n?n():n,r=this.factory.createLogEvent(this,e,i,s);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(r)}};Yt([z],de.prototype,"trace",null),Yt([z],de.prototype,"debug",null),Yt([z],de.prototype,"info",null),Yt([z],de.prototype,"warn",null),Yt([z],de.prototype,"error",null),Yt([z],de.prototype,"fatal",null),de=Yt([Xt(0,te),Xt(1,ne),Xt(2,ft(ee)),Xt(3,mt(ie)),Xt(4,vt)],de);G({create:({$console:t,level:e=3,colorOptions:n=0,sinks:s=[]}={})=>G({register(i){i.register(Rt.instance(te,new ae(n,e))),null!=t&&i.register(Rt.instance(ee,new pe(t)));for(const t of s)i.register(Rt.singleton(ee,t));return i}})}),lt.createInterface().withDefault(t=>t.singleton(me));function fe(t){return t}class ge{constructor(t){this.$transform=t,this.promiseCache=new Map,this.objectCache=new Map}transform(t){if(t instanceof Promise)return this.transformPromise(t);if("object"==typeof t&&null!==t)return this.transformObject(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}transformPromise(t){if(this.promiseCache.has(t))return this.promiseCache.get(t);const e=t.then(t=>this.transformObject(t));return this.promiseCache.set(t,e),e.then(e=>{this.promiseCache.set(t,e)}),e}transformObject(t){if(this.objectCache.has(t))return this.objectCache.get(t);const e=this.$transform(this.analyze(t));return this.objectCache.set(t,e),e instanceof Promise&&e.then(e=>{this.objectCache.set(t,e)}),e}analyze(t){let e,n,s,i;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;n="function"==typeof e.register,s=!1,i=I;break;case"function":n="function"==typeof e.register,s=void 0!==e.prototype,i=tt.resource.getAll(e);break;default:continue}r.push(new be(o,e,n,s,i))}return new ve(t,r)}}class me{constructor(){this.transformers=new Map}load(t,e=fe){const n=this.transformers;let s=n.get(e);return void 0===s&&n.set(e,s=new ge(e)),s.transform(t)}dispose(){this.transformers.clear()}}class ve{constructor(t,e){this.raw=t,this.items=e}}class be{constructor(t,e,n,s,i){this.key=t,this.value=e,this.isRegistry=n,this.isConstructable=s,this.definitions=i}}class ye{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}lt.createInterface("IEventAggregator").withDefault(t=>t.singleton(we));class we{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if("string"==typeof t){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let s=n.length;for(;s-- >0;)n[s](e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)e[n].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let n,s;return"string"==typeof t?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,s=this.eventLookup[t]):(n=new ye(t,e),s=this.messageHandlers),s.push(n),{dispose(){const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,s){n.dispose(),e(t,s)}));return n}}const ke=lt.createInterface("IPlatform").noDefault(),xe=new Map;function Ce(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class Se extends Dt{constructor(t,e={}){var n,s,i,r,o,a;super(t,e),this.domReadRequested=!1,this.domReadHandle=-1,this.domWriteRequested=!1,this.domWriteHandle=-1,this.Node="Node"in e?e.Node:t.Node,this.Element="Element"in e?e.Element:t.Element,this.HTMLElement="HTMLElement"in e?e.HTMLElement:t.HTMLElement,this.CustomEvent="CustomEvent"in e?e.CustomEvent:t.CustomEvent,this.CSSStyleSheet="CSSStyleSheet"in e?e.CSSStyleSheet:t.CSSStyleSheet,this.ShadowRoot="ShadowRoot"in e?e.ShadowRoot:t.ShadowRoot,this.MutationObserver="MutationObserver"in e?e.MutationObserver:t.MutationObserver,this.window="window"in e?e.window:t.window,this.document="document"in e?e.document:t.document,this.location="location"in e?e.location:t.location,this.history="history"in e?e.history:t.history,this.navigator="navigator"in e?e.navigator:t.navigator,this.fetch="fetch"in e?e.fetch:null!==(s=null===(n=t.fetch)||void 0===n?void 0:n.bind(t))&&void 0!==s?s:Ce("fetch"),this.requestAnimationFrame="requestAnimationFrame"in e?e.requestAnimationFrame:null!==(r=null===(i=t.requestAnimationFrame)||void 0===i?void 0:i.bind(t))&&void 0!==r?r:Ce("requestAnimationFrame"),this.cancelAnimationFrame="cancelAnimationFrame"in e?e.cancelAnimationFrame:null!==(a=null===(o=t.cancelAnimationFrame)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:Ce("cancelAnimationFrame"),this.customElements="customElements"in e?e.customElements:t.customElements,this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new Ft(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new Ft(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let n=xe.get(t);return void 0===n&&xe.set(t,n=new Se(t,e)),n}static set(t,e){xe.set(t,e)}requestDomRead(){this.domReadRequested=!0,-1===this.domWriteHandle&&(this.domWriteHandle=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.domReadRequested=!1,this.domReadHandle>-1&&(this.clearTimeout(this.domReadHandle),this.domReadHandle=-1),!1===this.domWriteRequested&&this.domWriteHandle>-1&&(this.cancelAnimationFrame(this.domWriteHandle),this.domWriteHandle=-1)}flushDomRead(){this.domReadHandle=-1,!0===this.domReadRequested&&(this.domReadRequested=!1,this.domReadQueue.flush())}requestDomWrite(){this.domWriteRequested=!0,-1===this.domWriteHandle&&(this.domWriteHandle=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.domWriteRequested=!1,this.domWriteHandle>-1&&(!1===this.domReadRequested||this.domReadHandle>-1)&&(this.cancelAnimationFrame(this.domWriteHandle),this.domWriteHandle=-1)}flushDomWrite(){this.domWriteHandle=-1,!0===this.domWriteRequested&&(this.domWriteRequested=!1,this.domWriteQueue.flush()),!0===this.domReadRequested&&-1===this.domReadHandle&&(this.domReadHandle=this.setTimeout(this.flushDomRead,0))}}function Ae(t,e,n,s){for(let i=0,r=t.length;i<r;++i)Rt.aliasTo(n,e.keyFrom(t[i])).register(s)}const Te=Object.freeze({});class Ee{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Ee(t,e)}static get(t,e,n,s,i){if(null==t&&null==i)throw new Error(`Scope is ${t} and HostScope is ${i}.`);const r=i!==t&&null!=i;let o=_e(t,e,n);return null!==o&&(null!=o&&e in o||!r)||r&&(o=_e(i,e,n),null!==o)?o:256&s?Te:t.bindingContext||t.overrideContext}}function _e(t,e,n){var s,i;let r=t.overrideContext,o=t;if(n>0){for(;n>0;)if(n--,o=o.parentScope,null==(null==o?void 0:o.overrideContext))return;return r=o.overrideContext,e in r?r:r.bindingContext}for(;!(null==o?void 0:o.isComponentBoundary)&&r&&!(e in r)&&(!r.bindingContext||!(e in r.bindingContext));)o=null!==(s=o.parentScope)&&void 0!==s?s:null,r=null!==(i=null==o?void 0:o.overrideContext)&&void 0!==i?i:null;return r?e in r?r:r.bindingContext:null}class Ie{constructor(t,e,n,s){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isComponentBoundary=s}static create(t,e,n){return new Ie(null,t,null==e?Re.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error("OverrideContext is "+t);return new Ie(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error("ParentScope is "+t);return new Ie(t,e,Re.create(e),!1)}}class Re{constructor(t){this.bindingContext=t}static create(t){return new Re(t)}}const Oe=lt.createInterface("ISignaler").withDefault(t=>t.singleton(Pe));class Pe{constructor(){this.signals=Object.create(null)}dispatchSignal(t,e){const n=this.signals[t];if(void 0!==n)for(const t of n.keys())t.handleChange(void 0,void 0,8|e)}addSignalListener(t,e){const n=this.signals,s=n[t];void 0===s?n[t]=new Set([e]):s.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var $e;function je(t){return function(e){return Fe.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}($e||($e={}));class Ve{constructor(t,e,n,s,i){this.Type=t,this.name=e,this.aliases=n,this.key=s,this.strategy=i}static create(t,e){let n,s;"string"==typeof t?(n=t,s={name:n}):(n=t.name,s=t);const i=Object.getPrototypeOf(e)===Le;return new Ve(e,W(Fe.getAnnotation(e,"name"),n),H(Fe.getAnnotation(e,"aliases"),s.aliases,e.aliases),Fe.keyFrom(n),nt("strategy",s,e,()=>i?2:1))}register(t){const{Type:e,key:n,aliases:s,strategy:i}=this;switch(i){case 1:Rt.singleton(n,e).register(t);break;case 2:Rt.instance(n,new De(t,e)).register(t)}Rt.aliasTo(n,e).register(t),Ae(s,Fe,n,t)}}class De{constructor(t,e){this.container=t,this.Type=e,this.deps=lt.getDependencies(e)}construct(t,e){const n=this.container,s=this.deps;switch(s.length){case 0:case 1:case 2:return new this.Type(t,e);case 3:return new this.Type(n.get(s[0]),t,e);case 4:return new this.Type(n.get(s[0]),n.get(s[1]),t,e);default:return new this.Type(...s.map(t=>n.get(t)),t,e)}}}class Le{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}get id(){return this.binding.id}get observerLocator(){return this.binding.observerLocator}get locator(){return this.binding.locator}get $scope(){return this.binding.$scope}get $hostScope(){return this.binding.$hostScope}get isBound(){return this.binding.isBound}get record(){return this.binding.record}get cRecord(){return this.binding.cRecord}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}observeProperty(t,e){this.binding.observeProperty(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e,n){this.binding.$bind(t,e,n)}$unbind(t){this.binding.$unbind(t)}}const Fe={name:tt.resource.keyFor("binding-behavior"),keyFrom:t=>`${Fe.name}:${t}`,isType:t=>"function"==typeof t&&T.hasOwn(Fe.name,t),define(t,e){const n=Ve.create(t,e);return T.define(Fe.name,n,n.Type),T.define(Fe.name,n,n),tt.resource.appendTo(e,Fe.name),n.Type},getDefinition(t){const e=T.getOwn(Fe.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){T.define(tt.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>T.getOwn(tt.annotation.keyFor(e),t)};function qe(t){return function(e){return Me.define(t,e)}}class Ne{constructor(t,e,n,s){this.Type=t,this.name=e,this.aliases=n,this.key=s}static create(t,e){let n,s;return"string"==typeof t?(n=t,s={name:n}):(n=t.name,s=t),new Ne(e,W(Me.getAnnotation(e,"name"),n),H(Me.getAnnotation(e,"aliases"),s.aliases,e.aliases),Me.keyFrom(n))}register(t){const{Type:e,key:n,aliases:s}=this;Rt.singleton(n,e).register(t),Rt.aliasTo(n,e).register(t),Ae(s,Me,n,t)}}const Me={name:tt.resource.keyFor("value-converter"),keyFrom:t=>`${Me.name}:${t}`,isType:t=>"function"==typeof t&&T.hasOwn(Me.name,t),define(t,e){const n=Ne.create(t,e);return T.define(Me.name,n,n.Type),T.define(Me.name,n,n),tt.resource.appendTo(e,Me.name),n.Type},getDefinition(t){const e=T.getOwn(Me.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){T.define(tt.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>T.getOwn(tt.annotation.keyFor(e),t)};var Be;!function(t){t[t.Connects=32]="Connects",t[t.Observes=64]="Observes",t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation"}(Be||(Be={}));class Ue{constructor(){this.text=""}static unparse(t){const e=new Ue;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+="."+t.name}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,s=e.length;t<s;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(","string"==typeof t.value){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=""+t.value;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+="."+t.name,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,s=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<s;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,s=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<s;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+="("+t.operation,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+="|"+t.name;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+="&"+t.name;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,s=e.length;t<s;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,s=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<s;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}function ze(t,e,n){if(t){if(null==n)throw new Error("Host scope is missing. Are you using `$host` outside the `au-slot`? Or missing the `au-slot` attribute?");return n}return e}class He{constructor(t){this.value=t}evaluate(t,e,n,s,i){return this.value}}class We{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Fe.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,s,i){return this.expression.evaluate(t,e,n,s,i)}assign(t,e,n,s,i){return this.expression.assign(t,e,n,s,i)}bind(t,e,n,s){this.expression.hasBind&&this.expression.bind(t,e,n,s);const i=s.locator.get(this.behaviorKey);if(null==i)throw new Error(`BindingBehavior named '${this.name}' could not be found. Did you forget to register it as a dependency?`);if(!(i instanceof De)){if(void 0!==s[this.behaviorKey])throw new Error(`BindingBehavior named '${this.name}' already applied.`);s[this.behaviorKey]=i,i.bind.call(i,t,e,n,s,...this.args.map(i=>i.evaluate(t,e,n,s.locator,null)))}}unbind(t,e,n,s){const i=this.behaviorKey,r=s;void 0!==r[i]&&("function"==typeof r[i].unbind&&r[i].unbind(t,e,n,s),r[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n,s)}accept(t){return t.visitBindingBehavior(this)}toString(){return Ue.unparse(this)}}class Ke{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=Me.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,s,i){const r=s.get(this.converterKey);if(null==r)throw new Error(`ValueConverter named '${this.name}' could not be found. Did you forget to register it as a dependency?`);if(null!==i&&"handleChange"in i){const t=r.signals;if(null!=t){const e=s.get(Oe);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in r?r.toView(this.expression.evaluate(t,e,n,s,i),...this.args.map(r=>r.evaluate(t,e,n,s,i))):this.expression.evaluate(t,e,n,s,i)}assign(t,e,n,s,i){const r=s.get(this.converterKey);if(null==r)throw new Error(`ValueConverter named '${this.name}' could not be found. Did you forget to register it as a dependency?`);return"fromView"in r&&(i=r.fromView(i,...this.args.map(i=>i.evaluate(t,e,n,s,null)))),this.expression.assign(t,e,n,s,i)}unbind(t,e,n,s){const i=s.locator.get(this.converterKey);if(void 0===i.signals)return;const r=s.locator.get(Oe);for(let t=0;t<i.signals.length;++t)r.removeSignalListener(i.signals[t],s)}accept(t){return t.visitValueConverter(this)}toString(){return Ue.unparse(this)}}class Ge{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){return this.target.assign(t,e,n,s,this.value.evaluate(t,e,n,s,i))}assign(t,e,n,s,i){return this.value.assign(t,e,n,s,i),this.target.assign(t,e,n,s,i)}accept(t){return t.visitAssign(this)}toString(){return Ue.unparse(this)}}class Qe{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){return this.condition.evaluate(t,e,n,s,i)?this.yes.evaluate(t,e,n,s,i):this.no.evaluate(t,e,n,s,i)}assign(t,e,n,s,i){}accept(t){return t.visitConditional(this)}toString(){return Ue.unparse(this)}}class Ze{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){var r;this===Ze.$host&&(e=ze(!0,e,n));let o=e.overrideContext,a=e,c=this.ancestor;for(;c--&&o;)a=a.parentScope,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return c<1&&o?o.bindingContext:void 0}assign(t,e,n,s,i){}accept(t){return t.visitAccessThis(this)}toString(){return Ue.unparse(this)}}Ze.$this=new Ze(0),Ze.$host=new Ze(0),Ze.$parent=new Ze(1);class Je{constructor(t,e=0,n=!1){this.name=t,this.ancestor=e,this.accessHostScope=n}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){const r=Ee.get(ze(this.accessHostScope,e,n),this.name,this.ancestor,t,n);null!==i&&i.observeProperty(r,this.name);const o=r[this.name];return 4&t?o:null==o?"":o}assign(t,e,n,s,i){var r;const o=Ee.get(ze(this.accessHostScope,e,n),this.name,this.ancestor,t,n);if(o instanceof Object)return void 0!==(null===(r=o.$observers)||void 0===r?void 0:r[this.name])?(o.$observers[this.name].setValue(i,t),i):o[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return Ue.unparse(this)}}class Ye{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){const r=this.object.evaluate(t,e,n,s,(2048&t)>0?null:i);return 4&t?null==r?r:(null!==i&&i.observeProperty(r,this.name),r[this.name]):(null!==i&&r instanceof Object&&i.observeProperty(r,this.name),r?r[this.name]:"")}assign(t,e,n,s,i){const r=this.object.evaluate(t,e,n,s,null);return r instanceof Object?void 0!==r.$observers&&void 0!==r.$observers[this.name]?r.$observers[this.name].setValue(i,t):r[this.name]=i:this.object.assign(t,e,n,s,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return Ue.unparse(this)}}class Xe{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){const r=this.object.evaluate(t,e,n,s,(2048&t)>0?null:i);if(r instanceof Object){const o=this.key.evaluate(t,e,n,s,(2048&t)>0?null:i);return null!==i&&i.observeProperty(r,o),r[o]}}assign(t,e,n,s,i){return this.object.evaluate(t,e,n,s,null)[this.key.evaluate(t,e,n,s,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return Ue.unparse(this)}}class tn{constructor(t,e,n=0,s=!1){this.name=t,this.args=e,this.ancestor=n,this.accessHostScope=s}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){e=ze(this.accessHostScope,e,n);const r=this.args.map(r=>r.evaluate(t,e,n,s,i)),o=Ee.get(e,this.name,this.ancestor,t,n),a=vn(t,o,this.name);if(a)return a.apply(o,r)}assign(t,e,n,s,i){}accept(t){return t.visitCallScope(this)}toString(){return Ue.unparse(this)}}class en{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){const r=this.object.evaluate(t,e,n,s,(2048&t)>0?null:i),o=this.args.map(r=>r.evaluate(t,e,n,s,i)),a=vn(t,r,this.name);if(a)return a.apply(r,o)}assign(t,e,n,s,i){}accept(t){return t.visitCallMember(this)}toString(){return Ue.unparse(this)}}class nn{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){const r=this.func.evaluate(t,e,n,s,i);if("function"==typeof r)return r(...this.args.map(r=>r.evaluate(t,e,n,s,i)));if(128&t||null!=r)throw new Error("Expression is not a function.")}assign(t,e,n,s,i){}accept(t){return t.visitCallFunction(this)}toString(){return Ue.unparse(this)}}class sn{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,s,i)&&this.right.evaluate(t,e,n,s,i);case"||":return this.left.evaluate(t,e,n,s,i)||this.right.evaluate(t,e,n,s,i);case"==":return this.left.evaluate(t,e,n,s,i)==this.right.evaluate(t,e,n,s,i);case"===":return this.left.evaluate(t,e,n,s,i)===this.right.evaluate(t,e,n,s,i);case"!=":return this.left.evaluate(t,e,n,s,i)!=this.right.evaluate(t,e,n,s,i);case"!==":return this.left.evaluate(t,e,n,s,i)!==this.right.evaluate(t,e,n,s,i);case"instanceof":{const r=this.right.evaluate(t,e,n,s,i);return"function"==typeof r&&this.left.evaluate(t,e,n,s,i)instanceof r}case"in":{const r=this.right.evaluate(t,e,n,s,i);return r instanceof Object&&this.left.evaluate(t,e,n,s,i)in r}case"+":{const r=this.left.evaluate(t,e,n,s,i),o=this.right.evaluate(t,e,n,s,i);if((4&t)>0)return r+o;if(!r||!o){if(j(r)||j(o))return(r||0)+(o||0);if(V(r)||V(o))return(r||"")+(o||"")}return r+o}case"-":return this.left.evaluate(t,e,n,s,i)-this.right.evaluate(t,e,n,s,i);case"*":return this.left.evaluate(t,e,n,s,i)*this.right.evaluate(t,e,n,s,i);case"/":return this.left.evaluate(t,e,n,s,i)/this.right.evaluate(t,e,n,s,i);case"%":return this.left.evaluate(t,e,n,s,i)%this.right.evaluate(t,e,n,s,i);case"<":return this.left.evaluate(t,e,n,s,i)<this.right.evaluate(t,e,n,s,i);case">":return this.left.evaluate(t,e,n,s,i)>this.right.evaluate(t,e,n,s,i);case"<=":return this.left.evaluate(t,e,n,s,i)<=this.right.evaluate(t,e,n,s,i);case">=":return this.left.evaluate(t,e,n,s,i)>=this.right.evaluate(t,e,n,s,i);default:throw new Error(`Unknown binary operator: '${this.operation}'`)}}assign(t,e,n,s,i){}accept(t){return t.visitBinary(this)}toString(){return Ue.unparse(this)}}class rn{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,s,i);case"typeof":return typeof this.expression.evaluate(4|t,e,n,s,i);case"!":return!this.expression.evaluate(t,e,n,s,i);case"-":return-this.expression.evaluate(t,e,n,s,i);case"+":return+this.expression.evaluate(t,e,n,s,i);default:throw new Error(`Unknown unary operator: '${this.operation}'`)}}assign(t,e,n,s,i){}accept(t){return t.visitUnary(this)}toString(){return Ue.unparse(this)}}class on{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){return this.value}assign(t,e,n,s,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Ue.unparse(this)}}on.$undefined=new on(void 0),on.$null=new on(null),on.$true=new on(!0),on.$false=new on(!1),on.$empty=new on("");class an{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){return this.elements.map(r=>r.evaluate(t,e,n,s,i))}assign(t,e,n,s,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return Ue.unparse(this)}}an.$empty=new an(I);class cn{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){const r={};for(let o=0;o<this.keys.length;++o)r[this.keys[o]]=this.values[o].evaluate(t,e,n,s,i);return r}assign(t,e,n,s,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return Ue.unparse(this)}}cn.$empty=new cn(I,I);class ln{constructor(t,e=I){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){let r=this.cooked[0];for(let o=0;o<this.expressions.length;++o)r+=String(this.expressions[o].evaluate(t,e,n,s,i)),r+=this.cooked[o+1];return r}assign(t,e,n,s,i){}accept(t){return t.visitTemplate(this)}toString(){return Ue.unparse(this)}}ln.$empty=new ln([""]);class hn{constructor(t,e,n,s=I){this.cooked=t,this.func=n,this.expressions=s,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){const r=this.expressions.map(r=>r.evaluate(t,e,n,s,i)),o=this.func.evaluate(t,e,n,s,i);if("function"!=typeof o)throw new Error("Left-hand side of tagged template expression is not a function.");return o(this.cooked,...r)}assign(t,e,n,s,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Ue.unparse(this)}}class un{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){}assign(t,e,n,s,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Ue.unparse(this)}}class pn{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){}assign(t,e,n,s,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Ue.unparse(this)}}class dn{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Ue.unparse(this)}}const fn=Object.prototype.toString;class gn{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){return this.iterable.evaluate(t,e,n,s,i)}assign(t,e,n,s,i){}count(t,e){switch(fn.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error("Cannot count "+fn.call(e))}}iterate(t,e,n){switch(fn.call(e)){case"[object Array]":return bn(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let s=-1;for(const e of t.entries())n[++s]=e;bn(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let s=-1;for(const e of t.keys())n[++s]=e;bn(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;bn(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error("Cannot iterate over "+fn.call(e))}}bind(t,e,n,s){this.iterable.hasBind&&this.iterable.bind(t,e,n,s)}unbind(t,e,n,s){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n,s)}accept(t){return t.visitForOfStatement(this)}toString(){return Ue.unparse(this)}}class mn{constructor(t,e=I){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,s,i){if(this.isMulti){let r=this.parts[0];for(let o=0;o<this.expressions.length;++o)r+=String(this.expressions[o].evaluate(t,e,n,s,i)),r+=this.parts[o+1];return r}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,s,i)}${this.parts[1]}`}assign(t,e,n,s,i){}accept(t){return t.visitInterpolation(this)}toString(){return Ue.unparse(this)}}function vn(t,e,n){const s=null==e?null:e[n];if("function"==typeof s)return s;if(!(128&t)&&null==s)return null;throw new Error(`Expected '${n}' to be a function`)}function bn(t,e){for(let n=0,s=t.length;n<s;++n)e(t,n,t[n])}function yn(t,e,n){Reflect.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}function wn(t,e,n,s=!1){!s&&Object.prototype.hasOwnProperty.call(t,e)||yn(t,e,n)}const kn=[],xn=[];let Cn=-1;function Sn(t){if(t===Cn){Cn+=5;const e=kn.length=xn.length=Cn+1;for(let n=t+1;n<e;++n)kn[n]="_o"+n,xn[n]="_v"+n}}function An(t,e){const n=this.observerLocator.getObserver(t,e);this.record.add(n)}function Tn(){const t=new On(this);return yn(this,"record",t),t}function En(t){const e=function(t,e){let n;if(t instanceof Array)n=e.getArrayObserver(t);else if(t instanceof Set)n=e.getSetObserver(t);else{if(!(t instanceof Map))throw new Error("Unrecognised collection type.");n=e.getMapObserver(t)}return n}(t,this.observerLocator);this.cRecord.add(e)}function _n(){const t=new Pn(this);return yn(this,"cRecord",t),t}function In(){throw new Error('method "handleChange" not implemented')}function Rn(){throw new Error('method "handleCollectionChange" not implemented')}Sn(-1);class On{constructor(t){this.binding=t,this.version=0,this.count=0,jn.assignIdTo(this)}handleChange(t,e,n){return this.binding.interceptor.handleChange(t,e,n)}add(t){const e=null==this.count?0:this.count;let n=e;for(;n--&&this[kn[n]]!==t;);if(-1===n){for(n=0;this[kn[n]];)n++;this[kn[n]]=t,t.subscribe(this),t[this.id]|=8,n===e&&(this.count=n+1)}this[xn[n]]=this.version,Sn(n)}clear(t){const e=this.count;let n,s;if(!0===t){for(let t=0;t<e;++t)n=kn[t],s=this[n],null!=s&&(this[n]=void 0,s.unsubscribe(this),s[this.id]&=-9);this.count=0}else for(let t=0;t<e;++t)this[xn[t]]!==this.version&&(n=kn[t],s=this[n],null!=s&&(this[n]=void 0,s.unsubscribe(this),s[this.id]&=-9,this.count--))}}class Pn{constructor(t){this.binding=t,this.count=0,this.observers=new Map,jn.assignIdTo(this)}get version(){return this.binding.record.version}handleCollectionChange(t,e){this.binding.interceptor.handleCollectionChange(t,e)}add(t){t.subscribeToCollection(this),this.count=this.observers.set(t,this.version).size}clear(t){if(0===this.count)return;const e=this.observers,n=this.version;let s,i;for(s of e)(t||s[1]!==n)&&(i=s[0],i.unsubscribeFromCollection(this),e.delete(i));this.count=e.size}}function $n(t){const e=t.prototype,n=Reflect.defineProperty;return wn(e,"observeProperty",An,!0),wn(e,"observeCollection",En,!0),n(e,"record",{configurable:!0,get:Tn}),n(e,"cRecord",{configurable:!0,get:_n}),wn(e,"handleChange",In),wn(e,"handleCollectionChange",Rn),t}function jn(t){return null==t?$n:$n(t)}let Vn=0;jn.assignIdTo=t=>{t.id=++Vn};$n(class{constructor(t,e,n,s){this.key=t,this.binding=e,this.observerLocator=n,this.locator=s,this.interceptor=this,jn.assignIdTo(this)}$bind(t,e,n,s){throw new Error("Method not implemented.")}$unbind(t){throw new Error("Method not implemented.")}handleChange(t,e,n){this.binding[this.key](t,e,n)}});const Dn=lt.createInterface("IExpressionParser").withDefault(t=>t.singleton(Ln));class Ln{constructor(){this.expressionLookup=Object.create(null),this.forOfLookup=Object.create(null),this.interpolationLookup=Object.create(null)}parse(t,e){switch(e){case 2048:{let n=this.interpolationLookup[t];return void 0===n&&(n=this.interpolationLookup[t]=this.$parse(t,e)),n}case 539:{let n=this.forOfLookup[t];return void 0===n&&(n=this.forOfLookup[t]=this.$parse(t,e)),n}default:{if(0===t.length&&55&e)return on.$empty;let n=this.expressionLookup[t];return void 0===n&&(n=this.expressionLookup[t]=this.$parse(t,e)),n}}}$parse(t,e){return Jn.input=t,Jn.length=t.length,Jn.index=0,Jn.currentChar=t.charCodeAt(0),Yn(Jn,0,61,void 0===e?53:e)}}var Fn,qn,Nn,Mn;function Bn(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(Fn||(Fn={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(qn||(qn={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Nn||(Nn={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.HostScope=3077]="HostScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(Mn||(Mn={}));const Un=on.$false,zn=on.$true,Hn=on.$null,Wn=on.$undefined,Kn=Ze.$this,Gn=Ze.$host,Qn=Ze.$parent;var Zn;!function(t){t[t.None=0]="None",t[t.IgnoreCustomAttr=4096]="IgnoreCustomAttr",t[t.Interpolation=2048]="Interpolation",t[t.IsRef=5376]="IsRef",t[t.IsIterator=512]="IsIterator",t[t.IsCustom=256]="IsCustom",t[t.IsFunction=128]="IsFunction",t[t.IsEvent=64]="IsEvent",t[t.IsProperty=32]="IsProperty",t[t.IsCommand=16]="IsCommand",t[t.IsPropertyCommand=48]="IsPropertyCommand",t[t.IsEventCommand=80]="IsEventCommand",t[t.DelegationStrategyDelta=6]="DelegationStrategyDelta",t[t.Command=15]="Command",t[t.OneTimeCommand=49]="OneTimeCommand",t[t.ToViewCommand=50]="ToViewCommand",t[t.FromViewCommand=51]="FromViewCommand",t[t.TwoWayCommand=52]="TwoWayCommand",t[t.BindCommand=53]="BindCommand",t[t.TriggerCommand=4182]="TriggerCommand",t[t.CaptureCommand=4183]="CaptureCommand",t[t.DelegateCommand=4184]="DelegateCommand",t[t.CallCommand=153]="CallCommand",t[t.OptionsCommand=26]="OptionsCommand",t[t.ForCommand=539]="ForCommand",t[t.CustomCommand=284]="CustomCommand"}(Zn||(Zn={}));const Jn=new class{constructor(t){this.input=t,this.index=0,this.startIndex=0,this.lastIndex=0,this.currentToken=1572864,this.tokenValue="",this.assignable=!0,this.length=t.length,this.currentChar=t.charCodeAt(0)}get tokenRaw(){return this.input.slice(this.startIndex,this.index)}}("");function Yn(t,e,n,s){if(284===s)return new He(t.input);if(0===t.index){if(2048&s)return function(t){const e=[],n=[],s=t.length;let i="";for(;t.index<s;){switch(t.currentChar){case 36:if(123===t.input.charCodeAt(t.index+1)){e.push(i),i="",t.index+=2,t.currentChar=t.input.charCodeAt(t.index),ts(t);const s=Yn(t,0,61,2048);n.push(s);continue}i+="$";break;case 92:i+=String.fromCharCode(Bn(es(t)));break;default:i+=String.fromCharCode(t.currentChar)}es(t)}if(n.length)return e.push(i),new mn(e,n);return null}(t);if(ts(t),1048576&t.currentToken)throw new Error(`Invalid start of expression: '${t.input}'`)}t.assignable=448>n;let i=void 0;if(32768&t.currentToken){const n=as[63&t.currentToken];ts(t),i=new rn(n,Yn(t,e,449,s)),t.assignable=!1}else{t:switch(t.currentToken){case 3078:t.assignable=!1;do{if(ts(t),e++,!rs(t,16393)){if(524288&t.currentToken){const t=511&e;i=0===t?Kn:1===t?Qn:new Ze(t),e=512;break t}throw new Error(`Invalid member expression: '${t.input}'`)}if(16393===t.currentToken)throw new Error(`Double dot and spread operators are not supported: '${t.input}'`);if(1572864===t.currentToken)throw new Error(`Expected identifier: '${t.input}'`)}while(3078===t.currentToken);case 1024:512&s?i=new dn(t.tokenValue):(i=new Je(t.tokenValue,511&e),e=1024),t.assignable=!0,ts(t);break;case 3076:t.assignable=!1,ts(t),i=Kn,e=512;break;case 3077:t.assignable=!1,ts(t),i=Gn,e=512;break;case 671751:ts(t),i=Yn(t,0,62,s),os(t,1835019),e=0;break;case 671757:i=function(t,e,n){ts(t);const s=new Array;for(;1835022!==t.currentToken;)if(rs(t,1572876)){if(s.push(Wn),1835022===t.currentToken)break}else{if(s.push(Yn(t,e,62,-513&n)),!rs(t,1572876))break;if(1835022===t.currentToken)break}return os(t,1835022),512&n?new un(s):(t.assignable=!1,new an(s))}(t,e,s),e=0;break;case 131080:i=function(t,e){const n=new Array,s=new Array;ts(t);for(;1835018!==t.currentToken;){if(n.push(t.tokenValue),12288&t.currentToken)ts(t),os(t,1572879),s.push(Yn(t,0,62,-513&e));else{if(!(3072&t.currentToken))throw new Error(`Invalid or unsupported property definition in object literal: '${t.input}'`);{const{currentChar:n,currentToken:i,index:r}=t;ts(t),rs(t,1572879)?s.push(Yn(t,0,62,-513&e)):(t.currentChar=n,t.currentToken=i,t.index=r,s.push(Yn(t,0,450,-513&e)))}}1835018!==t.currentToken&&os(t,1572876)}return os(t,1835018),512&e?new pn(n,s):(t.assignable=!1,new cn(n,s))}(t,s),e=0;break;case 540714:i=new ln([t.tokenValue]),t.assignable=!1,ts(t),e=0;break;case 540715:i=Xn(t,e,s,i,!1),e=0;break;case 4096:case 8192:i=new on(t.tokenValue),t.assignable=!1,ts(t),e=0;break;case 2050:case 2051:case 2049:case 2048:i=as[63&t.currentToken],t.assignable=!1,ts(t),e=0;break;default:throw t.index>=t.length?new Error(`Unexpected end of expression: '${t.input}'`):new Error(`Unconsumed token: '${t.input}'`)}if(512&s)return function(t,e){if(0==(65536&e.$kind))throw new Error(`Invalid BindingIdentifier at left hand side of "of": '${t.input}'`);if(1051180!==t.currentToken)throw new Error(`Invalid BindingIdentifier at left hand side of "of": '${t.input}'`);ts(t);const n=e,s=Yn(t,0,61,0);return new gn(n,s)}(t,i);if(449<n)return i;let r=t.tokenValue;for(;(16384&t.currentToken)>0;){const n=[];let o;switch(t.currentToken){case 16393:if(t.assignable=!0,ts(t),0==(3072&t.currentToken))throw new Error(`Expected identifier: '${t.input}'`);if(r=t.tokenValue,ts(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.currentToken){0===e&&(e=2048);continue}i=1024&e?new Je(r,i.ancestor,i===Gn):new Ye(i,r);continue;case 671757:t.assignable=!0,ts(t),e=4096,i=new Xe(i,Yn(t,0,62,s)),os(t,1835022);break;case 671751:for(t.assignable=!1,ts(t);1835019!==t.currentToken&&(n.push(Yn(t,0,62,s)),rs(t,1572876)););os(t,1835019),i=1024&e?new tn(r,n,i.ancestor,i===Gn):2048&e?new en(i,r,n):new nn(i,n),e=0;break;case 540714:t.assignable=!1,o=[t.tokenValue],i=new hn(o,o,i),ts(t);break;case 540715:i=Xn(t,e,s,i,!0)}}}if(448<n)return i;for(;(65536&t.currentToken)>0;){const r=t.currentToken;if((448&r)<=n)break;ts(t),i=new sn(as[63&r],i,Yn(t,e,448&r,s)),t.assignable=!1}if(63<n)return i;if(rs(t,1572880)){const n=Yn(t,e,62,s);os(t,1572879),i=new Qe(i,n,Yn(t,e,62,s)),t.assignable=!1}if(62<n)return i;if(rs(t,1048616)){if(!t.assignable)throw new Error(`Left hand side of expression is not assignable: '${t.input}'`);i=new Ge(i,Yn(t,e,62,s))}if(61<n)return i;for(;rs(t,1572884);){if(1572864===t.currentToken)throw new Error(`Expected identifier to come after ValueConverter operator: '${t.input}'`);const n=t.tokenValue;ts(t);const r=new Array;for(;rs(t,1572879);)r.push(Yn(t,e,62,s));i=new Ke(i,n,r)}for(;rs(t,1572883);){if(1572864===t.currentToken)throw new Error(`Expected identifier to come after BindingBehavior operator: '${t.input}'`);const n=t.tokenValue;ts(t);const r=new Array;for(;rs(t,1572879);)r.push(Yn(t,e,62,s));i=new We(i,n,r)}if(1572864!==t.currentToken){if(2048&s)return i;if("of"===t.tokenRaw)throw new Error(`Unexpected keyword "of": '${t.input}'`);throw new Error(`Unconsumed token: '${t.input}'`)}return i}function Xn(t,e,n,s,i){const r=[t.tokenValue];os(t,540715);const o=[Yn(t,e,62,n)];for(;540714!==(t.currentToken=is(t));)r.push(t.tokenValue),os(t,540715),o.push(Yn(t,e,62,n));return r.push(t.tokenValue),t.assignable=!1,i?(ts(t),new hn(r,r,s,o)):(ts(t),new ln(r,o))}function ts(t){for(;t.index<t.length;)if(t.startIndex=t.index,null!=(t.currentToken=vs[t.currentChar](t)))return;t.currentToken=1572864}function es(t){return t.currentChar=t.input.charCodeAt(++t.index)}function ns(t,e){let n=t.currentChar;if(!1===e){do{n=es(t)}while(n<=57&&n>=48);if(46!==n)return t.tokenValue=parseInt(t.tokenRaw,10),8192;if(n=es(t),t.index>=t.length)return t.tokenValue=parseInt(t.tokenRaw.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=es(t)}while(n<=57&&n>=48);else t.currentChar=t.input.charCodeAt(--t.index);return t.tokenValue=parseFloat(t.tokenRaw),8192}function ss(t){let e=!0,n="";for(;96!==es(t);)if(36===t.currentChar){if(t.index+1<t.length&&123===t.input.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.currentChar)n+=String.fromCharCode(Bn(es(t)));else{if(t.index>=t.length)throw new Error(`Unterminated template string: '${t.input}'`);n+=String.fromCharCode(t.currentChar)}return es(t),t.tokenValue=n,e?540714:540715}function is(t){if(t.index>=t.length)throw new Error(`Unterminated template string: '${t.input}'`);return t.index--,ss(t)}function rs(t,e){return t.currentToken===e&&(ts(t),!0)}function os(t,e){if(t.currentToken!==e)throw new Error(`Missing expected token: '${t.input}'`);ts(t)}const as=[Un,zn,Hn,Wn,"$this","$host","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],cs=Object.create(null);cs.true=2049,cs.null=2050,cs.false=2048,cs.undefined=2051,cs.$this=3076,cs.$host=3077,cs.$parent=3078,cs.in=1640799,cs.instanceof=1640800,cs.typeof=34851,cs.void=34852,cs.of=1051180;const ls=[36,0,48,58,65,91,95,0,97,123],hs=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],us=[48,58],ps=[0,33,127,161];function ds(t,e,n,s){const i=n.length;for(let r=0;r<i;r+=2){const i=n[r];let o=n[r+1];if(o=o>0?o:i+1,t&&t.fill(s,i,o),e)for(let t=i;t<o;t++)e.add(t)}}function fs(t){return e=>(es(e),t)}const gs=t=>{throw new Error(`Unexpected character: '${t.input}'`)};gs.notMapped=!0;ds(null,new Set,ls,!0);const ms=new Uint8Array(65535);ds(ms,null,hs,1),ds(ms,null,us,1);const vs=new Array(65535);vs.fill(gs,0,65535),ds(vs,null,ps,t=>(es(t),null)),ds(vs,null,hs,(function(t){for(;ms[es(t)];);const e=cs[t.tokenValue=t.tokenRaw];return void 0===e?1024:e})),ds(vs,null,us,t=>ns(t,!1)),vs[34]=vs[39]=t=>function(t){const e=t.currentChar;es(t);let n=0;const s=new Array;let i=t.index;for(;t.currentChar!==e;)if(92===t.currentChar)s.push(t.input.slice(i,t.index)),es(t),n=Bn(t.currentChar),es(t),s.push(String.fromCharCode(n)),i=t.index;else{if(t.index>=t.length)throw new Error(`Unterminated quote in string literal: '${t.input}'`);es(t)}const r=t.input.slice(i,t.index);es(t),s.push(r);const o=s.join("");return t.tokenValue=o,4096}(t),vs[96]=t=>ss(t),vs[33]=t=>61!==es(t)?32809:61!==es(t)?1638680:(es(t),1638682),vs[61]=t=>61!==es(t)?1048616:61!==es(t)?1638679:(es(t),1638681),vs[38]=t=>38!==es(t)?1572883:(es(t),1638614),vs[124]=t=>124!==es(t)?1572884:(es(t),1638549),vs[46]=t=>es(t)<=57&&t.currentChar>=48?ns(t,!0):16393,vs[60]=t=>61!==es(t)?1638747:(es(t),1638749),vs[62]=t=>61!==es(t)?1638748:(es(t),1638750),vs[37]=fs(1638886),vs[40]=fs(671751),vs[41]=fs(1835019),vs[42]=fs(1638885),vs[43]=fs(623009),vs[44]=fs(1572876),vs[45]=fs(623010),vs[47]=fs(1638887),vs[58]=fs(1572879),vs[63]=fs(1572880),vs[91]=fs(671757),vs[93]=fs(1835022),vs[123]=fs(131080),vs[125]=fs(1835018);var bs=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},ys=function(t,e){return function(n,s){e(n,s,t)}};const ws=lt.createInterface("ILifecycle").withDefault(t=>t.singleton(ks));class ks{constructor(){this.batch=new xs(this)}}let xs=class{constructor(t){this.lifecycle=t,this.queue=[],this.depth=0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){this.queue.push(t)}remove(t){const e=this.queue.indexOf(t);e>-1&&this.queue.splice(e,1)}process(t){for(;this.queue.length>0;){const e=this.queue.slice();this.queue=[];const{length:n}=e;for(let s=0;s<n;++s)e[s].flushBatch(t)}}};var Cs,Ss,As,Ts,Es,_s;function Is(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function Rs(){return function(t){const e=t.prototype;wn(e,"_sFlags",0,!0),wn(e,"addSubscriber",Ps,!0),wn(e,"removeSubscriber",js,!0),wn(e,"hasSubscriber",Fs,!0),wn(e,"hasSubscribers",Ds,!0),wn(e,"callSubscribers",Ns,!0),wn(e,"subscribe",Ps),wn(e,"unsubscribe",js)}}function Os(){return function(t){const e=t.prototype;wn(e,"_csFlags",0,!0),wn(e,"addCollectionSubscriber",$s,!0),wn(e,"removeCollectionSubscriber",Vs,!0),wn(e,"hasCollectionSubscriber",qs,!0),wn(e,"hasCollectionSubscribers",Ls,!0),wn(e,"callCollectionSubscribers",Bs,!0),wn(e,"subscribeToCollection",$s),wn(e,"unsubscribeFromCollection",Vs)}}function Ps(t){if(this.hasSubscriber(t))return!1;const e=this._sFlags;return 0==(1&e)?(this._s0=t,this._sFlags|=1):0==(2&e)?(this._s1=t,this._sFlags|=2):0==(4&e)?(this._s2=t,this._sFlags|=4):0==(8&e)?(this._sRest=[t],this._sFlags|=8):this._sRest.push(t),!0}function $s(t){if(this.hasCollectionSubscriber(t))return!1;const e=this._csFlags;return 0==(1&e)?(this._cs0=t,this._csFlags|=1):0==(2&e)?(this._cs1=t,this._csFlags|=2):0==(4&e)?(this._cs2=t,this._csFlags|=4):0==(8&e)?(this._csRest=[t],this._csFlags|=8):this._csRest.push(t),!0}function js(t){const e=this._sFlags;if((1&e)>0&&this._s0===t)return this._s0=void 0,this._sFlags=1^(1|this._sFlags),!0;if((2&e)>0&&this._s1===t)return this._s1=void 0,this._sFlags=2^(2|this._sFlags),!0;if((4&e)>0&&this._s2===t)return this._s2=void 0,this._sFlags=4^(4|this._sFlags),!0;if((8&e)>0){const e=this._sRest;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return e.splice(n,1),1===s&&(this._sFlags=8^(8|this._sFlags)),!0}return!1}function Vs(t){const e=this._csFlags;if((1&e)>0&&this._cs0===t)return this._cs0=void 0,this._csFlags=1^(1|this._csFlags),!0;if((2&e)>0&&this._cs1===t)return this._cs1=void 0,this._csFlags=2^(2|this._csFlags),!0;if((4&e)>0&&this._cs2===t)return this._cs2=void 0,this._csFlags=4^(4|this._csFlags),!0;if((8&e)>0){const e=this._csRest;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return e.splice(n,1),1===s&&(this._csFlags=8^(8|this._csFlags)),!0}return!1}function Ds(){return 0!==this._sFlags}function Ls(){return 0!==this._csFlags}function Fs(t){const e=this._sFlags;if((1&e)>0&&this._s0===t)return!0;if((2&e)>0&&this._s1===t)return!0;if((4&e)>0&&this._s2===t)return!0;if((8&e)>0){const e=this._sRest;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return!0}return!1}function qs(t){const e=this._csFlags;if((1&e)>0&&this._cs0===t)return!0;if((2&e)>0&&this._cs1===t)return!0;if((4&e)>0&&this._cs2===t)return!0;if((8&e)>0){const e=this._csRest;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return!0}return!1}function Ns(t,e,n){const s=this._s0,i=this._s1,r=this._s2;let o=this._sRest;if(void 0!==o&&(o=o.slice()),void 0!==s&&Ms(s,t,e,n,void 0===s.id?0:this[s.id]),void 0!==i&&Ms(i,t,e,n,void 0===i.id?0:this[i.id]),void 0!==r&&Ms(r,t,e,n,void 0===r.id?0:this[r.id]),void 0!==o){const s=o.length;let i;for(let r=0;r<s;++r)i=o[r],void 0!==i&&Ms(i,t,e,n,void 0===i.id?0:this[i.id])}}function Ms(t,e,n,s,i){t.handleChange(e,n,24^(24|s)|i)}function Bs(t,e){const n=this._cs0,s=this._cs1,i=this._cs2;let r=this._csRest;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==r){const n=r.length;let s;for(let i=0;i<n;++i)s=r[i],void 0!==s&&s.handleCollectionChange(t,e)}}xs=bs([ys(0,ws)],xs),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Cs||(Cs={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=15367]="persistentBindingFlags",t[t.allowParentScopeTraversal=1024]="allowParentScopeTraversal",t[t.observeLeafPropertiesOnly=2048]="observeLeafPropertiesOnly",t[t.targetObserverFlags=12295]="targetObserverFlags",t[t.noFlush=4096]="noFlush",t[t.persistentTargetObserverQueue=8192]="persistentTargetObserverQueue",t[t.bindingStrategy=7]="bindingStrategy",t[t.getterSetterStrategy=1]="getterSetterStrategy",t[t.proxyStrategy=2]="proxyStrategy",t[t.isStrictBindingStrategy=4]="isStrictBindingStrategy",t[t.update=24]="update",t[t.updateTarget=8]="updateTarget",t[t.updateSource=16]="updateSource",t[t.from=96]="from",t[t.fromBind=32]="fromBind",t[t.fromUnbind=64]="fromUnbind",t[t.mustEvaluate=128]="mustEvaluate",t[t.isTraversingParentScope=256]="isTraversingParentScope",t[t.dispose=512]="dispose"}(Ss||(Ss={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(As||(As={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Ts||(Ts={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Es||(Es={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Obj=4]="Obj",t[t.Layout=8]="Layout",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(_s||(_s={}));class Us{constructor(t){this.owner=t,this.type=18,this.subCount=0,this.value=(this.obj=t.collection).length}getValue(){return this.obj.length}setValue(t,e){const n=this.value;t!==n&&$(t)&&(0==(4096&e)&&(this.obj.length=t),this.value=t,this.callSubscribers(t,n,8|e))}handleCollectionChange(t,e){const n=this.value,s=this.obj.length;(this.value=s)!==n&&this.callSubscribers(s,n,e)}}class zs{constructor(t){this.owner=t,this.subCount=0,this.value=(this.obj=t.collection).size,this.type=this.obj instanceof Map?66:34}getValue(){return this.obj.size}setValue(){throw new Error('Map/Set "size" is a readonly property')}handleCollectionChange(t,e){const n=this.value,s=this.obj.size;this.value=s,s!==n&&this.callSubscribers(s,n,e)}}function Hs(t){const e=t.prototype;wn(e,"subscribe",Ws,!0),wn(e,"unsubscribe",Ks,!0),Rs()(t)}function Ws(t){this.addSubscriber(t)&&1==++this.subCount&&this.owner.addCollectionSubscriber(this)}function Ks(t){this.removeSubscriber(t)&&--this.subCount&&this.owner.removeCollectionSubscriber(this)}Hs(Us),Hs(zs);const Gs=new WeakMap;function Qs(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Zs(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Js(t,e,n,s,i){let r,o,a,c,l,h,u;for(h=n+1;h<s;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],c=e[u],l=i(a,r),l>0);u--)t[u+1]=a,e[u+1]=c;t[u+1]=r,e[u+1]=o}}function Ys(t,e,n,s,i){let r,o,a,c,l,h,u,p,d,f,g,m,v,b,y,w,k,x,C,S=0,A=0;for(;;){if(s-n<=10)return void Js(t,e,n,s,i);S=n+(s-n>>1),r=t[n],c=e[n],o=t[s-1],l=e[s-1],a=t[S],h=e[S],u=i(r,o),u>0&&(f=r,g=c,r=o,c=l,o=f,l=g),p=i(r,a),p>=0?(f=r,g=c,r=a,c=h,a=o,h=l,o=f,l=g):(d=i(o,a),d>0&&(f=o,g=l,o=a,l=h,a=f,h=g)),t[n]=r,e[n]=c,t[s-1]=a,e[s-1]=h,m=o,v=l,b=n+1,y=s-1,t[S]=t[b],e[S]=e[b],t[b]=m,e[b]=v;t:for(A=b+1;A<y;A++)if(w=t[A],k=e[A],x=i(w,m),x<0)t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=k,b++;else if(x>0){do{if(y--,y==A)break t;C=t[y],x=i(C,m)}while(x>0);t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=k,x<0&&(w=t[A],k=e[A],t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=k,b++)}s-y<b-n?(Ys(t,e,y,s,i),s=b):(Ys(t,e,n,b,i),n=y)}}const Xs=Array.prototype,ti=Xs.push,ei=Xs.unshift,ni=Xs.pop,si=Xs.shift,ii=Xs.splice,ri=Xs.reverse,oi=Xs.sort,ai=["push","unshift","pop","shift","splice","reverse","sort"],ci={push:function(...t){const e=Gs.get(this);if(void 0===e)return ti.apply(this,t);const n=this.length,s=t.length;if(0===s)return n;this.length=e.indexMap.length=n+s;let i=n;for(;i<this.length;)this[i]=t[i-n],e.indexMap[i]=-2,i++;return e.notify(),this.length},unshift:function(...t){const e=Gs.get(this);if(void 0===e)return ei.apply(this,t);const n=t.length,s=new Array(n);let i=0;for(;i<n;)s[i++]=-2;ei.apply(e.indexMap,s);const r=ei.apply(this,t);return e.notify(),r},pop:function(){const t=Gs.get(this);if(void 0===t)return ni.call(this);const e=t.indexMap,n=ni.call(this),s=e.length-1;return e[s]>-1&&e.deletedItems.push(e[s]),ni.call(e),t.notify(),n},shift:function(){const t=Gs.get(this);if(void 0===t)return si.call(this);const e=t.indexMap,n=si.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),si.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],s=Gs.get(this);if(void 0===s)return ii.apply(this,t);const i=this.length,r=0|e,o=r<0?Math.max(i+r,0):Math.min(r,i),a=s.indexMap,c=t.length,l=0===c?0:1===c?i-o:n;if(l>0){let t=o;const e=t+l;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(c>2){const t=c-2,s=new Array(t);let i=0;for(;i<t;)s[i++]=-2;ii.call(a,e,n,...s)}else ii.apply(a,t);const h=ii.apply(this,t);return s.notify(),h},reverse:function(){const t=Gs.get(this);if(void 0===t)return ri.call(this),this;const e=this.length,n=e/2|0;let s=0;for(;s!==n;){const n=e-s-1,i=this[s],r=t.indexMap[s],o=this[n],a=t.indexMap[n];this[s]=o,t.indexMap[s]=a,this[n]=i,t.indexMap[n]=r,s++}return t.notify(),this},sort:function(t){const e=Gs.get(this);if(void 0===e)return oi.call(this,t),this;const n=this.length;if(n<2)return this;Ys(this,e.indexMap,0,n,Zs);let s=0;for(;s<n&&void 0!==this[s];)s++;return void 0!==t&&"function"==typeof t||(t=Qs),Ys(this,e.indexMap,0,s,t),e.notify(),this}},li={writable:!0,enumerable:!1,configurable:!0},hi=Reflect.defineProperty;for(const t of ai)hi(ci[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ui=!1;class pi{constructor(t){this.type=18,ui||(ui=!0,function(){for(const t of ai)!0!==Xs[t].observing&&hi(Xs,t,{...li,value:ci[t]})}()),this.inBatch=!1,this.indexObservers={},this.collection=t,this.indexMap=Is(t.length),this.lengthObserver=void 0,Gs.set(t,this)}notify(){var t;(null===(t=this.lifecycle)||void 0===t?void 0:t.batch.depth)?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){var t;return null!==(t=this.lengthObserver)&&void 0!==t?t:this.lengthObserver=new Us(this)}getIndexObserver(t){return this.getOrCreateIndexObserver(t)}flushBatch(t){const e=this.indexMap,n=this.collection.length;this.inBatch=!1,this.indexMap=Is(n),this.callCollectionSubscribers(e,8)}getOrCreateIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new di(this,t)}}class di{constructor(t,e){this.owner=t,this.index=e,this.subCount=0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,s=this.index,i=n.indexMap;i[s]>-1&&i.deletedItems.push(i[s]),i[s]=-2,n.collection[s]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const s=this.value,i=this.value=this.getValue();s!==i&&this.callSubscribers(i,s,e)}subscribe(t){this.addSubscriber(t)&&1==++this.subCount&&this.owner.addCollectionSubscriber(this)}unsubscribe(t){this.removeSubscriber(t)&&0==--this.subCount&&this.owner.removeCollectionSubscriber(this)}}function fi(t,e){let n=Gs.get(t);return void 0===n&&(n=new pi(t),null!=e&&(n.lifecycle=e)),n}Os()(pi),Rs()(di);const gi=new WeakMap,mi=Map.prototype,vi=mi.set,bi=mi.clear,yi=mi.delete,wi=["set","clear","delete"],ki={set:function(t,e){const n=gi.get(this);if(void 0===n)return vi.call(this,t,e),this;const s=this.get(t),i=this.size;vi.call(this,t,e);if(this.size===i){let e=0;for(const i of this.entries()){if(i[0]===t)return i[1]!==s&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[i]=-2,n.notify(),this},clear:function(){const t=gi.get(this);if(void 0===t)return bi.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;bi.call(this),e.length=0,t.notify()}},delete:function(t){const e=gi.get(this);if(void 0===e)return yi.call(this,t);if(0===this.size)return!1;let n=0;const s=e.indexMap;for(const i of this.keys()){if(i===t){s[n]>-1&&s.deletedItems.push(s[n]),s.splice(n,1);const i=yi.call(this,t);return!0===i&&e.notify(),i}++n}return!1}},xi={writable:!0,enumerable:!1,configurable:!0},Ci=Reflect.defineProperty;for(const t of wi)Ci(ki[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Si=!1;class Ai{constructor(t){this.type=66,Si||(Si=!0,function(){for(const t of wi)!0!==mi[t].observing&&Ci(mi,t,{...xi,value:ki[t]})}()),this.inBatch=!1,this.collection=t,this.indexMap=Is(t.size),this.lengthObserver=void 0,gi.set(t,this)}notify(){var t;(null===(t=this.lifecycle)||void 0===t?void 0:t.batch.depth)?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){var t;return null!==(t=this.lengthObserver)&&void 0!==t?t:this.lengthObserver=new zs(this)}flushBatch(t){const e=this.indexMap,n=this.collection.size;this.inBatch=!1,this.indexMap=Is(n),this.callCollectionSubscribers(e,8)}}function Ti(t,e){let n=gi.get(t);return void 0===n&&(n=new Ai(t),null!=e&&(n.lifecycle=e)),n}Os()(Ai);const Ei=new WeakMap,_i=Set.prototype,Ii=_i.add,Ri=_i.clear,Oi=_i.delete,Pi=["add","clear","delete"],$i={add:function(t){const e=Ei.get(this);if(void 0===e)return Ii.call(this,t),this;const n=this.size;Ii.call(this,t);return this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Ei.get(this);if(void 0===t)return Ri.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Ri.call(this),e.length=0,t.notify()}},delete:function(t){const e=Ei.get(this);if(void 0===e)return Oi.call(this,t);if(0===this.size)return!1;let n=0;const s=e.indexMap;for(const i of this.keys()){if(i===t){s[n]>-1&&s.deletedItems.push(s[n]),s.splice(n,1);const i=Oi.call(this,t);return!0===i&&e.notify(),i}n++}return!1}},ji={writable:!0,enumerable:!1,configurable:!0},Vi=Reflect.defineProperty;for(const t of Pi)Vi($i[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Di=!1;class Li{constructor(t){this.type=34,Di||(Di=!0,function(){for(const t of Pi)!0!==_i[t].observing&&Vi(_i,t,{...ji,value:$i[t]})}()),this.inBatch=!1,this.collection=t,this.indexMap=Is(t.size),this.lengthObserver=void 0,Ei.set(t,this)}notify(){var t;(null===(t=this.lifecycle)||void 0===t?void 0:t.batch.depth)?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){var t;return null!==(t=this.lengthObserver)&&void 0!==t?t:this.lengthObserver=new zs(this)}flushBatch(t){const e=this.indexMap,n=this.collection.size;this.inBatch=!1,this.indexMap=Is(n),this.callCollectionSubscribers(e,8)}}function Fi(t,e){let n=Ei.get(t);return void 0===n&&(n=new Li(t),null!=e&&(n.lifecycle=e)),n}Os()(Li);let qi=null;const Ni=[];let Mi=!1;function Bi(){return qi}function Ui(t){if(null==t)throw new Error("connectable cannot be null/undefined");if(null==qi)return qi=t,Ni[0]=qi,void(Mi=!0);if(qi===t)throw new Error("Already in this connectable "+t.id);Ni.push(qi),qi=t,Mi=!0}function zi(t){if(null==t)throw new Error("Connectable cannot be null/undefined");if(qi!==t)throw new Error(t.id+" is not currently collecting");Ni.pop(),qi=Ni.length>0?Ni[Ni.length-1]:null,Mi=null!=qi}const Hi=Object.freeze({get current(){return qi},get connecting(){return Mi},enter:Ui,exit:zi,pause:function(){Mi=!1},resume:function(){Mi=!0}}),Wi=Reflect.get,Ki=Object.prototype.toString,Gi=new WeakMap;function Qi(t){switch(Ki.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Zi="__raw__";function Ji(t){return Qi(t)?Yi(t):t}function Yi(t){var e;return null!==(e=Gi.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?sr:t instanceof Map||t instanceof Set?Ar:nr,n=new Proxy(t,e);return Gi.set(t,n),n}(t)}function Xi(t){var e;return null!==(e=t[Zi])&&void 0!==e?e:t}function tr(t){return Qi(t)&&t[Zi]||t}function er(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const nr={get(t,e,n){if(e===Zi)return t;const s=Bi();return!Mi||er(e)||null==s?Wi(t,e,n):(s.observeProperty(t,e),Ji(Wi(t,e,n)))}},sr={get(t,e,n){if(e===Zi)return t;const s=Bi();if(!Mi||er(e)||null==s)return Wi(t,e,n);switch(e){case"length":return s.observeProperty(t,"length"),t.length;case"map":return ir;case"includes":return ar;case"indexOf":return cr;case"lastIndexOf":return lr;case"every":return rr;case"filter":return or;case"findIndex":return hr;case"flat":return ur;case"flatMap":return pr;case"join":return dr;case"push":return gr;case"pop":return fr;case"reduce":return Cr;case"reduceRight":return Sr;case"reverse":return yr;case"shift":return mr;case"unshift":return vr;case"slice":return xr;case"splice":return br;case"some":return wr;case"sort":return kr;case"keys":return $r;case"values":case Symbol.iterator:return jr;case"entries":return Vr}return s.observeProperty(t,e),Ji(Wi(t,e,n))},ownKeys(t){var e;return null===(e=Bi())||void 0===e||e.observeProperty(t,"length"),Reflect.ownKeys(t)}};function ir(t,e){var n;const s=Xi(this),i=s.map((n,s)=>tr(t.call(e,Ji(n),s,this)));return null===(n=Bi())||void 0===n||n.observeCollection(s),Ji(i)}function rr(t,e){var n;const s=Xi(this),i=s.every((n,s)=>t.call(e,Ji(n),s,this));return null===(n=Bi())||void 0===n||n.observeCollection(s),i}function or(t,e){var n;const s=Xi(this),i=s.filter((n,s)=>tr(t.call(e,Ji(n),s,this)));return null===(n=Bi())||void 0===n||n.observeCollection(s),Ji(i)}function ar(t){var e;const n=Xi(this),s=n.includes(tr(t));return null===(e=Bi())||void 0===e||e.observeCollection(n),s}function cr(t){var e;const n=Xi(this),s=n.indexOf(tr(t));return null===(e=Bi())||void 0===e||e.observeCollection(n),s}function lr(t){var e;const n=Xi(this),s=n.lastIndexOf(tr(t));return null===(e=Bi())||void 0===e||e.observeCollection(n),s}function hr(t,e){var n;const s=Xi(this),i=s.findIndex((n,s)=>tr(t.call(e,Ji(n),s,this)));return null===(n=Bi())||void 0===n||n.observeCollection(s),i}function ur(){var t;const e=Xi(this);return null===(t=Bi())||void 0===t||t.observeCollection(e),Ji(e.flat())}function pr(t,e){var n;const s=Xi(this);return null===(n=Bi())||void 0===n||n.observeCollection(s),Yi(s.flatMap((n,s)=>Ji(t.call(e,Ji(n),s,this))))}function dr(t){var e;const n=Xi(this);return null===(e=Bi())||void 0===e||e.observeCollection(n),n.join(t)}function fr(){return Ji(Xi(this).pop())}function gr(...t){return Xi(this).push(...t)}function mr(){return Ji(Xi(this).shift())}function vr(...t){return Xi(this).unshift(...t)}function br(...t){return Ji(Xi(this).splice(...t))}function yr(...t){var e;const n=Xi(this),s=n.reverse();return null===(e=Bi())||void 0===e||e.observeCollection(n),Ji(s)}function wr(t,e){var n;const s=Xi(this),i=s.some((n,s)=>tr(t.call(e,Ji(n),s,this)));return null===(n=Bi())||void 0===n||n.observeCollection(s),i}function kr(t){var e;const n=Xi(this),s=n.sort(t);return null===(e=Bi())||void 0===e||e.observeCollection(n),Ji(s)}function xr(t,e){var n;const s=Xi(this);return null===(n=Bi())||void 0===n||n.observeCollection(s),Yi(s.slice(t,e))}function Cr(t,e){var n;const s=Xi(this),i=s.reduce((e,n,s)=>t(e,Ji(n),s,this),e);return null===(n=Bi())||void 0===n||n.observeCollection(s),Ji(i)}function Sr(t,e){var n;const s=Xi(this),i=s.reduceRight((e,n,s)=>t(e,Ji(n),s,this),e);return null===(n=Bi())||void 0===n||n.observeCollection(s),Ji(i)}const Ar={get(t,e,n){if(e===Zi)return t;const s=Bi();if(!Mi||er(e)||null==s)return Wi(t,e,n);switch(e){case"size":return s.observeProperty(t,"size"),t.size;case"clear":return Or;case"delete":return Pr;case"forEach":return Tr;case"add":if(t instanceof Set)return Rr;break;case"get":if(t instanceof Map)return _r;break;case"set":if(t instanceof Map)return Ir;break;case"has":return Er;case"keys":return $r;case"values":return jr;case"entries":return Vr;case Symbol.iterator:return t instanceof Map?Vr:jr}return Ji(Wi(t,e,n))}};function Tr(t,e){var n;const s=Xi(this);return null===(n=Bi())||void 0===n||n.observeCollection(s),s.forEach((n,s)=>{t.call(e,Ji(n),Ji(s),this)})}function Er(t){var e;const n=Xi(this);return null===(e=Bi())||void 0===e||e.observeCollection(n),n.has(tr(t))}function _r(t){var e;const n=Xi(this);return null===(e=Bi())||void 0===e||e.observeCollection(n),Ji(n.get(tr(t)))}function Ir(t,e){return Ji(Xi(this).set(tr(t),tr(e)))}function Rr(t){return Ji(Xi(this).add(tr(t)))}function Or(){return Ji(Xi(this).clear())}function Pr(t){return Ji(Xi(this).delete(tr(t)))}function $r(){var t;const e=Xi(this);null===(t=Bi())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,s=t.done;return s?{value:void 0,done:s}:{value:Ji(e),done:s}},[Symbol.iterator](){return this}}}function jr(){var t;const e=Xi(this);null===(t=Bi())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,s=t.done;return s?{value:void 0,done:s}:{value:Ji(e),done:s}},[Symbol.iterator](){return this}}}function Vr(){var t;const e=Xi(this);null===(t=Bi())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,s=t.done;return s?{value:void 0,done:s}:{value:[Ji(e[0]),Ji(e[1])],done:s}},[Symbol.iterator](){return this}}}const Dr=Object.freeze({getProxy:Yi,getRaw:Xi,wrap:Ji,unwrap:tr,rawKey:Zi});class Lr{constructor(t,e,n,s,i){this.obj=t,this.get=e,this.set=n,this.useProxy=s,this.observerLocator=i,this.interceptor=this,this.type=4,this.value=void 0,this.subCount=0,this.running=!1,this.isDirty=!1,jn.assignIdTo(this)}static create(t,e,n,s,i){const r=n.get,o=n.set,a=new Lr(t,r,o,i,s),c=()=>a.getValue();return c.getObserver=()=>a,Reflect.defineProperty(t,e,{enumerable:n.enumerable,configurable:!0,get:c,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subCount?this.get.call(this.obj,this):(this.isDirty&&(this.compute(),this.isDirty=!1),this.value)}setValue(t,e){if("function"!=typeof this.set)throw new Error("Property is readonly");t!==this.value&&(this.running=!0,this.set.call(this.obj,t),this.running=!1,this.run())}handleChange(){this.isDirty=!0,this.subCount>0&&this.run()}handleCollectionChange(){this.isDirty=!0,this.subCount>0&&this.run()}subscribe(t){this.addSubscriber(t)&&1==++this.subCount&&(this.compute(),this.isDirty=!1)}unsubscribe(t){this.removeSubscriber(t)&&0==--this.subCount&&(this.isDirty=!0,this.record.clear(!0),this.cRecord.clear(!0))}run(){if(this.running)return;const t=this.value,e=this.compute();this.isDirty=!1,Object.is(e,t)||this.callSubscribers(e,t,0)}compute(){this.running=!0,this.record.version++;try{return Ui(this),this.value=tr(this.get.call(this.useProxy?Ji(this.obj):this.obj,this))}finally{this.record.clear(!1),this.cRecord.clear(!1),this.running=!1,zi(this)}}}jn(Lr),Rs()(Lr);const Fr=lt.createInterface("IDirtyChecker").withDefault(t=>t.singleton(Mr)),qr={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},Nr={persistent:!0};class Mr{constructor(t){this.platform=t,this.tracked=[],this.task=null,this.elapsedFrames=0,this.check=()=>{if(qr.disabled)return;if(++this.elapsedFrames<qr.timeoutsPerCheck)return;this.elapsedFrames=0;const t=this.tracked,e=t.length;let n,s=0;for(;s<e;++s)n=t[s],n.isDirty()&&n.flush(0)}}createProperty(t,e){if(qr.throw)throw new Error(`Property '${e}' is being dirty-checked.`);return new Br(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.task=this.platform.macroTaskQueue.queueTask(this.check,Nr))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.task.cancel(),this.task=null)}}Mr.inject=[ke];class Br{constructor(t,e,n){this.dirtyChecker=t,this.obj=e,this.propertyKey=n,this.type=4,this.subCount=0}getValue(){return this.obj[this.propertyKey]}setValue(t,e){throw new Error(`Trying to set value for property ${this.propertyKey} in dirty checker`)}isDirty(){return this.oldValue!==this.obj[this.propertyKey]}flush(t){const e=this.oldValue,n=this.getValue();this.callSubscribers(n,e,8|t),this.oldValue=n}subscribe(t){this.addSubscriber(t)&&1==++this.subCount&&(this.oldValue=this.obj[this.propertyKey],this.dirtyChecker.addProperty(this))}unsubscribe(t){this.removeSubscriber(t)&&0==--this.subCount&&this.dirtyChecker.removeProperty(this)}}Rs()(Br);class Ur{constructor(t,e){this.obj=t,this.propertyKey=e,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1,this.observing=!1,this.type=4}getValue(){return this.currentValue}setValue(t,e){if(this.observing){const n=this.currentValue;this.currentValue=t,this.callSubscribers(t,n,e)}else this.obj[this.propertyKey]=t}flushBatch(t){this.inBatch=!1;const e=this.currentValue,n=this.oldValue;this.oldValue=e,this.callSubscribers(e,n,t)}subscribe(t){!1===this.observing&&this.start(),this.addSubscriber(t)}start(){return!1===this.observing&&(this.observing=!0,this.currentValue=this.obj[this.propertyKey],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.observing&&(Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,writable:!0,value:this.currentValue}),this.observing=!1),this}}class zr{constructor(t){this.s=t,this.type=4,this.v=void 0}getValue(){return this.v}setValue(t,e){"function"==typeof this.s&&(t=this.s(t));const n=this.v;Object.is(t,n)||(this.v=t,this.callSubscribers(t,n,e))}}Rs()(Ur),Rs()(zr);class Hr{constructor(t,e){this.obj=t,this.propertyKey=e,this.type=0}get doNotCache(){return!0}getValue(){return this.obj[this.propertyKey]}setValue(){}subscribe(){}unsubscribe(){}}class Wr{constructor(){this.type=4}getValue(t,e){return t[e]}setValue(t,e,n,s){n[s]=t}}const Kr=new Wr,Gr=lt.createInterface("IObserverLocator").withDefault(t=>t.singleton(Jr)),Qr=lt.createInterface("INodeObserverLocator").withDefault(t=>t.cachedCallback(t=>(t.getAll(se).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new Zr)));class Zr{handles(){return!1}getObserver(){return Kr}getAccessor(){return Kr}}class Jr{constructor(t,e,n){this.lifecycle=t,this.dirtyChecker=e,this.nodeObserverLocator=n,this.adapters=[]}addAdapter(t){this.adapters.push(t)}getObserver(t,e){var n,s;return null!==(s=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==s?s:this.cache(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const s=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==s?s:this.nodeObserverLocator.handles(t,e,this)?this.nodeObserverLocator.getAccessor(t,e,this):Kr}getArrayObserver(t){return fi(t,this.lifecycle)}getMapObserver(t){return Ti(t,this.lifecycle)}getSetObserver(t){return Fi(t,this.lifecycle)}createObserver(t,e){var n,s,i,r;if(!(t instanceof Object))return new Hr(t,e);if(this.nodeObserverLocator.handles(t,e,this))return this.nodeObserverLocator.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return fi(t,this.lifecycle).getLengthObserver();break;case"size":if(t instanceof Map)return Ti(t,this.lifecycle).getLengthObserver();if(t instanceof Set)return Fi(t,this.lifecycle).getLengthObserver();break;default:if(t instanceof Array&&$(e))return fi(t,this.lifecycle).getIndexObserver(Number(e))}let o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){let n=Object.getPrototypeOf(t);for(;null!==n&&(o=Object.getOwnPropertyDescriptor(n,e),void 0===o);)n=Object.getPrototypeOf(n)}if(void 0!==o&&!Object.prototype.hasOwnProperty.call(o,"value")){let a=this.getAdapterObserver(t,e,o);return null==a&&(a=null===(r=null!==(s=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==s?s:null===(i=o.set)||void 0===i?void 0:i.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Lr.create(t,e,o,this,!0):this.dirtyChecker.createProperty(t,e):a}return new Ur(t,e)}getAdapterObserver(t,e,n){if(this.adapters.length>0)for(const s of this.adapters){const i=s.getObserver(t,e,n,this);if(null!=i)return i}return null}cache(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Reflect.defineProperty(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}Jr.inject=[ws,Fr,Qr];function Yr(t,e){let n;function s(t,e){arguments.length>1&&(n.property=e),T.define(to.name,eo.create(e,n),t.constructor,e),tt.annotation.appendTo(t.constructor,to.keyFrom(e))}return arguments.length>1?(n={},void s(t,e)):"string"==typeof t?(n={},s):(n=void 0===t?{}:t,s)}function Xr(t){return t.startsWith(to.name)}const to={name:tt.annotation.keyFor("bindable"),keyFrom:t=>`${to.name}:${t}`,from(...t){const e={},n=Array.isArray;function s(t){e[t]=eo.create(t)}return t.forEach((function(t){n(t)?t.forEach(s):t instanceof eo?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(n=>function(t,n){e[t]=n instanceof eo?n:eo.create(t,n)}(n,t[n]))})),e},for(t){let e;const n={add(s){let i,r;return"string"==typeof s?(i=s,r={property:i}):(i=s.property,r=s),e=eo.create(i,r),T.hasOwn(to.name,t,i)||tt.annotation.appendTo(t,to.keyFrom(i)),T.define(to.name,e,t,i),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=to.name.length+1,n=[],s=K(t);let i,r,o,a=s.length,c=0;for(;--a>=0;){o=s[a],i=tt.annotation.getKeys(o).filter(Xr),r=i.length;for(let t=0;t<r;++t)n[c++]=T.getOwn(to.name,o,i[t].slice(e))}return n}};class eo{constructor(t,e,n,s,i,r){this.attribute=t,this.callback=e,this.mode=n,this.primary=s,this.property=i,this.set=r}static create(t,e={}){return new eo(W(e.attribute,q(t)),W(e.callback,t+"Changed"),W(e.mode,Cs.toView),W(e.primary,!1),W(e.property,t),W(e.set,O))}}class no{constructor(t,e,n,s,i){this.obj=t,this.propertyKey=e,this.$set=s,this.$controller=i,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1,this.type=4,this.callback=this.obj[n],this.lifecycle=i.lifecycle;const r=this.propertyChangedCallback=this.obj.propertyChanged,o=this.hasPropertyChangedCallback="function"==typeof r,a=this.shouldInterceptSet=s!==O;if(void 0!==this.callback||o||a){this.observing=!0;const n=t[e];this.currentValue=a&&void 0!==n?s(n):n,this.createGetterSetter()}else this.observing=!1}handleChange(t,e,n){this.setValue(t,n)}getValue(){return this.currentValue}setValue(t,e){var n;if(this.shouldInterceptSet&&(t=this.$set(t)),this.observing){const s=this.currentValue;if(Object.is(t,s))return;this.currentValue=t,0===this.lifecycle.batch.depth?(this.callSubscribers(t,s,e),(0==(32&e)||(16&e)>0)&&(null===(n=this.callback)||void 0===n||n.call(this.obj,t,s,e),this.hasPropertyChangedCallback&&this.propertyChangedCallback.call(this.obj,this.propertyKey,t,s,e))):this.inBatch||(this.inBatch=!0,this.oldValue=s,this.lifecycle.batch.add(this))}else this.obj[this.propertyKey]=t}subscribe(t){if(!1===this.observing){this.observing=!0;const t=this.obj[this.propertyKey];this.currentValue=this.shouldInterceptSet?this.$set(t):t,this.createGetterSetter()}this.addSubscriber(t)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.currentValue,set:t=>{this.setValue(t,0)}})}}Rs()(no);var so=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},io=function(t,e){return function(n,s){e(n,s,t)}};class ro{constructor(t,e,n,s){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=s,s)switch(t.length){case 0:this.has=this.hasOfNoneInverse;break;case 1:this.has=this.hasOfSingleInverse;break;default:this.has=this.hasOfMultipleInverse}else switch(t.length){case 0:this.has=this.hasOfNone;break;case 1:this.has=this.hasOfSingle;break;default:this.has=this.hasOfMultiple}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}hasOfMultiple(t){return this.chars.includes(t)}hasOfSingle(t){return this.chars===t}hasOfNone(t){return!1}hasOfMultipleInverse(t){return!this.chars.includes(t)}hasOfSingleInverse(t){return this.chars!==t}hasOfNoneInverse(t){return!0}}class oo{constructor(){this.parts=I,this._pattern="",this.currentRecord={},this.partsRecord={}}get pattern(){const t=this._pattern;return""===t?null:t}set pattern(t){null==t?(this._pattern="",this.parts=I):(this._pattern=t,this.parts=this.partsRecord[t])}append(t,e){const{currentRecord:n}=this;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const{currentRecord:e}=this;if(void 0!==e[t]){const{partsRecord:n}=this;void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0}}}class ao{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let s=null;for(let i=0;i<n;++i)if(s=e[i],t.equals(s.charSpec))return s;return null}append(t,e){const{patterns:n}=this;n.includes(e)||n.push(e);let s=this.findChild(t);return null==s&&(s=new ao(t,e),this.nextStates.push(s),t.repeat&&s.nextStates.push(s)),s}findMatches(t,e){const n=[],s=this.nextStates,i=s.length;let r=0,o=null,a=0,c=0;for(;a<i;++a)if(o=s[a],o.charSpec.has(t))if(n.push(o),r=o.patterns.length,c=0,o.charSpec.isSymbol)for(;c<r;++c)e.next(o.patterns[c]);else for(;c<r;++c)e.append(o.patterns[c],t);return n}}class co{constructor(t){this.text=t;const e=this.len=t.length,n=this.specs=[];for(let s=0;s<e;++s)n.push(new ro(t[s],!1,!1,!1))}eachChar(t){const{len:e,specs:n}=this;for(let s=0;s<e;++s)t(n[s])}}class lo{constructor(t){this.text="PART",this.spec=new ro(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class ho{constructor(t){this.text=t,this.spec=new ro(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class uo{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const po=lt.createInterface("ISyntaxInterpreter").withDefault(t=>t.singleton(fo));class fo{constructor(){this.rootState=new ao(null),this.initialStates=[this.rootState]}add(t){let e=0;if(Array.isArray(t)){const n=t.length;for(;e<n;++e)this.add(t[e]);return}let n=this.rootState;const s=t,i=s.pattern,r=new uo,o=this.parse(s,r),a=o.length,c=t=>{n=n.append(t,i)};for(e=0;e<a;++e)o[e].eachChar(c);n.types=r,n.isEndpoint=!0}interpret(t){const e=new oo;let n=this.initialStates;const s=t.length;for(let i=0;i<s&&(n=this.getNextStates(n,t.charAt(i),e),0!==n.length);++i);if(n.sort((t,e)=>{if(!t.isEndpoint)return e.isEndpoint?1:0;if(!e.isEndpoint)return-1;const n=t.types,s=e.types;return n.statics!==s.statics?s.statics-n.statics:n.dynamics!==s.dynamics?s.dynamics-n.dynamics:n.symbols!==s.symbols?s.symbols-n.symbols:0}),n.length>0){const t=n[0];t.charSpec.isSymbol||e.next(t.pattern),e.pattern=t.pattern}return e}getNextStates(t,e,n){const s=[];let i=null;const r=t.length;for(let o=0;o<r;++o)i=t[o],s.push(...i.findMatches(e,n));return s}parse(t,e){const n=[],s=t.pattern,i=s.length;let r=0,o=0,a="";for(;r<i;)a=s.charAt(r),t.symbols.includes(a)?r!==o?(n.push(new co(s.slice(o,r))),++e.statics,o=r):(n.push(new ho(s.slice(o,r+1))),++e.symbols,o=++r):r===o&&"P"===a&&"PART"===s.slice(r,r+4)?(o=r+=4,n.push(new lo(t.symbols)),++e.dynamics):++r;return o!==r&&(n.push(new co(s.slice(o,r))),++e.statics),n}}class go{constructor(t,e,n,s){this.rawName=t,this.rawValue=e,this.target=n,this.command=s}}const mo=lt.createInterface("IAttributePattern").noDefault(),vo=lt.createInterface("IAttributeParser").withDefault(t=>t.singleton(bo));let bo=class{constructor(t,e){this.interpreter=t,this.cache={};const n=this.patterns={};e.forEach(e=>{const s=ko.getPatternDefinitions(e.constructor);t.add(s),s.forEach(t=>{n[t.pattern]=e})})}parse(t,e){let n=this.cache[t];null==n&&(n=this.cache[t]=this.interpreter.interpret(t));const s=n.pattern;return null==s?new go(t,e,t,null):this.patterns[s][s](t,e,n.parts)}};function yo(...t){return function(e){return ko.define(t,e)}}bo=so([io(0,po),io(1,ft(mo))],bo);class wo{constructor(t){this.Type=t,this.name=void 0}register(t){Rt.singleton(mo,this.Type).register(t)}}const ko=Object.freeze({name:tt.resource.keyFor("attribute-pattern"),definitionAnnotationKey:"attribute-pattern-definitions",define(t,e){const n=new wo(e),{name:s,definitionAnnotationKey:i}=ko;return T.define(s,n,e),tt.resource.appendTo(e,s),tt.annotation.set(e,i,t),tt.annotation.appendTo(e,i),e},getPatternDefinitions:t=>tt.annotation.get(t,ko.definitionAnnotationKey)});let xo=class{"PART.PART"(t,e,n){return new go(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new go(t,e,n[0],n[2])}};xo=so([yo({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],xo);let Co=class{ref(t,e,n){return new go(t,e,"element","ref")}"PART.ref"(t,e,n){return new go(t,e,n[0],"ref")}};Co=so([yo({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],Co);let So=class{":PART"(t,e,n){return new go(t,e,n[0],"bind")}};So=so([yo({pattern:":PART",symbols:":"})],So);let Ao=class{"@PART"(t,e,n){return new go(t,e,n[0],"trigger")}};Ao=so([yo({pattern:"@PART",symbols:"@"})],Ao);class To{constructor(t,e,n,s,i){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=i,this.interceptor=this,this.isBound=!1,this.$hostScope=null,this.targetObserver=s.getObserver(e,n)}callSource(t){const e=this.$scope.overrideContext;Object.assign(e,t);const n=this.sourceExpression.evaluate(128,this.$scope,this.$hostScope,this.locator,null);for(const n in t)Reflect.deleteProperty(e,n);return n}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,n,this.interceptor),this.targetObserver.setValue(t=>this.interceptor.callSource(t),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observeProperty(t,e){}handleChange(t,e,n){}}class Eo{constructor(t,e,n,s,i){this.platform=t,this.observerLocator=e,this.obj=n,this.propertyKey=s,this.targetAttribute=i,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.type=11}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue;switch(this.oldValue=t,this.targetAttribute){case"class":t?this.obj.classList.add(this.propertyKey):this.obj.classList.remove(this.propertyKey);break;case"style":{let e="",n=t;"string"==typeof n&&n.includes("!important")&&(e="important",n=n.replace("!important","")),this.obj.style.setProperty(this.propertyKey,n,e)}}}}handleMutation(t){let e=!1;for(let n=0,s=t.length;s>n;++n){const s=t[n];if("attributes"===s.type&&s.attributeName===this.propertyKey){e=!0;break}}if(e){let t;switch(this.targetAttribute){case"class":t=this.obj.classList.contains(this.propertyKey);break;case"style":t=this.obj.style.getPropertyValue(this.propertyKey);break;default:throw new Error("Unsupported targetAttribute: "+this.targetAttribute)}if(t!==this.currentValue){const{currentValue:e}=this;this.currentValue=this.oldValue=t,this.hasChanges=!1,this.callSubscribers(t,e,0)}}}subscribe(t){this.hasSubscribers()||(this.currentValue=this.oldValue=this.obj.getAttribute(this.propertyKey),_o(this.platform.MutationObserver,this.obj,this)),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||Io(this.obj,this)}}Rs()(Eo);const _o=(t,e,n)=>{void 0===e.$eMObservers&&(e.$eMObservers=new Set),void 0===e.$mObserver&&(e.$mObserver=new t(Ro)).observe(e,{attributes:!0}),e.$eMObservers.add(n)},Io=(t,e)=>{const n=t.$eMObservers;return!(!n||!n.delete(e))&&(0===n.size&&(t.$mObserver.disconnect(),t.$mObserver=void 0),!0)},Ro=t=>{t[0].target.$eMObservers.forEach(Oo,t)};function Oo(t){t.handleMutation(this)}const Po=ke,{oneTime:$o,toView:jo,fromView:Vo}=Cs,Do=jo|$o,Lo={reusable:!1,preempt:!0};class Fo{constructor(t,e,n,s,i,r,o){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=s,this.mode=i,this.observerLocator=r,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.$hostScope=null,this.task=null,this.persistentFlags=0,this.value=void 0,this.target=e,jn.assignIdTo(this),this.$platform=o.get(Po)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,8|e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(16|e,this.$scope,this.$hostScope,this.locator,t)}handleChange(t,e,n){var s;if(!this.isBound)return;n|=this.persistentFlags;const i=this.mode,r=this.interceptor,o=this.sourceExpression,a=this.$scope,c=this.locator;if(i===Cs.fromView&&(n&=-9,n|=16),8&n){const e=this.targetObserver,l=0==(32&n)&&(8&e.type)>0;if(10082!==o.$kind||this.record.count>1){const e=0==(i&$o);e&&this.record.version++,t=o.evaluate(n,a,this.$hostScope,c,r),e&&this.record.clear(!1)}t!==this.value&&(this.value=t,l?(null===(s=this.task)||void 0===s||s.cancel(),this.task=this.$platform.domWriteQueue.queueTask(()=>{this.task=null,r.updateTarget(t,n)},Lo)):r.updateTarget(t,n))}else{if(!(16&n))throw new Error("Unexpected handleChange context in AttributeBinding");t!==o.evaluate(n,a,this.$hostScope,c,null)&&r.updateSource(t,n)}}$bind(t,e,n,s){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.persistentFlags=15367&t,this.$scope=e,this.$hostScope=n,this.projection=s;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,n,this.interceptor);let r=this.targetObserver;r||(r=this.targetObserver=new Eo(this.$platform,this.observerLocator,this.target,this.targetProperty,this.targetAttribute)),i=this.sourceExpression;const o=this.mode,a=this.interceptor;if(o&Do){const n=(o&jo)>0;a.updateTarget(this.value=i.evaluate(t,e,this.$hostScope,this.locator,n?a:null),t)}o&Vo&&(r[this.id]|=16,r.subscribe(a)),this.isBound=!0}$unbind(t){var e;if(!this.isBound)return;this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=this.$hostScope=null,this.value=void 0;const n=this.targetObserver;n.unsubscribe&&(n.unsubscribe(this.interceptor),n[this.id]&=-17),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.record.clear(!0),this.isBound=!1}}jn(Fo);const{toView:qo}=Cs,No={reusable:!1,preempt:!0};class Mo{constructor(t,e,n,s,i,r,o){this.observerLocator=t,this.interpolation=e,this.target=n,this.targetProperty=s,this.mode=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.task=null,this.targetObserver=t.getAccessor(n,s);const a=e.expressions,c=this.partBindings=Array(a.length);for(let e=0,i=a.length;e<i;++e)c[e]=new Bo(a[e],n,s,r,t,this)}updateTarget(t,e){var n;const s=this.partBindings,i=this.interpolation.parts,r=s.length;let o="";if(1===r)o=i[0]+s[0].value+i[1];else{o=i[0];for(let t=0;r>t;++t)o+=s[t].value+i[t+1]}const a=this.targetObserver;0==(32&e)&&(8&a.type)>0?(null===(n=this.task)||void 0===n||n.cancel(),this.task=this.taskQueue.queueTask(()=>{this.task=null,a.setValue(o,e,this.target,this.targetProperty)},No)):a.setValue(o,e,this.target,this.targetProperty)}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const s=this.partBindings;for(let i=0,r=s.length;r>i;++i)s[i].$bind(t,e,n);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const n=this.partBindings;for(let e=0,s=n.length;e<s;++e)n[e].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class Bo{constructor(t,e,n,s,i,r){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=s,this.observerLocator=i,this.owner=r,this.interceptor=this,this.mode=Cs.toView,this.value="",this.$hostScope=null,this.task=null,this.isBound=!1}handleChange(t,e,n){if(!this.isBound)return;const s=this.sourceExpression,i=this.record;if(!(10082===s.$kind&&1===i.count)){const e=(this.mode&qo)>0;e&&i.version++,t=s.evaluate(n,this.$scope,this.$hostScope,this.locator,e?this.interceptor:null),e&&i.clear(!1)}t!=this.value&&(this.value=t,this.cRecord.clear(),t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,n))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.$hostScope=n,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,n,this.interceptor);const s=this.value=this.sourceExpression.evaluate(t,e,n,this.locator,(this.mode&qo)>0?this.interceptor:null);s instanceof Array&&this.observeCollection(s)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null,this.record.clear(!0),this.cRecord.clear(!0))}}jn(Bo);class Uo{constructor(t,e,n,s,i=!1){this.sourceExpression=t,this.targetProperty=e,this.observerLocator=n,this.locator=s,this.toBindingContext=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.task=null,this.target=null,jn.assignIdTo(this)}handleChange(t,e,n){if(this.isBound){if(8&n){const t=this.target,e=this.targetProperty,s=t[e];this.record.version++;const i=this.sourceExpression.evaluate(n,this.$scope,this.$hostScope,this.locator,this.interceptor);return this.record.clear(!1),void(i!==s&&(t[e]=i))}throw new Error("Unexpected handleChange context in LetBinding")}}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n,this.target=this.toBindingContext?(null!=n?n:e).bindingContext:(null!=n?n:e).overrideContext;const s=this.sourceExpression;s.hasBind&&s.bind(t,e,n,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(32|t,e,n,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null,this.record.clear(!0),this.isBound=!1}}jn(Uo);const{oneTime:zo,toView:Ho,fromView:Wo}=Cs,Ko=Ho|zo,Go={reusable:!1,preempt:!0};class Qo{constructor(t,e,n,s,i,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=s,this.observerLocator=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,jn.assignIdTo(this)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.$hostScope,this.locator,t)}handleChange(t,e,n){var s;if(!this.isBound)return;n|=this.persistentFlags;const i=this.targetObserver,r=this.interceptor,o=this.sourceExpression,a=this.$scope,c=this.locator;if((8&n)>0){const e=0==(32&n)&&(8&i.type)>0,l=this.record;if(10082!==o.$kind||l.count>1){const e=this.mode>zo;e&&l.version++,t=o.evaluate(n,a,this.$hostScope,c,r),e&&l.clear(!1)}e?(null===(s=this.task)||void 0===s||s.cancel(),this.task=this.taskQueue.queueTask(()=>{r.updateTarget(t,n),this.task=null},Go)):r.updateTarget(t,n)}else{if(!((16&n)>0))throw new Error("Unexpected handleChange context in PropertyBinding");t!==o.evaluate(n,a,this.$hostScope,c,null)&&r.updateSource(t,n)}}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}t|=4,this.persistentFlags=15367&t,this.$scope=e,this.$hostScope=n;let s=this.sourceExpression;s.hasBind&&s.bind(t,e,n,this.interceptor);const i=this.mode;let r=this.targetObserver;if(!r){const t=this.observerLocator;r=i&Wo?t.getObserver(this.target,this.targetProperty):t.getAccessor(this.target,this.targetProperty),this.targetObserver=r}s=this.sourceExpression;const o=this.interceptor,a=(i&Ho)>0;i&Ko&&o.updateTarget(s.evaluate(t,e,this.$hostScope,this.locator,a?o:null),t),i&Wo&&(r.subscribe(o),a||o.updateSource(r.getValue(this.target,this.targetProperty),t),r[this.id]|=16),this.isBound=!0}$unbind(t){if(!this.isBound)return;this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null;const e=this.targetObserver,n=this.task;e.unsubscribe&&(e.unsubscribe(this.interceptor),e[this.id]&=-17),null!=n&&(n.cancel(),this.task=null),this.record.clear(!0),this.isBound=!1}}jn(Qo);class Zo{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,n,this),this.sourceExpression.assign(16|t,this.$scope,n,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.$hostScope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.$hostScope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null,this.isBound=!1}observeProperty(t,e){}handleChange(t,e,n){}}const Jo=lt.createInterface("IAppTask").noDefault();class Yo{constructor(t){this.key=t,this.slot=void 0,this.callback=void 0,this.container=void 0}static with(t){return new Yo(t)}beforeCreate(){return this.at("beforeCreate")}hydrating(){return this.at("hydrating")}hydrated(){return this.at("hydrated")}beforeActivate(){return this.at("beforeActivate")}afterActivate(){return this.at("afterActivate")}beforeDeactivate(){return this.at("beforeDeactivate")}afterDeactivate(){return this.at("afterDeactivate")}at(t){return this.slot=t,this}call(t){return this.callback=t,this}register(t){return this.container=t.register(Rt.instance(Jo,this))}run(){return(0,this.callback)(this.container.get(this.key))}}const Xo=Yo;var ta=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};function ea(t){return t.startsWith(na.name)}const na={name:tt.annotation.keyFor("children-observer"),keyFrom:t=>`${na.name}:${t}`,from(...t){const e={},n=Array.isArray;function s(t){e[t]=ia.create(t)}return t.forEach((function(t){n(t)?t.forEach(s):t instanceof ia?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(n=>function(t,n){e[t]=ia.create(t,n)}(n,t))})),e},getAll(t){const e=na.name.length+1,n=[],s=K(t);let i,r,o,a=s.length,c=0;for(;--a>=0;){o=s[a],i=tt.annotation.getKeys(o).filter(ea),r=i.length;for(let t=0;t<r;++t)n[c++]=T.getOwn(na.name,o,i[t].slice(e))}return n}},sa={childList:!0};class ia{constructor(t,e,n,s,i,r){this.callback=t,this.property=e,this.options=n,this.query=s,this.filter=i,this.map=r}static create(t,e={}){var n;return new ia(W(e.callback,t+"Changed"),W(e.property,t),null!==(n=e.options)&&void 0!==n?n:sa,e.query,e.filter,e.map)}}let ra=class{constructor(t,e,n,s,i=oa,r=aa,o=ca,a){this.controller=t,this.obj=e,this.propertyKey=n,this.query=i,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.callback=e[s],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.tryStartObserving(),this.children}setValue(t){}subscribe(t){this.tryStartObserving(),this.addSubscriber(t)}tryStartObserving(){if(!this.observing){this.observing=!0,this.children=ha(this.controller,this.query,this.filter,this.map);new this.controller.host.ownerDocument.defaultView.MutationObserver(()=>{this.onChildrenChanged()}).observe(this.controller.host,this.options)}}onChildrenChanged(){this.children=ha(this.controller,this.query,this.filter,this.map),void 0!==this.callback&&this.callback.call(this.obj),this.callSubscribers(this.children,void 0,8)}};function oa(t){return t.host.childNodes}function aa(t,e,n){return!!n}function ca(t,e,n){return n}ra=ta([Rs()],ra);const la={optional:!0};function ha(t,e,n,s){var i;const r=e(t),o=[];for(let t=0,e=r.length;t<e;++t){const e=r[t],a=va.for(e,la),c=null!==(i=null==a?void 0:a.viewModel)&&void 0!==i?i:null;n(e,a,c)&&o.push(s(e,a,c))}return o}const ua=I,pa={name:tt.annotation.keyFor("watch"),add(t,e){let n=T.getOwn(pa.name,t);null==n&&T.define(pa.name,n=[],t),n.push(e)},getAnnotation(t){var e;return null!==(e=T.getOwn(pa.name,t))&&void 0!==e?e:ua}};function da(t){return function(e){return va.define(t,e)}}const fa=new WeakMap;class ga{constructor(t,e,n,s,i,r,o,a,c,l,h,u,p,d,f,g,m,v,b,y){this.Type=t,this.name=e,this.aliases=n,this.key=s,this.cache=i,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=c,this.needsCompile=l,this.surrogates=h,this.bindables=u,this.childrenObservers=p,this.containerless=d,this.isStrictBinding=f,this.shadowOptions=g,this.hasSlots=m,this.enhance=v,this.projectionsMap=b,this.watches=y}static create(t,e=null){if(null===e){const n=t;if("string"==typeof n)throw new Error("Cannot create a custom element definition with only a name and no type: "+t);const s=it("name",n,va.generateName);return e="function"==typeof n.Type?n.Type:va.generateType(F(s)),new ga(e,s,H(n.aliases),it("key",n,()=>va.keyFrom(s)),it("cache",n,()=>0),it("template",n,()=>null),H(n.instructions),H(n.dependencies),it("injectable",n,()=>null),it("needsCompile",n,()=>!0),H(n.surrogates),to.from(n.bindables),na.from(n.childrenObservers),it("containerless",n,()=>!1),it("isStrictBinding",n,()=>!1),it("shadowOptions",n,()=>null),it("hasSlots",n,()=>!1),it("enhance",n,()=>!1),it("projectionsMap",n,()=>new Map),it("watches",n,()=>I))}if("string"==typeof t)return new ga(e,t,H(va.getAnnotation(e,"aliases"),e.aliases),va.keyFrom(t),st("cache",e,()=>0),st("template",e,()=>null),H(va.getAnnotation(e,"instructions"),e.instructions),H(va.getAnnotation(e,"dependencies"),e.dependencies),st("injectable",e,()=>null),st("needsCompile",e,()=>!0),H(va.getAnnotation(e,"surrogates"),e.surrogates),to.from(...to.getAll(e),va.getAnnotation(e,"bindables"),e.bindables),na.from(...na.getAll(e),va.getAnnotation(e,"childrenObservers"),e.childrenObservers),st("containerless",e,()=>!1),st("isStrictBinding",e,()=>!1),st("shadowOptions",e,()=>null),st("hasSlots",e,()=>!1),st("enhance",e,()=>!1),st("projectionsMap",e,()=>new Map),H(pa.getAnnotation(e),e.watches));const n=it("name",t,va.generateName);return new ga(e,n,H(va.getAnnotation(e,"aliases"),t.aliases,e.aliases),va.keyFrom(n),nt("cache",t,e,()=>0),nt("template",t,e,()=>null),H(va.getAnnotation(e,"instructions"),t.instructions,e.instructions),H(va.getAnnotation(e,"dependencies"),t.dependencies,e.dependencies),nt("injectable",t,e,()=>null),nt("needsCompile",t,e,()=>!0),H(va.getAnnotation(e,"surrogates"),t.surrogates,e.surrogates),to.from(...to.getAll(e),va.getAnnotation(e,"bindables"),e.bindables,t.bindables),na.from(...na.getAll(e),va.getAnnotation(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),nt("containerless",t,e,()=>!1),nt("isStrictBinding",t,e,()=>!1),nt("shadowOptions",t,e,()=>null),nt("hasSlots",t,e,()=>!1),nt("enhance",t,e,()=>!1),nt("projectionsMap",t,e,()=>new Map),H(t.watches,pa.getAnnotation(e),e.watches))}static getOrCreate(t){if(t instanceof ga)return t;if(fa.has(t))return fa.get(t);const e=ga.create(t);return fa.set(t,e),T.define(va.name,e,e.Type),e}register(t){const{Type:e,key:n,aliases:s}=this;Rt.transient(n,e).register(t),Rt.aliasTo(n,e).register(t),Ae(s,va,n,t)}}const ma={name:void 0,searchParents:!1,optional:!1},va={name:tt.resource.keyFor("custom-element"),keyFrom:t=>`${va.name}:${t}`,isType:t=>"function"==typeof t&&T.hasOwn(va.name,t),for(t,e=ma){if(void 0===e.name&&!0!==e.searchParents){const n=T.getOwn(va.name,t);if(void 0===n){if(!0===e.optional)return null;throw new Error("The provided node is not a custom element or containerless host.")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=T.getOwn(va.name,t);if(void 0===n)throw new Error("The provided node is not a custom element or containerless host.");return n.is(e.name)?n:void 0}let n=t,s=!1;for(;null!==n;){const t=T.getOwn(va.name,n);if(void 0!==t&&(s=!0,t.is(e.name)))return t;n=$c(n)}if(s)return;throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")}let n=t;for(;null!==n;){const t=T.getOwn(va.name,n);if(void 0!==t)return t;n=$c(n)}throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")},define(t,e){const n=ga.create(t,e);return T.define(va.name,n,n.Type),T.define(va.name,n,n),tt.resource.appendTo(n.Type,va.name),n.Type},getDefinition(t){const e=T.getOwn(va.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){T.define(tt.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>T.getOwn(tt.annotation.keyFor(e),t),generateName:function(){let t=0;return function(){return"unnamed-"+ ++t}}(),createInjectable(){const t=function(e,n,s){return lt.getOrCreateAnnotationParamTypes(e)[s]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,s=e){const i=class{};return t.value=n,Reflect.defineProperty(i,"name",t),s!==e&&Object.assign(i.prototype,s),i}}()};function ba(t){return function(e){return ka.define(t,e)}}function ya(t){return function(e){return ka.define("string"==typeof t?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class wa{constructor(t,e,n,s,i,r,o,a,c){this.Type=t,this.name=e,this.aliases=n,this.key=s,this.defaultBindingMode=i,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=c}static create(t,e){let n,s;return"string"==typeof t?(n=t,s={name:n}):(n=t.name,s=t),new wa(e,W(ka.getAnnotation(e,"name"),n),H(ka.getAnnotation(e,"aliases"),s.aliases,e.aliases),ka.keyFrom(n),W(ka.getAnnotation(e,"defaultBindingMode"),s.defaultBindingMode,e.defaultBindingMode,Cs.toView),W(ka.getAnnotation(e,"isTemplateController"),s.isTemplateController,e.isTemplateController,!1),to.from(...to.getAll(e),ka.getAnnotation(e,"bindables"),e.bindables,s.bindables),W(ka.getAnnotation(e,"noMultiBindings"),s.noMultiBindings,e.noMultiBindings,!1),H(pa.getAnnotation(e),e.watches))}register(t){const{Type:e,key:n,aliases:s}=this;Rt.transient(n,e).register(t),Rt.aliasTo(n,e).register(t),Ae(s,ka,n,t)}}const ka={name:tt.resource.keyFor("custom-attribute"),keyFrom:t=>`${ka.name}:${t}`,isType:t=>"function"==typeof t&&T.hasOwn(ka.name,t),for:(t,e)=>T.getOwn(ka.keyFrom(e),t),define(t,e){const n=wa.create(t,e);return T.define(ka.name,n,n.Type),T.define(ka.name,n,n),tt.resource.appendTo(e,ka.name),n.Type},getDefinition(t){const e=T.getOwn(ka.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){T.define(tt.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>T.getOwn(tt.annotation.keyFor(e),t)},xa=lt.createInterface("IViewFactory").noDefault();class Ca{constructor(t,e,n,s=null){this.name=t,this.context=e,this.contentType=n,this.projectionScope=s,this.isCaching=!1,this.cache=null,this.cacheSize=-1}setCacheSize(t,e){t&&("*"===t?t=Ca.maxCacheSize:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t,e){const n=this.cache;let s;return null!=n&&n.length>0?(s=n.pop(),s):(s=gc.forSyntheticView(null,this.context,this,t,e),s)}}Ca.maxCacheSize=65535;const Sa=new WeakSet;function Aa(t){return!Sa.has(t)}function Ta(t){return Sa.add(t),ga.create(t)}const Ea={name:tt.resource.keyFor("views"),has:t=>"function"==typeof t&&(T.hasOwn(Ea.name,t)||"$views"in t),get(t){if("function"==typeof t&&"$views"in t){const e=t.$views.filter(Aa).map(Ta);for(const n of e)Ea.add(t,n)}let e=T.getOwn(Ea.name,t);return void 0===e&&T.define(Ea.name,e=[],t),e},add(t,e){const n=ga.create(e);let s=T.getOwn(Ea.name,t);return void 0===s?T.define(Ea.name,s=[n],t):s.push(n),s}};const _a=lt.createInterface("IViewLocator").withDefault(t=>t.singleton(Ia));class Ia{constructor(){this.modelInstanceToBoundComponent=new WeakMap,this.modelTypeToUnboundComponent=new Map}getViewComponentForObject(t,e){if(t){const n=Ea.has(t.constructor)?Ea.get(t.constructor):[],s="function"==typeof e?e(t,n):this.getViewName(n,e);return this.getOrCreateBoundComponent(t,n,s)}return null}getOrCreateBoundComponent(t,e,n){let s,i=this.modelInstanceToBoundComponent.get(t);if(void 0===i?(i={},this.modelInstanceToBoundComponent.set(t,i)):s=i[n],void 0===s){const r=this.getOrCreateUnboundComponent(t,e,n);s=va.define(va.getDefinition(r),class extends r{constructor(){super(t)}}),i[n]=s}return s}getOrCreateUnboundComponent(t,e,n){let s,i=this.modelTypeToUnboundComponent.get(t.constructor);if(void 0===i?(i={},this.modelTypeToUnboundComponent.set(t.constructor,i)):s=i[n],void 0===s){s=va.define(this.getView(e,n),class{constructor(t){this.viewModel=t}define(t,e,n){const s=this.viewModel;if(t.scope=Ie.fromParent(t.scope,s),void 0!==s.define)return s.define(t,e,n)}});const r=s.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,n){return this.viewModel.binding(t,e,n)}),"bound"in t&&(r.bound=function(t,e,n){return this.viewModel.bound(t,e,n)}),"attaching"in t&&(r.attaching=function(t,e,n){return this.viewModel.attaching(t,e,n)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,n){return this.viewModel.detaching(t,e,n)}),"unbinding"in t&&(r.unbinding=function(t,e,n){return this.viewModel.unbinding(t,e,n)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),i[n]=s}return s}getViewName(t,e){return e||(1===t.length?t[0].name:"default-view")}getView(t,e){const n=t.find(t=>t.name===e);if(void 0===n)throw new Error("Could not find view: "+e);return n}}lt.createInterface("IProjections").noDefault();var Ra;!function(t){t[t.Projection=0]="Projection",t[t.Fallback=1]="Fallback"}(Ra||(Ra={}));class Oa{constructor(t,e,n){this.name=t,this.type=e,this.projectionContext=n}}class Pa{constructor(t,e=null){this.content=t,this.scope=e}}class $a{constructor(t,e){this.scope=t,this.projections=e}}const ja=lt.createInterface("IProjectionProvider").withDefault(t=>t.singleton(Da)),Va=new WeakMap;class Da{registerProjections(t,e){for(const[n,s]of t)Va.set(n,new $a(e,s))}getProjectionFor(t){var e;return null!==(e=Va.get(t))&&void 0!==e?e:null}}class La{constructor(t,e){this.factory=t,this.hostScope=null,this.view=t.create().setLocation(e),this.isProjection=t.contentType===Ra.Projection,this.outerScope=t.projectionScope}static get inject(){return[xa,Rc]}binding(t,e,n){this.hostScope=this.$controller.scope.parentScope}attaching(t,e,n){var s;const{$controller:i}=this;return this.view.activate(t,i,n,null!==(s=this.outerScope)&&void 0!==s?s:this.hostScope,this.hostScope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}da({name:"au-slot",template:null,containerless:!0})(La);const Fa=new WeakMap,qa=new WeakMap,Na=new WeakMap;function Ma(t,e,n){const s=ga.getOrCreate(t);if(null!==s.injectable)return new Ua(s,e);if(null==n){let t=Fa.get(s);void 0===t&&Fa.set(s,t=new WeakMap);let n=t.get(e);return void 0===n&&t.set(e,n=new Ua(s,e)),n}let i=qa.get(s);void 0===i&&qa.set(s,i=new WeakMap);let r=i.get(e);void 0===r&&i.set(e,r=new WeakMap);let o=r.get(n);return void 0===o&&r.set(n,o=new Ua(s,e)),o}const Ba=new WeakMap;class Ua{constructor(t,e){this.definition=t,this.parentContainer=e,this.viewModelProvider=void 0,this.fragment=null,this.factory=void 0,this.isCompiled=!1,this.renderers=Object.create(null),this.compiledDefinition=void 0;const n=this.container=e.createChild(),s=n.getAll(vl);for(let t=0;t<s.length;++t){const e=s[t];this.renderers[e.instructionType]=e}this.projectionProvider=n.get(ja);const i=this.platform=n.get(Po);n.registerResolver(xa,this.factoryProvider=new za,!0),n.registerResolver(Ac,this.parentControllerProvider=new Ot("IController"),!0),n.registerResolver(Jc,this.instructionProvider=new Ot("IInstruction"),!0),n.registerResolver(Rc,this.renderLocationProvider=new Ot("IRenderLocation"),!0);const r=this.elementProvider=new Ot("ElementResolver");n.registerResolver(_c,r),n.registerResolver(i.Node,r),n.registerResolver(i.Element,r),n.registerResolver(i.HTMLElement,r),n.register(...t.dependencies)}has(t,e){return this.container.has(t,e)}get(t){return this.container.get(t)}getAll(t){return this.container.getAll(t)}register(...t){return this.container.register(...t)}registerResolver(t,e){return this.container.registerResolver(t,e)}registerTransformer(t,e){return this.container.registerTransformer(t,e)}getResolver(t,e){return this.container.getResolver(t,e)}getFactory(t){return this.container.getFactory(t)}registerFactory(t,e){this.container.registerFactory(t,e)}createChild(){return this.container.createChild()}find(t,e){return this.container.find(t,e)}create(t,e){return this.container.create(t,e)}disposeResolvers(){this.container.disposeResolvers()}compile(t){let e;if(this.isCompiled)return this;this.isCompiled=!0;const n=this.definition;if(n.needsCompile){const s=this.container,i=s.get(ml);e=this.compiledDefinition=i.compile(n,s,t)}else e=this.compiledDefinition=n;if(e.register(this),Na.has(e))this.fragment=Na.get(e);else{const t=this.platform.document,n=e.template;if(null===n||!0===this.definition.enhance)this.fragment=null;else if(n instanceof this.platform.Node)"TEMPLATE"===n.nodeName?this.fragment=t.adoptNode(n.content):(this.fragment=t.adoptNode(t.createDocumentFragment())).appendChild(n);else{const e=t.createElement("template");t.adoptNode(e.content),"string"==typeof n&&(e.innerHTML=n),this.fragment=e.content}Na.set(e,this.fragment)}return this}getViewFactory(t,e,n){let s=this.factory;return void 0===s&&(void 0===t&&(t=this.definition.name),s=this.factory=new Ca(t,this,e,n)),s}beginChildComponentOperation(t){const e=this.definition;return null!==e.injectable&&(void 0===this.viewModelProvider&&this.container.registerResolver(e.injectable,this.viewModelProvider=new Ot("definition.injectable")),this.viewModelProvider.prepare(t)),this}createNodes(){if(!0===this.compiledDefinition.enhance)return new Dc(this.platform,this.compiledDefinition.template);if(null===this.fragment){let t=Ba.get(this.platform);return void 0===t&&Ba.set(this.platform,t=new Dc(this.platform,this.platform.document.createDocumentFragment())),t}return new Dc(this.platform,this.fragment.cloneNode(!0))}getComponentFactory(t,e,n,s,i){return void 0!==t&&this.parentControllerProvider.prepare(t),void 0!==e&&this.elementProvider.prepare(e),void 0!==n&&this.instructionProvider.prepare(n),void 0!==i&&this.renderLocationProvider.prepare(i),void 0!==s&&this.factoryProvider.prepare(s),this}createComponent(t){return this.container.get(t)}render(t,e,n,s,i){if(n.length!==s.instructions.length)throw new Error(`The compiled template is not aligned with the render instructions. There are ${n.length} targets and ${s.instructions.length} instructions.`);for(let i=0;i<n.length;++i)this.renderChildren(t,s.instructions[i],e,n[i]);null!=i&&this.renderChildren(t,s.surrogates,e,i)}renderChildren(t,e,n,s){for(let i=0;i<e.length;++i){const r=e[i];this.renderers[r.type].render(t,this,n,s,r)}}dispose(){this.elementProvider.dispose()}registerProjections(t,e){this.projectionProvider.registerProjections(t,e)}getProjectionFor(t){return this.projectionProvider.getProjectionFor(t)}}class za{constructor(){this.factory=null}prepare(t){this.factory=t}get $isResolver(){return!0}resolve(t,e){const n=this.factory;if(null===n)throw new Error("Cannot resolve ViewFactory before the provider was prepared.");if("string"!=typeof n.name||0===n.name.length)throw new Error("Cannot resolve ViewFactory without a (valid) name.");return n}dispose(){this.factory=null}}class Ha{constructor(t){this.obj=t,this.currentValue="",this.oldValue="",this.doNotCache=!0,this.nameIndex={},this.version=0,this.hasChanges=!1,this.isActive=!1,this.type=10}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue,e=this.nameIndex;let n=this.version;this.oldValue=t;const s=Wa(t);if(s.length>0&&this.addClassesAndUpdateIndex(s),this.version+=1,0===n)return;n-=1;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t]===n&&this.obj.classList.remove(t)}}addClassesAndUpdateIndex(t){const e=this.obj;for(let n=0,s=t.length;n<s;n++){const s=t[n];0!==s.length&&(this.nameIndex[s]=this.version,e.classList.add(s))}}}function Wa(t){if("string"==typeof t)return Ka(t);if("object"!=typeof t)return I;if(t instanceof Array){const e=t.length;if(e>0){const n=[];for(let s=0;s<e;++s)n.push(...Wa(t[s]));return n}return I}const e=[];for(const n in t)Boolean(t[n])&&(n.includes(" ")?e.push(...Ka(n)):e.push(n));return e}function Ka(t){const e=t.match(/\S+/g);return null===e?I:e}var Ga=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Qa=function(t,e){return function(n,s){e(n,s,t)}};const Za=lt.createInterface("IShadowDOMStyleFactory").withDefault(t=>t.cachedCallback(t=>nc.supported(t.get(Po))?t.get(Ya):t.get(Xa)));class Ja{constructor(t){this.css=t}register(t){const e=t.get(ec),n=t.get(Za);t.register(Rt.instance(tc,n.createStyles(this.css,e)))}}let Ya=class{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new nc(this.p,t,this.cache,e)}};Ya=Ga([Qa(0,Po)],Ya);let Xa=class{constructor(t){this.p=t}createStyles(t,e){return new sc(this.p,t,e)}};Xa=Ga([Qa(0,Po)],Xa);const tc=lt.createInterface("IShadowDOMStyles").noDefault(),ec=lt.createInterface("IShadowDOMGlobalStyles").withDefault(t=>t.instance({applyTo:O}));class nc{constructor(t,e,n,s=null){this.sharedStyles=s,this.styleSheets=e.map(e=>{let s;return e instanceof t.CSSStyleSheet?s=e:(s=n.get(e),void 0===s&&(s=new t.CSSStyleSheet,s.replaceSync(e),n.set(e,s))),s})}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class sc{constructor(t,e,n=null){this.p=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.p;for(let s=e.length-1;s>-1;--s){const i=n.document.createElement("style");i.innerHTML=e[s],t.prepend(i)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const ic={shadowDOM:t=>Xo.with(ht).beforeCreate().call(e=>{if(null!=t.sharedStyles){const n=e.get(Za);e.register(Rt.instance(ec,n.createStyles(t.sharedStyles,null)))}})},{enter:rc,exit:oc}=Hi,{wrap:ac,unwrap:cc}=Dr;class lc{constructor(t,e,n,s,i){this.obj=t,this.observerLocator=e,this.get=n,this.cb=s,this.useProxy=i,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,jn.assignIdTo(this)}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.record.clear(!0),this.cRecord.clear(!0))}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,n=this.compute();Object.is(n,e)||this.cb.call(t,n,e,t)}compute(){this.running=!0,this.record.version++;try{return rc(this),this.value=cc(this.get.call(void 0,this.useProxy?ac(this.obj):this.obj,this))}finally{this.record.clear(!1),this.cRecord.clear(!1),this.running=!1,oc(this)}}}class hc{constructor(t,e,n,s,i){this.scope=t,this.locator=e,this.observerLocator=n,this.expression=s,this.callback=i,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext,jn.assignIdTo(this)}handleChange(t){const e=this.expression,n=this.obj,s=this.value;10082===e.$kind&&1===this.record.count||(this.record.version++,t=e.evaluate(0,this.scope,null,this.locator,this),this.record.clear(!1)),Object.is(t,s)||(this.value=t,this.callback.call(n,t,s,n))}$bind(){this.isBound||(this.isBound=!0,this.record.version++,this.value=this.expression.evaluate(0,this.scope,null,this.locator,this),this.record.clear(!1))}$unbind(){this.isBound&&(this.isBound=!1,this.record.clear(!0),this.value=void 0)}}function uc(t){t.dispose()}var pc;jn(lc),jn(hc),function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(pc||(pc={}));const dc={optional:!0},fc=new WeakMap;class gc{constructor(t,e,n,s,i,r,o,a){switch(this.root=t,this.container=e,this.vmKind=n,this.flags=s,this.definition=i,this.viewFactory=r,this.viewModel=o,this.host=a,this.id=B("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.hostScope=null,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.context=null,this.location=null,this.state=0,this.logger=null,this.debug=!1,this.fullyNamed=!1,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.activatingStack=0,this.detachingStack=0,this.unbindingStack=0,null===t&&e.has(Tc,!0)&&(this.root=e.get(Tc)),this.platform=e.get(Po),this.lifecycle=e.get(ws),n){case 1:case 0:this.hooks=new wc(o);break;case 2:this.hooks=wc.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?this.parent.name+"[view]":`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return fc.get(t)}static getCachedOrThrow(t){const e=gc.getCached(t);if(void 0===e)throw new Error("There is no cached controller for the provided ViewModel: "+String(t));return e}static forCustomElement(t,e,n,s,i,r=0,o=!0,a){if(fc.has(n))return fc.get(n);a=null!=a?a:va.getDefinition(n.constructor);const c=new gc(t,e,0,r,a,null,n,s);return fc.set(n,c),o&&c.hydrateCustomElement(e,i),c}static forCustomAttribute(t,e,n,s,i=0){if(fc.has(n))return fc.get(n);const r=ka.getDefinition(n.constructor),o=new gc(t,e,1,i,r,null,n,s);return fc.set(n,o),o.hydrateCustomAttribute(),o}static forSyntheticView(t,e,n,s=0,i){const r=new gc(t,e,2,s,null,n,null,null);return r.parent=null!=i?i:null,r.hydrateSynthetic(e),r}hydrateCustomElement(t,e){var n;this.logger=t.get(se).root,this.debug=this.logger.config.level<=1,this.debug&&(this.logger=this.logger.scopeTo(this.name));let s=this.definition;const i=this.flags,r=this.viewModel;if(this.scope=Ie.create(r,null,!0),s.watches.length>0&&yc(this,this.container,s,r),vc(this,s,i,r),function(t,e,n,s){const i=e.childrenObservers,r=Object.getOwnPropertyNames(i),o=r.length;if(o>0){const e=mc(s);let n;for(let a=0;a<o;++a)if(n=r[a],null==e[n]){const r=i[n];e[n]=new ra(t,s,n,r.callback,r.query,r.filter,r.map,r.options)}}}(this,s,0,r),this.hooks.hasDefine){this.debug&&this.logger.trace("invoking define() hook");const e=r.define(this,t,s);void 0!==e&&e!==s&&(s=ga.getOrCreate(e))}const o=this.context=Ma(s,t,null==e?void 0:e.projections);s.register(o),null!==s.injectable&&o.beginChildComponentOperation(r),(null===(n=this.root)||void 0===n?void 0:n.controller)!==this&&(this.hydrate(e),this.hydrateChildren())}hydrate(t){this.hooks.hasHydrating&&(this.debug&&this.logger.trace("invoking hasHydrating() hook"),this.viewModel.hydrating(this));const e=this.context.compile(t),{projectionsMap:n,shadowOptions:s,isStrictBinding:i,hasSlots:r,containerless:o}=e.compiledDefinition;if(e.registerProjections(n,this.scope),n.clear(),this.isStrictBinding=i,null!==(this.hostController=va.for(this.host,dc))&&(this.host=this.platform.document.createElement(this.context.definition.name)),T.define(va.name,this,this.host),null!==s||r){if(o)throw new Error("You cannot combine the containerless custom element option with Shadow DOM.");T.define(va.name,this,this.shadowRoot=this.host.attachShadow(null!=s?s:kc)),this.mountTarget=2}else o?(T.define(va.name,this,this.location=jc(this.host)),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=e.createNodes(),this.hooks.hasHydrated&&(this.debug&&this.logger.trace("invoking hasHydrated() hook"),this.viewModel.hydrated(this))}hydrateChildren(){const t=this.nodes.findTargets();this.context.render(this.flags,this,t,this.context.compiledDefinition,this.host),this.hooks.hasCreated&&(this.debug&&this.logger.trace("invoking created() hook"),this.viewModel.created(this))}hydrateCustomAttribute(){const t=this.definition,e=this.viewModel;t.watches.length>0&&yc(this,this.container,t,e),vc(this,t,this.flags,e),e.$controller=this}hydrateSynthetic(t){this.context=t;const e=t.compile(null),n=e.compiledDefinition;this.isStrictBinding=n.isStrictBinding;const s=(this.nodes=e.createNodes()).findTargets();e.render(this.flags,this,s,n,void 0)}activate(t,e,n,s,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(this.name+" trying to activate a controller that is disposed.");default:throw new Error(`${this.name} unexpected state: ${Sc(this.state)}.`)}switch(this.parent=e,this.debug&&!this.fullyNamed&&(this.fullyNamed=!0,this.logger=this.context.get(se).root.scopeTo(this.name),this.logger.trace("activate()")),this.hostScope=null!=i?i:null,n|=32,this.vmKind){case 0:this.scope.parentScope=null!=s?s:null;break;case 1:this.scope=null!=s?s:null;break;case 2:if(null==s)throw new Error("Scope is null or undefined");this.hasLockedScope||(this.scope=s)}if(this.isStrictBinding&&(n|=4),this.$initiator=t,this.$flags=n,this.enterActivating(),this.hooks.hasBinding){this.debug&&this.logger.trace("binding()");const t=this.viewModel.binding(this.$initiator,this.parent,this.$flags);if(t instanceof Promise)return this.ensurePromise(),t.then(()=>{this.bind()}).catch(t=>{this.reject(t)}),this.$promise}return this.bind(),this.$promise}bind(){if(this.debug&&this.logger.trace("bind()"),null!==this.bindings)for(let t=0;t<this.bindings.length;++t)this.bindings[t].$bind(this.$flags,this.scope,this.hostScope);if(this.hooks.hasBound){this.debug&&this.logger.trace("bound()");const t=this.viewModel.bound(this.$initiator,this.parent,this.$flags);if(t instanceof Promise)return this.ensurePromise(),void t.then(()=>{this.attach()}).catch(t=>{this.reject(t)})}this.attach()}append(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:for(let e=0;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location)}}attach(){var t;if(this.debug&&this.logger.trace("attach()"),null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.append(this.host);break;case 3:this.hostController.append(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null===(t=this.definition)||void 0===t?void 0:t.enhance);break;case 2:(this.context.has(tc,!1)?this.context.get(tc):this.context.get(ec)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break;case 3:this.nodes.insertBefore(this.location)}if(this.hooks.hasAttaching){this.debug&&this.logger.trace("attaching()");const t=this.viewModel.attaching(this.$initiator,this.parent,this.$flags);t instanceof Promise&&(this.ensurePromise(),this.enterActivating(),t.then(()=>{this.leaveActivating()}).catch(t=>{this.reject(t)}))}if(null!==this.children)for(let t=0;t<this.children.length;++t)this.children[t].activate(this.$initiator,this,this.$flags,this.scope,this.hostScope);this.leaveActivating()}deactivate(t,e,n){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`${this.name} unexpected state: ${Sc(this.state)}.`)}if(this.debug&&this.logger.trace("deactivate()"),this.$initiator=t,this.$flags=n,t===this&&this.enterDetaching(),null!==this.children)for(let e=0;e<this.children.length;++e)this.children[e].deactivate(t,this,n);if(this.hooks.hasDetaching){this.debug&&this.logger.trace("detaching()");const e=this.viewModel.detaching(this.$initiator,this.parent,this.$flags);e instanceof Promise&&(this.ensurePromise(),t.enterDetaching(),e.then(()=>{t.leaveDetaching()}).catch(e=>{t.reject(e)}))}if(null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.leaveDetaching(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){this.debug&&this.logger.trace("unbind()");const t=64|this.$flags;if(null!==this.bindings)for(let e=0;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.dispose();break;case 0:this.scope.parentScope=null}512==(512&t)&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.resolve()}ensurePromise(){void 0===this.$promise&&(this.$promise=new Promise((t,e)=>{this.$resolve=t,this.$reject=e}),this.$initiator!==this&&this.parent.ensurePromise())}resolve(){if(void 0!==this.$promise){const t=this.$resolve;this.$resolve=this.$reject=this.$promise=void 0,t()}}reject(t){if(void 0!==this.$promise){const e=this.$reject;this.$resolve=this.$reject=this.$promise=void 0,e(t)}this.$initiator!==this&&this.parent.reject(t)}enterActivating(){++this.activatingStack,this.$initiator!==this&&this.parent.enterActivating()}leaveActivating(){if(0==--this.activatingStack){if(this.hooks.hasAttached){this.debug&&this.logger.trace("attached()");const t=this.viewModel.attached(this.$initiator,this.$flags);if(t instanceof Promise)return this.ensurePromise(),void t.then(()=>{this.state=2,this.resolve(),this.$initiator!==this&&this.parent.leaveActivating()}).catch(t=>{this.reject(t)})}this.state=2,this.resolve()}this.$initiator!==this&&this.parent.leaveActivating()}enterDetaching(){++this.detachingStack}leaveDetaching(){if(0==--this.detachingStack){this.debug&&this.logger.trace("detach()"),this.enterUnbinding(),this.removeNodes();let t=this.$initiator.head;for(;null!==t;){if(t!==this&&(t.debug&&t.logger.trace("detach()"),t.removeNodes()),t.hooks.hasUnbinding){t.debug&&t.logger.trace("unbinding()");const e=t.viewModel.unbinding(t.$initiator,t.parent,t.$flags);e instanceof Promise&&(this.ensurePromise(),this.enterUnbinding(),e.then(()=>{this.leaveUnbinding()}).catch(t=>{this.reject(t)}))}t=t.next}this.leaveUnbinding()}}enterUnbinding(){++this.unbindingStack}leaveUnbinding(){if(0==--this.unbindingStack){this.debug&&this.logger.trace("unbind()");let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&t.unbind(),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addController(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return ka.getDefinition(this.viewModel.constructor).name===t;case 0:return va.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&T.define(va.name,this,t),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&T.define(va.name,this,t),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&T.define(va.name,this,t),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){this.debug&&this.logger.trace("dispose()"),32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(uc),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.context=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(fc.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.root=null)}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let n=0,s=e.length;n<s;++n)if(!0===e[n].accept(t))return!0}}getTargetAccessor(t){const{bindings:e}=this;if(null!==e){const n=e.find(e=>e.targetProperty===t);if(void 0!==n)return n.targetObserver}}}function mc(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function vc(t,e,n,s){const i=e.bindables,r=Object.getOwnPropertyNames(i),o=r.length;if(o>0){let e,n;const a=mc(s);for(let c=0;c<o;++c)e=r[c],void 0===a[e]&&(n=i[e],a[e]=new no(s,e,n.callback,n.set,t))}}const bc={map:new Map,for(t){let e=bc.map.get(t);return null==e&&(e=new Je(t,0),bc.map.set(t,e)),e}};function yc(t,e,n,s){const i=e.get(Gr),r=e.get(Dn),o=n.watches;let a,c;for(let n=0,l=o.length;l>n;++n){if(({expression:a,callback:c}=o[n]),c="function"==typeof c?c:Reflect.get(s,c),"function"!=typeof c)throw new Error("Invalid callback for @watch decorator: "+String(c));if("function"==typeof a)t.addBinding(new lc(s,i,a,c,!0));else{const n="string"==typeof a?r.parse(a,53):bc.for(a);t.addBinding(new hc(t.scope,e,i,n,c))}}}class wc{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}wc.none=new wc({});const kc={mode:"open"};var xc,Cc;function Sc(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(xc||(xc={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Cc||(Cc={}));const Ac=lt.createInterface("IController").noDefault(),Tc=lt.createInterface("IAppRoot").noDefault();class Ec{constructor(t,e,n,s,i=!1){if(this.config=t,this.platform=e,this.container=n,this.controller=void 0,this.hydratePromise=void 0,this.host=t.host,s.prepare(this),n.has(_c,!1)&&n.get(_c)!==t.host&&(this.container=n.createChild()),this.container.register(Rt.instance(_c,t.host)),i){const e=t.component;this.enhanceDefinition=va.getDefinition(va.isType(e)?va.define({...va.getDefinition(e),template:this.host,enhance:!0},e):va.define({name:void 0,template:this.host,enhance:!0}))}this.hydratePromise=Z(this.runAppTasks("beforeCreate"),()=>{const e=va.isType(t.component)?this.container.get(t.component):t.component,s=this.controller=gc.forCustomElement(this,n,e,this.host,null,0,!1,this.enhanceDefinition);return s.hydrateCustomElement(n,null),Z(this.runAppTasks("hydrating"),()=>(s.hydrate(null),Z(this.runAppTasks("hydrated"),()=>{s.hydrateChildren(),this.hydratePromise=void 0})))})}activate(){return Z(this.hydratePromise,()=>Z(this.runAppTasks("beforeActivate"),()=>Z(this.controller.activate(this.controller,null,32,void 0),()=>this.runAppTasks("afterActivate"))))}deactivate(){return Z(this.runAppTasks("beforeDeactivate"),()=>Z(this.controller.deactivate(this.controller,null,0),()=>this.runAppTasks("afterDeactivate")))}runAppTasks(t){return J(...this.container.getAll(Jo).reduce((e,n)=>(n.slot===t&&e.push(n.run()),e),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}const _c=lt.createInterface("INode").noDefault(),Ic=lt.createInterface("IEventTarget").withDefault(t=>t.cachedCallback(t=>t.has(Tc,!0)?t.get(Tc).host:t.get(Po).document)),Rc=lt.createInterface("IRenderLocation").noDefault();var Oc;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(Oc||(Oc={}));const Pc=new WeakMap;function $c(t){if(Pc.has(t))return Pc.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=va.for(t);if(void 0===e)return null;if(2===e.mountTarget)return $c(e.host)}return t.parentNode}function jc(t){if(Vc(t))return t;const e=t.ownerDocument.createComment("au-end"),n=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e)),e.$start=n,e}function Vc(t){return"au-end"===t.textContent}class Dc{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let s=0,i=n.length;const r=this.targets=Array(i);for(;s<i;){const t=n[s];"AU-M"===t.nodeName?r[s]=jc(t):r[s]=t,++s}const o=e.childNodes;s=0,i=o.length;const a=this.childNodes=Array(i);for(;s<i;)a[s]=o[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n=this.firstChild;const s=this.lastChild;let i;for(;null!=n&&(i=n.nextSibling,e.insertBefore(n,t),n!==s);)n=i}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e=this.firstChild;const n=this.lastChild;let s;for(;null!=e&&(s=e.nextSibling,t.appendChild(e),e!==n);)e=s}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,s=this.firstChild;for(;null!==s&&(n=s.nextSibling,t.appendChild(s),s!==e);)s=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n=this.firstChild;const s=this.lastChild;let i;for(;null!=n&&(i=n.nextSibling,e.insertBefore(n,t),n!==s);)n=i}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,Vc(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const Lc=lt.createInterface("IWindow").withDefault(t=>t.callback(t=>t.get(Po).window)),Fc=lt.createInterface("ILocation").withDefault(t=>t.callback(t=>t.get(Lc).location)),qc=lt.createInterface("IHistory").withDefault(t=>t.callback(t=>t.get(Lc).history)),Nc={[Ts.capturing]:{capture:!0},[Ts.bubbling]:{capture:!1}};class Mc{constructor(t,e,n,s,i,r,o,a){this.platform=t,this.targetEvent=e,this.delegationStrategy=n,this.sourceExpression=s,this.target=i,this.preventDefault=r,this.eventDelegator=o,this.locator=a,this.interceptor=this,this.isBound=!1,this.$hostScope=null,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(128,this.$scope,this.$hostScope,this.locator,null);return Reflect.deleteProperty(e,"$event"),!0!==n&&this.preventDefault&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n;const s=this.sourceExpression;if(s.hasBind&&s.bind(t,e,n,this.interceptor),this.delegationStrategy===Ts.none)this.target.addEventListener(this.targetEvent,this);else{const t=this.locator.get(Ic);this.handler=this.eventDelegator.addEventListener(t,this.target,this.targetEvent,this,Nc[this.delegationStrategy])}this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=null,this.delegationStrategy===Ts.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observeProperty(t,e){}handleChange(t,e,n){}}const Bc={capture:!1};class Uc{constructor(t,e,n=Bc){this.publisher=t,this.eventName=e,this.options=n,this.count=0,this.captureLookups=new Map,this.bubbleLookups=new Map}increment(){1==++this.count&&this.publisher.addEventListener(this.eventName,this,this.options)}decrement(){0==--this.count&&this.publisher.removeEventListener(this.eventName,this,this.options)}dispose(){this.count>0&&(this.count=0,this.publisher.removeEventListener(this.eventName,this,this.options)),this.captureLookups.clear(),this.bubbleLookups.clear()}getLookup(t){const e=!0===this.options.capture?this.captureLookups:this.bubbleLookups;let n=e.get(t);return void 0===n&&e.set(t,n=Object.create(null)),n}handleEvent(t){const e=!0===this.options.capture?this.captureLookups:this.bubbleLookups,n=t.composedPath();!0===this.options.capture&&n.reverse();for(const s of n){const n=e.get(s);if(void 0===n)continue;const i=n[this.eventName];if(void 0!==i&&("function"==typeof i?i(t):i.handleEvent(t),!0===t.cancelBubble))return}}}class zc{constructor(t,e,n,s){this.tracker=t,this.lookup=e,this.eventName=n,t.increment(),e[n]=s}dispose(){this.tracker.decrement(),this.lookup[this.eventName]=void 0}}class Hc{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){this.target=t,this.handler=e;for(const n of this.config.events)t.addEventListener(n,e)}dispose(){const{target:t,handler:e}=this;if(null!==t&&null!==e)for(const n of this.config.events)t.removeEventListener(n,e);this.target=this.handler=null}}const Wc=lt.createInterface("IEventDelegator").withDefault(t=>t.singleton(Kc));class Kc{constructor(){this.trackerMaps=Object.create(null)}addEventListener(t,e,n,s,i){var r,o;const a=null!==(r=(o=this.trackerMaps)[n])&&void 0!==r?r:o[n]=new Map;let c=a.get(t);return void 0===c&&a.set(t,c=new Uc(t,n,i)),new zc(c,c.getLookup(e),n,s)}dispose(){for(const t in this.trackerMaps){const e=this.trackerMaps[t];for(const t of e.values())t.dispose();e.clear()}}}var Gc,Qc=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Zc=function(t,e){return function(n,s){e(n,s,t)}};!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg"}(Gc||(Gc={}));const Jc=lt.createInterface("Instruction").noDefault();function Yc(t){const e=t.type;return"string"==typeof e&&2===e.length}class Xc{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class tl{constructor(t,e,n){this.from=t,this.to=e,this.mode=n}get type(){return"rg"}}class el{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class nl{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class sl{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class il{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class rl{constructor(t,e,n,s){this.res=t,this.alias=e,this.instructions=n,this.slotInfo=s}get type(){return"ra"}}class ol{constructor(t,e,n){this.res=t,this.alias=e,this.instructions=n}get type(){return"rb"}}class al{constructor(t,e,n,s){this.def=t,this.res=e,this.alias=n,this.instructions=s}get type(){return"rc"}}class cl{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class ll{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class hl{constructor(t){this.from=t}get type(){return"ha"}}class ul{constructor(t,e,n,s){this.from=t,this.to=e,this.preventDefault=n,this.strategy=s}get type(){return"hb"}}class pl{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class dl{constructor(t){this.value=t,this.type="hf"}}class fl{constructor(t){this.value=t,this.type="hg"}}class gl{constructor(t,e,n){this.attr=t,this.from=e,this.to=n}get type(){return"hc"}}const ml=lt.createInterface("ITemplateCompiler").noDefault(),vl=lt.createInterface("IRenderer").noDefault();function bl(t){return function(e){const n=function(...n){const s=new e(...n);return s.instructionType=t,s};n.register=function(t){Rt.singleton(vl,n).register(t)};const s=T.getOwnKeys(e);for(const t of s)T.define(t,T.getOwn(t,e),n);const i=Object.getOwnPropertyDescriptors(e);return Object.keys(i).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(n,t,i[t])}),n}}function yl(t,e,n){return"string"==typeof e?t.parse(e,n):e}function wl(t){return null!=t.viewModel?t.viewModel:t}let kl=class{render(t,e,n,s,i){const r=wl(s);void 0!==r.$observers&&void 0!==r.$observers[i.to]?r.$observers[i.to].setValue(i.value,32):r[i.to]=i.value}};kl=Qc([bl("re")],kl);let xl=class{render(t,e,n,s,i){let r;const o=i.slotInfo;if(null!==o){const t=o.projectionContext;r=Ma(t.content,e).getViewFactory(void 0,o.type,t.scope)}const a=e.getComponentFactory(n,s,i,r,s),c=va.keyFrom(i.res),l=a.createComponent(c),h=gc.forCustomElement(n.root,e,l,s,e.getProjectionFor(i),t);t=h.flags,T.define(c,h,s),e.renderChildren(t,i.instructions,n,h),n.addController(h),a.dispose()}};xl=Qc([bl("ra")],xl);let Cl=class{render(t,e,n,s,i){const r=e.getComponentFactory(n,s,i,void 0,void 0),o=ka.keyFrom(i.res),a=r.createComponent(o),c=gc.forCustomAttribute(n.root,e,a,s,t);T.define(o,c,s),e.renderChildren(t,i.instructions,n,c),n.addController(c),r.dispose()}};Cl=Qc([bl("rb")],Cl);let Sl=class{render(t,e,n,s,i){var r;const o=Ma(i.def,e).getViewFactory(),a=jc(s),c=e.getComponentFactory(n,s,i,o,a),l=ka.keyFrom(i.res),h=c.createComponent(l),u=gc.forCustomAttribute(n.root,e,h,s,t);T.define(l,u,a),null===(r=h.link)||void 0===r||r.call(h,t,e,n,u,s,i),e.renderChildren(t,i.instructions,n,u),n.addController(u),c.dispose()}};Sl=Qc([bl("rc")],Sl);let Al=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,s,i){s.remove();const r=i.instructions,o=i.toBindingContext;let a,c,l;for(let t=0,s=r.length;t<s;++t)a=r[t],c=yl(this.parser,a.from,48),l=$l(new Uo(c,a.to,this.observerLocator,e,o),c,e),n.addBinding(l)}};Al=Qc([bl("rd"),Zc(0,Dn),Zc(1,Gr)],Al);let Tl=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,s,i){const r=yl(this.parser,i.from,153),o=$l(new To(r,wl(s),i.to,this.observerLocator,e),r,e);n.addBinding(o)}};Tl=Qc([bl("rh"),Zc(0,Dn),Zc(1,Gr)],Tl);let El=class{constructor(t){this.parser=t}render(t,e,n,s,i){const r=yl(this.parser,i.from,5376),o=$l(new Zo(r,function(t,e){if("element"===e)return t;switch(e){case"controller":return va.for(t);case"view":throw new Error("Not supported API");case"view-model":return va.for(t).viewModel;default:{const n=ka.for(t,e);if(void 0!==n)return n.viewModel;const s=va.for(t,{name:e});if(void 0===s)throw new Error(`Attempted to reference "${e}", but it was not found amongst the target's API.`);return s.viewModel}}}(s,i.to),e),r,e);n.addBinding(o)}};El=Qc([bl("rj"),Zc(0,Dn)],El);let _l=class{constructor(t,e,n){this.parser=t,this.observerLocator=e,this.platform=n}render(t,e,n,s,i){const r=yl(this.parser,i.from,2048),o=new Mo(this.observerLocator,r,wl(s),i.to,Cs.toView,e,this.platform.domWriteQueue),a=o.partBindings;let c;for(let t=0,n=a.length;n>t;++t)c=a[t],a[t]=$l(c,c.sourceExpression,e);n.addBinding(o)}};_l=Qc([bl("rf"),Zc(0,Dn),Zc(1,Gr),Zc(2,Po)],_l);let Il=class{constructor(t,e,n){this.parser=t,this.observerLocator=e,this.platform=n}render(t,e,n,s,i){const r=yl(this.parser,i.from,48|i.mode),o=$l(new Qo(r,wl(s),i.to,i.mode,this.observerLocator,e,this.platform.domWriteQueue),r,e);n.addBinding(o)}};Il=Qc([bl("rg"),Zc(0,Dn),Zc(1,Gr),Zc(2,Po)],Il);let Rl=class{constructor(t,e,n){this.parser=t,this.observerLocator=e,this.platform=n}render(t,e,n,s,i){const r=yl(this.parser,i.from,539),o=$l(new Qo(r,wl(s),i.to,Cs.toView,this.observerLocator,e,this.platform.domWriteQueue),r,e);n.addBinding(o)}};Rl=Qc([bl("rk"),Zc(0,Dn),Zc(1,Gr),Zc(2,Po)],Rl);let Ol=0;const Pl=[];function $l(t,e,n){for(;e instanceof We;)Pl[Ol++]=e,e=e.expression;for(;Ol>0;){const e=Pl[--Ol],s=n.get(e.behaviorKey);s instanceof De&&(t=s.construct(t,e))}return Pl.length=0,t}let jl=class{constructor(t,e,n){this.parser=t,this.observerLocator=e,this.platform=n}render(t,e,n,s,i){const r=s.nextSibling;"AU-M"===s.nodeName&&s.remove();const o=yl(this.parser,i.from,2048),a=new Mo(this.observerLocator,o,r,"textContent",Cs.toView,e,this.platform.domWriteQueue),c=a.partBindings;let l;for(let t=0,n=c.length;n>t;++t)l=c[t],c[t]=$l(l,l.sourceExpression,e);n.addBinding(a)}};jl=Qc([bl("ha"),Zc(0,Dn),Zc(1,Gr),Zc(2,Po)],jl);let Vl=class{constructor(t,e){this.parser=t,this.eventDelegator=e}render(t,e,n,s,i){const r=yl(this.parser,i.from,80|i.strategy+6),o=$l(new Mc(e.platform,i.to,i.strategy,r,s,i.preventDefault,this.eventDelegator,e),r,e);n.addBinding(o)}};Vl=Qc([bl("hb"),Zc(0,Dn),Zc(1,Wc)],Vl);let Dl=class{render(t,e,n,s,i){s.setAttribute(i.to,i.value)}};Dl=Qc([bl("he")],Dl);let Ll=class{render(t,e,n,s,i){!function(t,e){const n=e.length;let s=0;for(let i=0;i<n;++i)32===e.charCodeAt(i)?(i!==s&&t.add(e.slice(s,i)),s=i+1):i+1===n&&t.add(e.slice(s))}(s.classList,i.value)}};Ll=Qc([bl("hf")],Ll);let Fl=class{render(t,e,n,s,i){s.style.cssText+=i.value}};Fl=Qc([bl("hg")],Fl);let ql=class{constructor(t,e,n){this.parser=t,this.observerLocator=e,this.platform=n}render(t,e,n,s,i){const r=yl(this.parser,i.from,48|Cs.toView),o=$l(new Qo(r,s.style,i.to,Cs.toView,this.observerLocator,e,this.platform.domWriteQueue),r,e);n.addBinding(o)}};ql=Qc([bl("hd"),Zc(0,Dn),Zc(1,Gr),Zc(2,Po)],ql);let Nl=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,s,i){const r=yl(this.parser,i.from,48|Cs.toView),o=$l(new Fo(r,s,i.attr,i.to,Cs.toView,this.observerLocator,e),r,e);n.addBinding(o)}};var Ml;function Bl(t){const e=t.document.createElement("au-m");return e.className="au",e}Nl=Qc([bl("hc"),Zc(0,Dn),Zc(1,Gr)],Nl),function(t){t[t.type=1023]="type",t[t.isTemplateController=1]="isTemplateController",t[t.isProjection=2]="isProjection",t[t.isCustomAttribute=4]="isCustomAttribute",t[t.isPlainAttribute=8]="isPlainAttribute",t[t.isCustomElement=16]="isCustomElement",t[t.isLetElement=32]="isLetElement",t[t.isPlainElement=64]="isPlainElement",t[t.isText=128]="isText",t[t.isBinding=256]="isBinding",t[t.isAuSlot=512]="isAuSlot",t[t.hasMarker=1024]="hasMarker",t[t.hasTemplate=2048]="hasTemplate",t[t.hasAttributes=4096]="hasAttributes",t[t.hasBindings=8192]="hasBindings",t[t.hasChildNodes=16384]="hasChildNodes",t[t.hasProjections=32768]="hasProjections"}(Ml||(Ml={}));class Ul{constructor(t,e,n,s=n.name){this.syntax=e,this.info=n,this.res=s,this.flags=1025,this.physicalNode=null,this.template=null,this.templateController=null,this._bindings=null,this.marker=Bl(t)}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}}class zl{constructor(t,e){this.name=t,this.template=e,this.flags=2}}class Hl{constructor(t,e,n=e.name){this.syntax=t,this.info=e,this.res=n,this.flags=4,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}}class Wl{constructor(t,e,n){this.syntax=t,this.command=e,this.expression=n,this.flags=8}}class Kl{constructor(t,e,n,s,i){this.command=t,this.bindable=e,this.expression=n,this.rawValue=s,this.target=i,this.flags=256}}class Gl{constructor(t,e,n,s=n.name,i=n.bindables){this.physicalNode=e,this.info=n,this.res=s,this.bindables=i,this.flags=16,this.isTarget=!0,this.templateController=null,this._customAttributes=null,this._plainAttributes=null,this._bindings=null,this._childNodes=null,this._projections=null,n.containerless?(this.isContainerless=!0,this.marker=Bl(t),this.flags|=1024):(this.isContainerless=!1,this.marker=null)}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=4096),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=4096),this._plainAttributes}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=16384),this._childNodes}get projections(){return null===this._projections&&(this._projections=[],this.flags|=32768),this._projections}}class Ql{constructor(t,e,n=Bl(t)){this.physicalNode=e,this.marker=n,this.flags=1056,this.toBindingContext=!1,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}}class Zl{constructor(t){this.physicalNode=t,this.flags=64,this.isTarget=!1,this.templateController=null,this.hasSlots=!1,this._customAttributes=null,this._plainAttributes=null,this._childNodes=null}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=4096),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=4096),this._plainAttributes}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=16384),this._childNodes}}class Jl{constructor(t,e,n,s=Bl(t)){this.physicalNode=e,this.interpolation=n,this.marker=s,this.flags=1152}}class Yl{constructor(t,e){this.propName=t,this.mode=e}}const Xl=new WeakMap;class th{constructor(t,e,n){this.name=t,this.alias=e,this.containerless=n,this.bindables=Object.create(null)}static from(t,e){if(null===t)return null;let n=Xl.get(t);void 0===n&&Xl.set(t,n=Object.create(null));let s=n[e];if(void 0===s){s=n[e]=new th(t.name,e===t.name?void 0:e,t.containerless);const i=t.bindables,r=Cs.toView;let o,a,c,l;for(a in i)o=i[a],void 0!==o.property&&(a=o.property),c=void 0!==o.attribute?o.attribute:q(a),l=void 0!==o.mode&&o.mode!==Cs.default?o.mode:r,s.bindables[c]=new Yl(a,l)}return s}}const eh=new WeakMap;class nh{constructor(t,e,n,s){this.name=t,this.alias=e,this.isTemplateController=n,this.noMultiBindings=s,this.bindables=Object.create(null),this.bindable=null}static from(t,e){if(null===t)return null;let n=eh.get(t);void 0===n&&eh.set(t,n=Object.create(null));let s=n[e];if(void 0===s){s=n[e]=new nh(t.name,e===t.name?void 0:e,t.isTemplateController,t.noMultiBindings);const i=t.bindables,r=void 0!==t.defaultBindingMode&&t.defaultBindingMode!==Cs.default?t.defaultBindingMode:Cs.toView;let o,a,c,l,h=!1,u=!1;for(a in i){if(o=i[a],void 0!==o.property&&(a=o.property),c=void 0!==o.mode&&o.mode!==Cs.default?o.mode:r,u=!0===o.primary,l=s.bindables[a]=new Yl(a,c),u){if(h)throw new Error("primary already exists");h=!0,s.bindable=l}null===s.bindable&&(s.bindable=l)}null===s.bindable&&(s.bindable=new Yl("value",r))}return s}}var sh=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};function ih(t){return function(e){return oh.define(t,e)}}class rh{constructor(t,e,n,s,i){this.Type=t,this.name=e,this.aliases=n,this.key=s,this.type=i}static create(t,e){let n,s;return"string"==typeof t?(n=t,s={name:n}):(n=t.name,s=t),new rh(e,W(oh.getAnnotation(e,"name"),n),H(oh.getAnnotation(e,"aliases"),s.aliases,e.aliases),oh.keyFrom(n),W(oh.getAnnotation(e,"type"),s.type,e.type,null))}register(t){const{Type:e,key:n,aliases:s}=this;Rt.singleton(n,e).register(t),Rt.aliasTo(n,e).register(t),Ae(s,oh,n,t)}}const oh={name:tt.resource.keyFor("binding-command"),keyFrom:t=>`${oh.name}:${t}`,isType:t=>"function"==typeof t&&T.hasOwn(oh.name,t),define(t,e){const n=rh.create(t,e);return T.define(oh.name,n,n.Type),T.define(oh.name,n,n),tt.resource.appendTo(e,oh.name),n.Type},getDefinition(t){const e=T.getOwn(oh.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){T.define(tt.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>T.getOwn(tt.annotation.keyFor(e),t)};function ah(t,e){return 256&t.flags?t.bindable.propName:e?L(t.syntax.target):t.syntax.target}let ch=class{constructor(){this.bindingType=49}compile(t){return new tl(t.expression,ah(t,!1),Cs.oneTime)}};ch=sh([ih("one-time")],ch);let lh=class{constructor(){this.bindingType=50}compile(t){return new tl(t.expression,ah(t,!1),Cs.toView)}};lh=sh([ih("to-view")],lh);let hh=class{constructor(){this.bindingType=51}compile(t){return new tl(t.expression,ah(t,!1),Cs.fromView)}};hh=sh([ih("from-view")],hh);let uh=class{constructor(){this.bindingType=52}compile(t){return new tl(t.expression,ah(t,!1),Cs.twoWay)}};uh=sh([ih("two-way")],uh);let ph=class{constructor(){this.bindingType=53}compile(t){let e=Cs.default;if(t instanceof Kl)e=t.bindable.mode;else{switch(t.syntax.command){case"bind":case"to-view":e=Cs.toView;break;case"one-time":e=Cs.oneTime;break;case"from-view":e=Cs.fromView;break;case"two-way":e=Cs.twoWay}}return new tl(t.expression,ah(t,!1),e===Cs.default?Cs.toView:e)}};ph=sh([ih("bind")],ph);let dh=class{constructor(){this.bindingType=153}compile(t){return new nl(t.expression,ah(t,!0))}};dh=sh([ih("call")],dh);let fh=class{constructor(){this.bindingType=539}compile(t){return new el(t.expression,ah(t,!1))}};fh=sh([ih("for")],fh);let gh=class{constructor(){this.bindingType=4182}compile(t){return new ul(t.expression,ah(t,!1),!0,Ts.none)}};gh=sh([ih("trigger")],gh);let mh=class{constructor(){this.bindingType=4184}compile(t){return new ul(t.expression,ah(t,!1),!1,Ts.bubbling)}};mh=sh([ih("delegate")],mh);let vh=class{constructor(){this.bindingType=4183}compile(t){return new ul(t.expression,ah(t,!1),!1,Ts.capturing)}};vh=sh([ih("capture")],vh);let bh=class{constructor(){this.bindingType=32}compile(t){const e=ah(t,!1);return new gl(e,t.expression,e)}};bh=sh([ih("attr")],bh);let yh=class{constructor(){this.bindingType=32}compile(t){return new gl("style",t.expression,ah(t,!1))}};yh=sh([ih("style")],yh);let wh=class{constructor(){this.bindingType=32}compile(t){return new gl("class",t.expression,ah(t,!1))}};wh=sh([ih("class")],wh);let kh=class{constructor(){this.bindingType=4128}compile(t){return new sl(t.expression,ah(t,!1))}};kh=sh([ih("ref")],kh);const xh=lt.createInterface("IAttrSyntaxTransformer").withDefault(t=>t.singleton(Ch));class Ch{constructor(){this.fns=[]}useTwoWay(t){this.fns.push(t)}transform(t,e){"bind"===e.command&&(function(t,e){switch(t.tagName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e.target)||this.fns.length>0&&this.fns.some(n=>n(t,e.target)))&&(e.command="two-way"),e.target=this.map(t.tagName,e.target)}map(t,e){switch(t){case"LABEL":switch(e){case"for":return"htmlFor";default:return e}case"IMG":switch(e){case"usemap":return"useMap";default:return e}case"INPUT":switch(e){case"maxlength":return"maxLength";case"minlength":return"minLength";case"formaction":return"formAction";case"formenctype":return"formEncType";case"formmethod":return"formMethod";case"formnovalidate":return"formNoValidate";case"formtarget":return"formTarget";case"inputmode":return"inputMode";default:return e}case"TEXTAREA":switch(e){case"maxlength":return"maxLength";default:return e}case"TD":case"TH":switch(e){case"rowspan":return"rowSpan";case"colspan":return"colSpan";default:return e}default:switch(e){case"accesskey":return"accessKey";case"contenteditable":return"contentEditable";case"tabindex":return"tabIndex";case"textcontent":return"textContent";case"innerhtml":return"innerHTML";case"scrolltop":return"scrollTop";case"scrollleft":return"scrollLeft";case"readonly":return"readOnly";default:return e}}}}const Sh=Object.assign(Object.create(null),{id:!0,"au-slot":!0}),Ah=Object.assign(Object.create(null),{"as-element":!0});function Th(t){const e=t.length;let n=0;for(let s=0;s<e;++s)if(n=t.charCodeAt(s),92===n)++s;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(s+1))return!1}return!1}function Eh(t,e){return t!==e}class _h{constructor(t,e,n,s,i){this.platform=t,this.container=e,this.attrParser=n,this.exprParser=s,this.attrSyntaxTransformer=i,this.commandLookup=Object.create(null)}bind(t){const e=new Zl(t),n=this.attrSyntaxTransformer,s=t.attributes;let i=0;for(;i<s.length;){const r=s[i],o=this.attrParser.parse(r.name,r.value);if(!0===Sh[o.target])throw new Error("Invalid surrogate attribute: "+o.target);const a=this.getBindingCommand(o,!0);if(null===a||0==(4096&a.bindingType)){const s=nh.from(this.container.find(ka,o.target),o.target);if(null===s)n.transform(t,o),this.bindPlainAttribute(o,r,e,e);else{if(s.isTemplateController)throw new Error("Cannot have template controller on surrogate element.");this.bindCustomAttribute(o,s,a,e)}}else n.transform(t,o),this.bindPlainAttribute(o,r,e,e);++i}return this.bindChildNodes(t,e,e,null,null),e}bindManifest(t,e,n,s,i,r){var o;let a=!1;switch(e.nodeName){case"LET":return void this.bindLetElement(t,e);case"SLOT":n.hasSlots=!0;break;case"AU-SLOT":a=!0}let c=e.getAttribute("as-element");null===c&&(c=e.nodeName.toLowerCase());const l=th.from(this.container.find(va,c),c);if(null===l)s=new Zl(e);else{r=i;const t=new Gl(this.platform,e,l);a&&(t.flags=512,t.slotName=null!==(o=e.getAttribute("name"))&&void 0!==o?o:"default"),i=s=t}this.bindChildNodes(e,n,s,i,r),this.bindAttributes(e,t,n,s,i,r),i===s&&s.isContainerless?e.parentNode.replaceChild(s.marker,e):s.isTarget&&e.classList.add("au")}bindLetElement(t,e){const n=new Ql(this.platform,e);t.childNodes.push(n);const s=e.attributes;let i=0;for(;i<s.length;){const t=s[i];if("to-binding-context"===t.name){e.removeAttribute("to-binding-context"),n.toBindingContext=!0;continue}const r=this.attrParser.parse(t.name,t.value),o=this.getBindingCommand(r,!1),a=null===o?2048:o.bindingType,c=this.exprParser.parse(r.rawValue,a),l=L(r.target),h=new Yl(l,Cs.toView);n.bindings.push(new Kl(o,h,c,r.rawValue,l)),++i}e.parentNode.replaceChild(n.marker,e)}bindAttributes(t,e,n,s,i,r){var o;let a=s,c=void 0,l=void 0;const h=t.attributes;let u=0;for(;u<h.length;){const e=h[u];if(++u,!0===Ah[e.name])continue;const i=this.attrParser.parse(e.name,e.value),r=this.getBindingCommand(i,!0);if(null===r||0==(4096&r.bindingType)){const o=nh.from(this.container.find(ka,i.target),i.target);null===o?(this.attrSyntaxTransformer.transform(t,i),this.bindPlainAttribute(i,e,n,s)):o.isTemplateController?(l=s.templateController=this.declareTemplateController(i,o),a===s?(l.template=s,a=l):(l.templateController=c,l.template=c.template,c.template=l),c=l):this.bindCustomAttribute(i,o,r,s)}else this.attrSyntaxTransformer.transform(t,i),this.bindPlainAttribute(i,e,n,s)}if("INPUT"===t.tagName){const e=t.type;"checkbox"!==e&&"radio"!==e||this.ensureAttributeOrder(s)}let p=t.getAttribute("au-slot");""===p&&(p="default");const d=null!==p;if(d&&Eh(a,s))throw new Error(`Unsupported usage of [au-slot="${p}"] along with a template controller (if, else, repeat.for etc.) found (example: <some-el au-slot if.bind="true"></some-el>).`);const f=null===(o=t.parentNode)||void 0===o?void 0:o.nodeName.toLowerCase();if(d&&(null===i||void 0===f||null===this.container.find(va,f)))throw new Error(`Unsupported usage of [au-slot="${p}"]. It seems that projection is attempted, but not for a custom element.`);!function(t,e,n){const s=n.physicalNode;let i,r=e;for(;Eh(r,n);)r.template===n?(s.parentNode.replaceChild(r.marker,s),"TEMPLATE"===s.nodeName?(r.physicalNode=s,s.remove()):(i=r.physicalNode=t.document.createElement("template"),i.content.appendChild(s))):(i=r.physicalNode=t.document.createElement("template"),i.content.appendChild(r.marker)),s.removeAttribute(r.syntax.rawName),r=r.template}(this.platform,a,s);const g=s===i?r:i;d&&null!==g?d&&(g.projections.push(new zl(p,a)),t.removeAttribute("au-slot"),t.remove()):e.childNodes.push(a)}ensureAttributeOrder(t){const e=t.plainAttributes;let n=void 0,s=void 0,i=0;for(let t=0;t<e.length&&i<3;t++)switch(e[t].syntax.target){case"model":case"value":case"matcher":n=t,i++;break;case"checked":s=t,i++}void 0!==s&&void 0!==n&&s<n&&([e[n],e[s]]=[e[s],e[n]])}bindChildNodes(t,e,n,s,i){let r,o;for(r="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==r;)switch(r.nodeType){case 1:o=r.nextSibling,this.bindManifest(n,r,e,n,s,i),r=o;break;case 3:r=this.bindText(r,n).nextSibling;break;case 4:case 7:case 8:case 10:r=r.nextSibling;break;case 9:case 11:r=r.firstChild}}bindText(t,e){const n=this.exprParser.parse(t.wholeText,2048);if(null!==n){const s=new Jl(this.platform,t,n);e.childNodes.push(s),function(t){const e=t.physicalNode,n=e.parentNode;for(;null!==e.nextSibling&&3===e.nextSibling.nodeType;)n.removeChild(e.nextSibling);e.textContent="",n.insertBefore(t.marker,e)}(s)}let s=t;for(;null!==s.nextSibling&&3===s.nextSibling.nodeType;)s=s.nextSibling;return s}declareTemplateController(t,e){let n;const s=t.rawValue,i=this.getBindingCommand(t,!1);if(!1===e.noMultiBindings&&null===i&&Th(s))n=new Ul(this.platform,t,e),this.bindMultiAttribute(n,e,s);else{n=new Ul(this.platform,t,e);const r=null===i?2048:i.bindingType,o=this.exprParser.parse(s,r);n.bindings.push(new Kl(i,e.bindable,o,s,t.target))}return n}bindCustomAttribute(t,e,n,s){let i;const r=t.rawValue;if(!1===e.noMultiBindings&&null===n&&Th(r))i=new Hl(t,e),this.bindMultiAttribute(i,e,r);else{i=new Hl(t,e);const s=null===n?2048:n.bindingType,o=this.exprParser.parse(r,s);i.bindings.push(new Kl(n,e.bindable,o,r,t.target))}s.customAttributes.push(i),s.isTarget=!0}bindMultiAttribute(t,e,n){const s=e.bindables,i=n.length;let r=void 0,o=void 0,a=0,c=0;for(let e=0;e<i;++e)if(c=n.charCodeAt(e),92===c)++e;else if(58===c){for(r=n.slice(a,e);n.charCodeAt(++e)<=32;);for(a=e;e<i;++e)if(c=n.charCodeAt(e),92===c)++e;else if(59===c){o=n.slice(a,e);break}void 0===o&&(o=n.slice(a));const l=this.attrParser.parse(r,o),h=L(l.target),u=this.getBindingCommand(l,!1),p=null===u?2048:u.bindingType,d=this.exprParser.parse(o,p);let f=s[h];for(void 0===f&&(f=s[h]=new Yl(h,Cs.toView)),t.bindings.push(new Kl(u,f,d,o,h));e<i&&n.charCodeAt(++e)<=32;);a=e,r=void 0,o=void 0}}bindPlainAttribute(t,e,n,s){const i=this.getBindingCommand(t,!1),r=null===i?2048:i.bindingType,o=t.target,a=t.rawValue;let c;if(0===a.length&&(55|53&r)>0){if(!((55|53&r)>0))return;c=this.exprParser.parse(L(o),r)}else c=this.exprParser.parse(a,r);if((16&s.flags)>0){const e=s.bindables[o];null!=e?(s.bindings.push(new Kl(i,e,c,a,o)),s.isTarget=!0):null!=c&&(s.plainAttributes.push(new Wl(t,i,c)),s.isTarget=!0)}else null!=c?(s.plainAttributes.push(new Wl(t,i,c)),s.isTarget=!0):s===n&&s.plainAttributes.push(new Wl(t,i,c));null==i&&null!=c&&(e.value="")}getBindingCommand(t,e){const n=t.command;if(null===n)return null;let s=this.commandLookup[n];if(void 0===s){if(s=this.container.create(oh,n),null===s){if(e)return null;throw new Error("Unknown binding command: "+n)}this.commandLookup[n]=s}return s}}var Ih=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Rh=function(t,e){return function(n,s){e(n,s,t)}};const Oh=lt.createInterface("ITemplateElementFactory").withDefault(t=>t.singleton($h)),Ph={};let $h=class{constructor(t){this.p=t,this.template=t.document.createElement("template")}createTemplate(t){var e;if("string"==typeof t){let e=Ph[t];if(void 0===e){const n=this.template;n.innerHTML=t;const s=n.content.firstElementChild;null==s||"TEMPLATE"!==s.nodeName||null!=s.nextElementSibling?(this.template=this.p.document.createElement("template"),e=n):(n.content.removeChild(s),e=s),Ph[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}};$h=Ih([Rh(0,Po)],$h);var jh,Vh=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Dh=function(t,e){return function(n,s){e(n,s,t)}};class Lh{constructor(t,e,n){this.partialDefinition=t,this.surrogate=e,this.template=n,this.instructions=[],this.surrogates=[],this.projectionsMap=new Map}toDefinition(){const t=this.partialDefinition;return ga.create({...t,instructions:H(t.instructions,this.instructions),surrogates:H(t.surrogates,this.surrogates),template:this.template,needsCompile:!1,hasSlots:this.surrogate.hasSlots,projectionsMap:this.projectionsMap})}}!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(jh||(jh={}));const Fh=Object.freeze(["property","attribute","mode"]);let qh=class{constructor(t,e,n,s,i,r){this.factory=t,this.attrParser=e,this.exprParser=n,this.attrSyntaxModifier=s,this.p=r,this.logger=i.scopeTo("TemplateCompiler")}get name(){return"default"}static register(t){return Rt.singleton(ml,this).register(t)}compile(t,e,n){const s=ga.getOrCreate(t);if(null===s.template||void 0===s.template)return s;const{attrParser:i,exprParser:r,attrSyntaxModifier:o,factory:a}=this,c=e.get(Po),l=new _h(c,e,i,r,o),h=!0===s.enhance?s.template:a.createTemplate(s.template);!function(t,e,n,s,i){let r;if("TEMPLATE"===t.nodeName){if(t.hasAttribute("as-custom-element"))throw new Error("The root cannot be a local template itself.");r=t.content}else r=t;const o=N(r.querySelectorAll("template[as-custom-element]")),a=o.length;if(0===a)return;if(a===r.childElementCount)throw new Error("The custom element does not have any content other than local template(s).");const c=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("Local templates needs to be defined directly under root.");const s=Nh(t,c),o=class{},a=t.content,l=N(a.querySelectorAll("bindable")),h=to.for(o),u=new Set,p=new Set;for(const t of l){if(t.parentNode!==a)throw new Error("Bindable properties of local templates needs to be defined directly under root.");const e=t.getAttribute("property");if(null===e)throw new Error("The attribute 'property' is missing in "+t.outerHTML);const n=t.getAttribute("attribute");if(null!==n&&p.has(n)||u.has(e))throw new Error(`Bindable property and attribute needs to be unique; found property: ${e}, attribute: ${n}`);null!==n&&p.add(n),u.add(e),h.add({property:e,attribute:null!=n?n:void 0,mode:Mh(t)});const s=t.getAttributeNames().filter(t=>!Fh.includes(t));s.length>0&&i.warn(`The attribute(s) ${s.join(", ")} will be ignored for ${t.outerHTML}. Only ${Fh.join(", ")} are processed.`),a.removeChild(t)}const d=va.define({name:s,template:t},o);e.dependencies.push(d),n.register(d),r.removeChild(t)}}(h,s,e,0,this.logger);const u=l.bind(h),p=this.compilation=new Lh(s,u,h),d=u.customAttributes,f=u.plainAttributes,g=d.length,m=f.length;if(g+m>0){let t=0;for(let e=0;g>e;++e)p.surrogates[t]=this.compileCustomAttribute(d[e]),t++;for(let e=0;e<m;++e)p.surrogates[t]=this.compilePlainAttribute(f[e],!0),t++}this.compileChildNodes(u,p.instructions,p.projectionsMap,n);const v=p.toDefinition();return this.compilation=null,v}compileChildNodes(t,e,n,s){if((16384&t.flags)>0){const i=t.childNodes,r=i.length;let o;for(let t=0;t<r;++t)if(o=i[t],(128&o.flags)>0)e.push([new hl(o.interpolation)]);else if((32&o.flags)>0){const t=o.bindings,n=[];let s;const i=t.length;for(let e=0;e<i;++e)s=t[e],n[e]=new ll(s.expression,s.target);e.push([new cl(n,o.toBindingContext)])}else this.compileParentNode(o,e,n,s)}}compileCustomElement(t,e,n,s){var i;const r=(512&t.flags)>0,o=this.compileAttributes(t,1),a=t.slotName;let c=null;if(r){const e=null===(i=null==s?void 0:s.projections)||void 0===i?void 0:i[a];c=void 0!==e?new Oa(a,Ra.Projection,new Pa(e,null==s?void 0:s.scope)):new Oa(a,Ra.Fallback,new Pa(this.compileProjectionFallback(t,n,s)))}const l=o[0]=new rl(t.res,t.info.alias,this.compileBindings(t),c),h=this.compileProjections(t,n,s);null!==h&&n.set(l,h),e.push(o),r||this.compileChildNodes(t,e,n,s)}compilePlainElement(t,e,n,s){const i=this.compileAttributes(t,0);i.length>0&&e.push(i),this.compileChildNodes(t,e,n,s)}compileParentNode(t,e,n,s){switch(1023&t.flags){case 16:case 512:this.compileCustomElement(t,e,n,s);break;case 64:this.compilePlainElement(t,e,n,s);break;case 1:this.compileTemplateController(t,e,n,s)}}compileTemplateController(t,e,n,s){var i;const r=this.compileBindings(t),o=[];this.compileParentNode(t.template,o,n,s);const a=ga.create({name:null!==(i=t.info.alias)&&void 0!==i?i:t.info.name,template:t.physicalNode,instructions:o,needsCompile:!1});e.push([new al(a,t.res,t.info.alias,r)])}compileBindings(t){let e;if((8192&t.flags)>0){const{bindings:n}=t,s=n.length;e=Array(s);let i=0;for(;i<s;++i)e[i]=this.compileBinding(n[i])}else e=I;return e}compileBinding(t){return null===t.command?null===t.expression?new il(t.rawValue,t.bindable.propName):new Xc(t.expression,t.bindable.propName):t.command.compile(t)}compileAttributes(t,e){let n;if((4096&t.flags)>0){const s=t.customAttributes,i=t.plainAttributes,r=s.length,o=i.length;n=Array(e+r+o);for(let t=0;r>t;++t)n[e]=this.compileCustomAttribute(s[t]),e++;for(let t=0;o>t;++t)n[e]=this.compilePlainAttribute(i[t],!1),e++}else n=e>0?Array(e):I;return n}compileCustomAttribute(t){const e=this.compileBindings(t);return new ol(t.res,t.info.alias,e)}compilePlainAttribute(t,e){if(null===t.command){const n=t.syntax;if(null===t.expression){const t=n.rawValue;if(e)switch(n.target){case"class":return new dl(t);case"style":return new fl(t)}return new pl(t,n.target)}return new Xc(t.expression,n.target)}return t.command.compile(t)}compileProjections(t,e,n){if(0==(32768&t.flags))return null;const s=this.p,i=Object.create(null),r=t.projections,o=r.length;for(let t=0;t<o;++t){const o=r[t],a=o.name,c=[];this.compileParentNode(o.template,c,e,n);const l=i[a];if(void 0===l){let t=o.template.physicalNode;if("TEMPLATE"!==t.tagName){const e=s.document.createElement("template");e.content.appendChild(t),t=e}i[a]=ga.create({name:a,template:t,instructions:c,needsCompile:!1})}else l.template.content.appendChild(o.template.physicalNode),l.instructions.push(...c)}return i}compileProjectionFallback(t,e,n){const s=[];this.compileChildNodes(t,s,e,n);const i=this.p.document.createElement("template");return i.content.append(...N(t.physicalNode.childNodes)),ga.create({name:va.generateName(),template:i,instructions:s,needsCompile:!1})}};function Nh(t,e){const n=t.getAttribute("as-custom-element");if(null===n||""===n)throw new Error('The value of "as-custom-element" attribute cannot be empty for local template');if(e.has(n))throw new Error("Duplicate definition of the local template named "+n);return e.add(n),t.removeAttribute("as-custom-element"),n}function Mh(t){switch(t.getAttribute("mode")){case"oneTime":return Cs.oneTime;case"toView":return Cs.toView;case"fromView":return Cs.fromView;case"twoWay":return Cs.twoWay;case"default":default:return Cs.default}}qh=Vh([Dh(0,Oh),Dh(1,vo),Dh(2,Dn),Dh(3,xh),Dh(4,se),Dh(5,Po)],qh);class Bh{constructor(t){this.mode=t,this.originalModes=new Map}bind(t,e,n,s){this.originalModes.set(s,s.mode),s.mode=this.mode}unbind(t,e,n,s){s.mode=this.originalModes.get(s),this.originalModes.delete(s)}}class Uh extends Bh{constructor(){super(Cs.oneTime)}}class zh extends Bh{constructor(){super(Cs.toView)}}class Hh extends Bh{constructor(){super(Cs.fromView)}}class Wh extends Bh{constructor(){super(Cs.twoWay)}}je("oneTime")(Uh),je("toView")(zh),je("fromView")(Hh),je("twoWay")(Wh);class Kh extends Le{constructor(t,e){super(t,e),this.opts={delay:0},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(ke).macroTaskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask(()=>this.binding.callSource(t))}handleChange(t,e,n){this.queueTask(()=>this.binding.handleChange(t,e,n))}queueTask(t){null!==this.task&&this.task.cancel(),this.task=this.taskQueue.queueTask(()=>(this.task=null,t()),this.opts)}$bind(t,e,n){if(null!==this.firstArg){const s=Number(this.firstArg.evaluate(t,e,n,this.locator,null));isNaN(s)||(this.opts.delay=s)}this.binding.$bind(t,e,n)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}je("debounce")(Kh);var Gh=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Qh=function(t,e){return function(n,s){e(n,s,t)}};let Zh=class{constructor(t){this.signaler=t,this.lookup=new Map}bind(t,e,n,s,...i){if(!("handleChange"in s))throw new Error("The signal behavior can only be used with bindings that have a 'handleChange' method");if(0===i.length)throw new Error("At least one signal name must be passed to the signal behavior, e.g. `expr & signal:'my-signal'`");this.lookup.set(s,i);for(const t of i)this.signaler.addSignalListener(t,s)}unbind(t,e,n,s){const i=this.lookup.get(s);this.lookup.delete(s);for(const t of i)this.signaler.removeSignalListener(t,s)}};Zh=Gh([Qh(0,Oe)],Zh),je("signal")(Zh);class Jh extends Le{constructor(t,e){super(t,e),this.opts={delay:0},this.firstArg=null,this.task=null,this.lastCall=0,this.platform=t.locator.get(ke),this.taskQueue=this.platform.macroTaskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask(()=>this.binding.callSource(t))}handleChange(t,e,n){this.queueTask(()=>this.binding.handleChange(t,e,n))}queueTask(t){const e=this.opts,n=this.platform,s=this.lastCall+e.delay-n.performanceNow();s>0?(null!==this.task&&this.task.cancel(),e.delay=s,this.task=this.taskQueue.queueTask(()=>{this.lastCall=n.performanceNow(),this.task=null,t()},e)):(this.lastCall=n.performanceNow(),t())}$bind(t,e,n){if(null!==this.firstArg){const s=Number(this.firstArg.evaluate(t,e,n,this.locator,null));isNaN(s)||(this.opts.delay=s)}this.binding.$bind(t,e,n)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}je("throttle")(Jh);const Yh=lt.createInterface("ISVGAnalyzer").withDefault(t=>t.singleton(Xh));class Xh{isStandardSvgAttribute(t,e){return!1}}function tu(t){const e=Object.create(null);for(const n of t)e[n]=!0;return e}class eu{constructor(t){this.svgElements=Object.assign(Object.create(null),{a:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),altGlyph:tu(["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),altglyph:Object.create(null),altGlyphDef:tu(["id","xml:base","xml:lang","xml:space"]),altglyphdef:Object.create(null),altGlyphItem:tu(["id","xml:base","xml:lang","xml:space"]),altglyphitem:Object.create(null),animate:tu(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateColor:tu(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateMotion:tu(["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateTransform:tu(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),circle:tu(["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),clipPath:tu(["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),"color-profile":tu(["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),cursor:tu(["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),defs:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),desc:tu(["class","id","style","xml:base","xml:lang","xml:space"]),ellipse:tu(["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),feBlend:tu(["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feColorMatrix:tu(["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"]),feComponentTransfer:tu(["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feComposite:tu(["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feConvolveMatrix:tu(["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"]),feDiffuseLighting:tu(["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"]),feDisplacementMap:tu(["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"]),feDistantLight:tu(["azimuth","elevation","id","xml:base","xml:lang","xml:space"]),feFlood:tu(["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feFuncA:tu(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncB:tu(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncG:tu(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncR:tu(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feGaussianBlur:tu(["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"]),feImage:tu(["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),feMerge:tu(["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feMergeNode:tu(["id","xml:base","xml:lang","xml:space"]),feMorphology:tu(["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feOffset:tu(["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),fePointLight:tu(["id","x","xml:base","xml:lang","xml:space","y","z"]),feSpecularLighting:tu(["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"]),feSpotLight:tu(["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"]),feTile:tu(["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feTurbulence:tu(["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"]),filter:tu(["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),font:tu(["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),"font-face":tu(["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"]),"font-face-format":tu(["id","string","xml:base","xml:lang","xml:space"]),"font-face-name":tu(["id","name","xml:base","xml:lang","xml:space"]),"font-face-src":tu(["id","xml:base","xml:lang","xml:space"]),"font-face-uri":tu(["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),foreignObject:tu(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"]),g:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),glyph:tu(["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),glyphRef:tu(["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),glyphref:Object.create(null),hkern:tu(["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]),image:tu(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),line:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"]),linearGradient:tu(["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"]),marker:tu(["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"]),mask:tu(["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"]),metadata:tu(["id","xml:base","xml:lang","xml:space"]),"missing-glyph":tu(["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),mpath:tu(["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),path:tu(["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),pattern:tu(["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),polygon:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),polyline:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),radialGradient:tu(["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),rect:tu(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"]),script:tu(["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),set:tu(["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),stop:tu(["class","id","offset","style","xml:base","xml:lang","xml:space"]),style:tu(["id","media","title","type","xml:base","xml:lang","xml:space"]),svg:tu(["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"]),switch:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),symbol:tu(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"]),text:tu(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"]),textPath:tu(["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),title:tu(["class","id","style","xml:base","xml:lang","xml:space"]),tref:tu(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),tspan:tu(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"]),use:tu(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),view:tu(["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"]),vkern:tu(["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"])}),this.svgPresentationElements=tu(["a","altGlyph","animate","animateColor","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","filter","font","foreignObject","g","glyph","glyphRef","image","line","linearGradient","marker","mask","missing-glyph","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tref","tspan","use"]),this.svgPresentationAttributes=tu(["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-rendering","unicode-bidi","visibility","word-spacing","writing-mode"]),this.SVGElement=t.globalThis.SVGElement;const e=t.document.createElement("div");if(e.innerHTML="<svg><altGlyph /></svg>","altglyph"===e.firstElementChild.nodeName){const t=this.svgElements;let e=t.altGlyph;t.altGlyph=t.altglyph,t.altglyph=e,e=t.altGlyphDef,t.altGlyphDef=t.altglyphdef,t.altglyphdef=e,e=t.altGlyphItem,t.altGlyphItem=t.altglyphitem,t.altglyphitem=e,e=t.glyphRef,t.glyphRef=t.glyphref,t.glyphref=e}}static register(t){return Rt.singleton(Yh,this).register(t)}isStandardSvgAttribute(t,e){var n;return t instanceof this.SVGElement&&(!0===this.svgPresentationElements[t.nodeName]&&!0===this.svgPresentationAttributes[e]||!0===(null===(n=this.svgElements[t.nodeName])||void 0===n?void 0:n[e]))}}eu.inject=[Po];const nu=new class{constructor(){this.propertyKey="",this.currentValue=null,this.type=10}getValue(t,e){return t.getAttribute(e)}setValue(t,e,n,s){null==t?n.removeAttribute(s):n.setAttribute(s,t)}};var su=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let iu=class{bind(t,e,n,s){s.targetObserver=nu}unbind(t,e,n,s){}};iu=su([je("attr")],iu);var ru=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};function ou(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}let au=class{bind(t,e,n,s){if(!s.callSource||!s.targetEvent)throw new Error("Self binding behavior only supports events.");s.selfEventCallSource=s.callSource,s.callSource=ou}unbind(t,e,n,s){s.callSource=s.selfEventCallSource,s.selfEventCallSource=null}};au=ru([je("self")],au);const cu=Object.create(null);class lu{constructor(t){this.namespace=t,this.currentValue=null,this.type=10}static forNs(t){var e;return null!==(e=cu[t])&&void 0!==e?e:cu[t]=new lu(t)}getValue(t,e){return t.getAttributeNS(this.namespace,e)}setValue(t,e,n,s){null==t?n.removeAttributeNS(this.namespace,s):n.setAttributeNS(this.namespace,s,t)}}function hu(t,e){return t===e}class uu{constructor(t,e,n,s){this.handler=n,this.observerLocator=s,this.value=void 0,this.oldValue=void 0,this.type=11,this.collectionObserver=void 0,this.valueObserver=void 0,this.subscriberCount=0,this.obj=t}getValue(){return this.value}setValue(t,e){const n=this.value;t!==n&&(this.value=t,this.oldValue=n,this.observe(),this.synchronizeElement(),this.callSubscribers(t,n,e))}handleCollectionChange(t,e){this.synchronizeElement()}handleChange(t,e,n){this.synchronizeElement()}synchronizeElement(){const t=this.value,e=this.obj,n=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value,s="radio"===e.type,i=void 0!==e.matcher?e.matcher:hu;if(s)e.checked=!!i(t,n);else if(!0===t)e.checked=!0;else{let s=!1;if(t instanceof Array)s=-1!==t.findIndex(t=>!!i(t,n));else if(t instanceof Set){for(const e of t)if(i(e,n)){s=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(i(t,n)&&!0===r){s=!0;break}}e.checked=s}}handleEvent(){let t=this.oldValue=this.value;const e=this.obj,n=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value,s=e.checked,i=void 0!==e.matcher?e.matcher:hu;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex(t=>!!i(t,n));return void(s&&-1===e?t.push(n):s||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===i(e,n)){r=e;break}return void(s&&r===e?t.add(n):s||r===e||t.delete(r))}if(t instanceof Map){let e;for(const s of t){const t=s[0];if(!0===i(t,n)){e=t;break}}return void t.set(e,s)}t=s}else{if(!s)return;t=n}this.value=t,this.callSubscribers(this.value,this.oldValue,0)}start(){this.handler.subscribe(this.obj,this),this.observe()}stop(){var t,e;this.handler.dispose(),null===(t=this.collectionObserver)||void 0===t||t.unsubscribeFromCollection(this),this.collectionObserver=void 0,null===(e=this.valueObserver)||void 0===e||e.unsubscribe(this)}subscribe(t){this.addSubscriber(t)&&1==++this.subscriberCount&&this.start()}unsubscribe(t){this.removeSubscriber(t)&&0==--this.subscriberCount&&this.stop()}observe(){var t,e,n,s,i,r,o;const a=this.obj;null===(i=null!==(t=this.valueObserver)&&void 0!==t?t:this.valueObserver=null!==(n=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==n?n:null===(s=a.$observers)||void 0===s?void 0:s.value)||void 0===i||i.subscribe(this),null===(r=this.collectionObserver)||void 0===r||r.unsubscribeFromCollection(this),this.collectionObserver=void 0,"checkbox"===a.type&&(null===(o=this.collectionObserver=function(t,e){if(t instanceof Array)return e.getArrayObserver(t);if(t instanceof Map)return e.getMapObserver(t);if(t instanceof Set)return e.getSetObserver(t)}(this.value,this.observerLocator))||void 0===o||o.subscribeToCollection(this))}}Rs()(uu);const pu=Object.prototype.hasOwnProperty,du={childList:!0,subtree:!0,characterData:!0};function fu(t,e){return t===e}class gu{constructor(t,e,n,s){this.handler=n,this.observerLocator=s,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.type=11,this.arrayObserver=void 0,this.nodeObserver=void 0,this.observing=!1,this.obj=t}getValue(){return this.observing?this.currentValue:this.obj.multiple?Array.from(this.obj.options).map(t=>t.value):this.obj.value}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,this.observeArray(t instanceof Array?t:null),0==(4096&e)&&this.flushChanges(e)}flushChanges(t){this.hasChanges&&(this.hasChanges=!1,this.synchronizeOptions())}handleCollectionChange(){this.synchronizeOptions()}notify(t){if((32&t)>0)return;const e=this.oldValue,n=this.currentValue;n!==e&&this.callSubscribers(n,e,t)}handleEvent(){this.synchronizeValue()&&this.callSubscribers(this.currentValue,this.oldValue,0)}synchronizeOptions(t){const{currentValue:e,obj:n}=this,s=Array.isArray(e),i=void 0!==n.matcher?n.matcher:fu,r=n.options;let o=r.length;for(;o-- >0;){const t=r[o],n=pu.call(t,"model")?t.model:t.value;s?t.selected=-1!==e.findIndex(t=>!!i(n,t)):t.selected=!!i(n,e)}}synchronizeValue(){const t=this.obj,e=t.options,n=e.length,s=this.currentValue;let i=0;if(t.multiple){if(!(s instanceof Array))return!0;let r;const o=t.matcher||fu,a=[];for(;i<n;)r=e[i],r.selected&&a.push(pu.call(r,"model")?r.model:r.value),++i;for(i=0;i<s.length;){const t=s[i];-1===a.findIndex(e=>!!o(t,e))?s.splice(i,1):++i}for(i=0;i<a.length;){const t=a[i];-1===s.findIndex(e=>!!o(t,e))&&s.push(t),++i}return!1}let r=null;for(;i<n;){const t=e[i];if(t.selected){r=pu.call(t,"model")?t.model:t.value;break}++i}return this.oldValue=this.currentValue,this.currentValue=r,!0}start(){(this.nodeObserver=new this.obj.ownerDocument.defaultView.MutationObserver(this.handleNodeChange.bind(this))).observe(this.obj,du),this.observeArray(this.currentValue instanceof Array?this.currentValue:null),this.observing=!0}stop(){this.nodeObserver.disconnect(),this.nodeObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=null),this.observing=!1}observeArray(t){if(null!=t&&!this.obj.multiple)throw new Error("Only null or Array instances can be bound to a multi-select.");this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),null!=t&&(this.arrayObserver=this.observerLocator.getArrayObserver(t)).subscribeToCollection(this)}handleNodeChange(){this.synchronizeOptions();this.synchronizeValue()&&this.notify(0)}subscribe(t){this.hasSubscribers()||(this.handler.subscribe(this.obj,this),this.start()),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||(this.handler.dispose(),this.stop())}}Rs()(gu);class mu{constructor(t){this.obj=t,this.currentValue="",this.oldValue="",this.styles={},this.version=0,this.hasChanges=!1,this.type=10}getValue(){return this.obj.style.cssText}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}getStyleTuplesFromString(t){const e=[],n=/url\([^)]+$/;let s,i,r,o,a=0,c="";for(;a<t.length;)s=t.indexOf(";",a),-1===s&&(s=t.length),c+=t.substring(a,s),a=s+1,n.test(c)?c+=";":(i=c.indexOf(":"),r=c.substring(0,i).trim(),o=c.substring(i+1).trim(),e.push([r,o]),c="");return e}getStyleTuplesFromObject(t){let e;const n=[];for(const s in t)if(e=t[s],null!=e)if("string"!=typeof e)n.push(...this.getStyleTuples(e));else{if(s.startsWith("--")){n.push([s,e]);continue}n.push([q(s),e])}return n}getStyleTuplesFromArray(t){const e=t.length;if(e>0){const n=[];for(let s=0;s<e;++s)n.push(...this.getStyleTuples(t[s]));return n}return I}getStyleTuples(t){return"string"==typeof t?this.getStyleTuplesFromString(t):t instanceof Array?this.getStyleTuplesFromArray(t):t instanceof Object?this.getStyleTuplesFromObject(t):I}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue,e=this.styles,n=this.getStyleTuples(t);let s,i,r,o,a=this.version;this.oldValue=t;const c=n.length;for(let t=0;t<c;++t)i=n[t],r=i[0],o=i[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(s in a-=1,e)Object.prototype.hasOwnProperty.call(e,s)&&e[s]===a&&this.obj.style.removeProperty(s)}}setProperty(t,e){let n="";null!=e&&"function"==typeof e.indexOf&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.currentValue=this.oldValue=this.obj.style.cssText}}class vu{constructor(t,e,n){this.propertyKey=e,this.handler=n,this.currentValue="",this.oldValue="",this.hasChanges=!1,this.type=11,this.obj=t}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,this.handler.config.readonly||0!=(4096&e)||this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const e=this.currentValue,n=this.oldValue;this.oldValue=e,this.obj[this.propertyKey]=null!=e?e:this.handler.config.default,0==(32&t)&&this.callSubscribers(e,n,t)}}handleEvent(){const t=this.oldValue=this.currentValue,e=this.currentValue=this.obj[this.propertyKey];t!==e&&(this.oldValue=e,this.callSubscribers(e,t,0))}subscribe(t){this.hasSubscribers()||(this.handler.subscribe(this.obj,this),this.currentValue=this.oldValue=this.obj[this.propertyKey]),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t)&&!this.hasSubscribers()&&this.handler.dispose()}}Rs()(vu);const bu="http://www.w3.org/1999/xlink",yu="http://www.w3.org/XML/1998/namespace",wu="http://www.w3.org/2000/xmlns/",ku=Object.assign(_u(),{"xlink:actuate":["actuate",bu],"xlink:arcrole":["arcrole",bu],"xlink:href":["href",bu],"xlink:role":["role",bu],"xlink:show":["show",bu],"xlink:title":["title",bu],"xlink:type":["type",bu],"xml:lang":["lang",yu],"xml:space":["space",yu],xmlns:["xmlns",wu],"xmlns:xlink":["xlink",wu]}),xu=new Wr;xu.type=10;class Cu{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:vu,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class Su{constructor(t,e,n,s){this.locator=t,this.platform=e,this.dirtyChecker=n,this.svgAnalyzer=s,this.allowDirtyCheck=!0,this.events=_u(),this.globalEvents=_u(),this.overrides=_u(),this.globalOverrides=_u();const i=["change","input"],r={events:i,default:""};this.useConfig({INPUT:{value:r,checked:{type:uu,events:i},files:{events:i,readonly:!0}},SELECT:{value:{type:gu,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Rt.aliasTo(Qr,Su).register(t),Rt.singleton(Qr,Su).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,n){var s,i;const r=this.events;let o;if("string"==typeof t)o=null!==(s=r[t])&&void 0!==s?s:r[t]=_u(),null==o[e]?o[e]=new Cu(n):Au(t,e);else for(const n in t){o=null!==(i=r[n])&&void 0!==i?i:r[n]=_u();const s=t[n];for(e in s)null==o[e]?o[e]=new Cu(s[e]):Au(n,e)}}useConfigGlobal(t,e){const n=this.globalEvents;if("object"==typeof t)for(const e in t)null==n[e]?n[e]=new Cu(t[e]):Au("*",e);else null==n[t]?n[t]=new Cu(e):Au("*",t)}getAccessor(t,e,n){var s;if(e in this.globalOverrides||e in(null!==(s=this.overrides[t.tagName])&&void 0!==s?s:R))return this.getObserver(t,e,n);switch(e){case"src":case"href":case"role":return nu;default:{const n=ku[e];return void 0!==n?lu.forNs(n[1]):Eu(t,e,this.svgAnalyzer)?nu:xu}}}overrideAccessor(t,e){var n,s,i,r;let o;if("string"==typeof t)o=null!==(n=(i=this.overrides)[t])&&void 0!==n?n:i[t]=_u(),o[e]=!0;else for(const e in t)for(const n of t[e])o=null!==(s=(r=this.overrides)[e])&&void 0!==s?s:r[e]=_u(),o[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.globalOverrides[e]=!0}getObserver(t,e,n){var s,i;switch(e){case"role":return nu;case"class":return new Ha(t);case"css":case"style":return new mu(t)}const r=null!==(i=null===(s=this.events[t.tagName])||void 0===s?void 0:s[e])&&void 0!==i?i:this.globalEvents[e];if(null!=r)return new r.type(t,e,new Hc(r),n,this.locator);const o=ku[e];if(void 0!==o)return lu.forNs(o[1]);if(Eu(t,e,this.svgAnalyzer))return nu;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`Unable to observe property ${String(e)}. Register observation mapping with .useConfig().`)}return new Ur(t,e)}}function Au(t,e){throw new Error(`Mapping for property ${String(e)} of <${t} /> already exists`)}Su.inject=[ut,Po,Fr,Yh];const Tu=_u();function Eu(t,e,n){if(!0===Tu[e])return!0;if("string"!=typeof e)return!1;const s=e.slice(0,5);return Tu[e]="aria-"===s||"data-"===s||n.isStandardSvgAttribute(t,e)}function _u(){return Object.create(null)}var Iu=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Ru=function(t,e){return function(n,s){e(n,s,t)}};let Ou=class{constructor(t){this.observerLocator=t}bind(t,e,n,s,...i){if(0===i.length)throw new Error("The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">");if(s.mode!==Cs.twoWay&&s.mode!==Cs.fromView)throw new Error("The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.");const r=this.observerLocator.getObserver(s.target,s.targetProperty);if(!r.handler)throw new Error("The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.");s.targetObserver=r;const o=r.handler;r.originalHandler=o,r.handler=new Hc(new Cu({default:o.config.default,events:i,readonly:o.config.readonly}))}unbind(t,e,n,s){s.targetObserver.handler.dispose(),s.targetObserver.handler=s.targetObserver.originalHandler,s.targetObserver.originalHandler=null}};Ou=Iu([je("updateTrigger"),Ru(0,Gr)],Ou);var Pu=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},$u=function(t,e){return function(n,s){e(n,s,t)}};const ju=Symbol(),Vu={passive:!0,capture:!0},Du={passive:!0},Lu=new WeakMap;class Fu{constructor(t){this.platform=t,this.blurs=[],Lu.set(t.document,this),this.handler=Mu(this,this.blurs)}static createFor(t){return Lu.get(t.document)||new Fu(t)}register(t){const e=this.blurs;e.includes(t)||1!==e.push(t)||this.addListeners()}unregister(t){const e=this.blurs,n=e.indexOf(t);n>-1&&e.splice(n,1),0===e.length&&this.removeListeners()}addListeners(){const t=this.platform,e=t.document,n=t.window,s=this.handler;n.navigator.pointerEnabled&&e.addEventListener("pointerdown",s,Vu),e.addEventListener("touchstart",s,Vu),e.addEventListener("mousedown",s,Vu),e.addEventListener("focus",s,Vu),n.addEventListener("blur",s,Du)}removeListeners(){const t=this.platform,e=t.document,n=t.window,s=this.handler;n.navigator.pointerEnabled&&e.removeEventListener("pointerdown",s,Vu),e.removeEventListener("touchstart",s,Vu),e.removeEventListener("mousedown",s,Vu),e.removeEventListener("focus",s,Vu),n.removeEventListener("blur",s,Du)}}let qu=class{constructor(t,e){this.element=t,this.p=e,this.linkedMultiple=!0,this.searchSubTree=!0,this.linkingContext=null,this.value=ju,this.manager=Fu.createFor(e)}attached(){this.manager.register(this)}detaching(){this.manager.unregister(this)}handleEventTarget(t){if(!1===this.value)return;const e=this.p;t!==e.window&&t!==e.document&&this.contains(t)||this.triggerBlur()}contains(t){if(!this.value)return!1;let e,n,s,i,r;const o=this.element;if(Nu(o,t))return!0;if(!this.linkedWith)return!1;const a=this.p.document,c=this.linkedWith,l=this.linkingContext,h=this.searchSubTree,u=this.linkedMultiple,p=Array.isArray(c)?c:[c],d=("string"==typeof l?a.querySelector(l):l)||a.body,f=p.length;for(n=0;f>n;++n)if(r=p[n],"string"==typeof r){if(h){if(u)e=d.querySelectorAll(r);else{const t=d.querySelector(r);e=null!==t?[t]:I}for(i=e.length,s=0;i>s;++s)if(e[s].contains(t))return!0}else for(e=d.children,i=e.length,s=0;i>s;++s)if(e[s].matches(r))return!0}else if(r&&r.contains(t))return!0;return!1}triggerBlur(){this.value=!1,"function"==typeof this.onBlur&&this.onBlur.call(null)}};Pu([Yr()],qu.prototype,"value",void 0),Pu([Yr()],qu.prototype,"onBlur",void 0),Pu([Yr()],qu.prototype,"linkedWith",void 0),Pu([Yr()],qu.prototype,"linkedMultiple",void 0),Pu([Yr()],qu.prototype,"searchSubTree",void 0),Pu([Yr()],qu.prototype,"linkingContext",void 0),qu=Pu([ba("blur"),$u(0,_c),$u(1,Po)],qu);const Nu=(t,e)=>{if(t.contains(e))return!0;let n=null;for(;null!=e;){if(e===t)return!0;n=e.parentNode,null!==n||11!==e.nodeType?e=n:e=e.host}return!1},Mu=(t,e)=>{let n=!1;const s=()=>{n=!1},i=()=>{n=!0,t.platform.domWriteQueue.queueTask(s,{preempt:!0})},r=t=>{n||(o(t),i())},o=t=>{const n=t.composed?t.composedPath()[0]:t.target;if(null!==n)for(let t=0,s=e.length;t<s;++t)e[t].handleEventTarget(n)};return{onpointerdown:r,ontouchstart:r,onmousedown:r,onfocus:s=>{if(n)return;if(s.target===t.platform.window)for(let t=0,n=e.length;n>t;++t)e[t].triggerBlur();else o(s);i()},onblur:()=>{n=!1;for(let t=0,n=e.length;t<n;++t)e[t].triggerBlur()},handleEvent(t){this["on"+t.type](t)}}};var Bu=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Uu=function(t,e){return function(n,s){e(n,s,t)}};let zu=class{constructor(t,e){this.element=t,this.p=e,this.needsApply=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.apply():this.needsApply=!0}attached(){this.needsApply&&(this.needsApply=!1,this.apply());const t=this.element;t.addEventListener("focus",this),t.addEventListener("blur",this)}afterDetachChildren(){const t=this.element;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.isElFocused||(this.value=!1)}apply(){const t=this.element,e=this.isElFocused,n=this.value;n&&!e?t.focus():!n&&e&&t.blur()}get isElFocused(){return this.element===this.p.document.activeElement}};Bu([Yr({mode:Cs.twoWay})],zu.prototype,"value",void 0),zu=Bu([ba("focus"),Uu(0,_c),Uu(1,Po)],zu);var Hu=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Wu=function(t,e){return function(n,s){e(n,s,t)}};let Ku=class{constructor(t,e,n){this.el=t,this.p=e,this.isActive=!1,this.task=null,this.$val="",this.$prio="",this.update=()=>{this.task=null,Boolean(this.value)!==this.isToggled&&(this.isToggled===this.base?(this.isToggled=!this.base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.isToggled=this.base,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.isToggled=this.base="hide"!==n.alias}binding(){this.isActive=!0,this.update()}detaching(){var t;this.isActive=!1,null===(t=this.task)||void 0===t||t.cancel(),this.task=null}valueChanged(){this.isActive&&null===this.task&&(this.task=this.p.domWriteQueue.queueTask(this.update))}};Hu([Yr],Ku.prototype,"value",void 0),Ku=Hu([ba("show"),function(...t){return function(e){const n=tt.annotation.keyFor("aliases"),s=T.getOwn(n,e);void 0===s?T.define(n,t,e):s.push(...t)}}("hide"),Wu(0,_c),Wu(1,Po),Wu(2,Jc)],Ku);var Gu=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Qu=function(t,e){return function(n,s){e(n,s,t)}};let Zu=class{constructor(t,e,n){this.factory=t,this.originalLoc=e,this.p=n,this.id=B("au$component"),this.strict=!1,this.currentTarget=n.document.createElement("div"),this.view=this.factory.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Pc.set(t,e);else{const n=t.childNodes;for(let t=0,s=n.length;t<s;++t)Pc.set(n[t],e)}}(this.view.nodes,e)}attaching(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const s=this.currentTarget=this.resolveTarget();return this.view.setHost(s),this.$activating(t,s,n)}detaching(t,e,n){return this.$deactivating(t,this.currentTarget,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.currentTarget,n=this.currentTarget=this.resolveTarget();if(e===n)return;this.view.setHost(n);const s=Z(this.$deactivating(null,n,t.flags),()=>this.$activating(null,n,t.flags));s instanceof Promise&&s.catch(t=>{throw t})}$activating(t,e,n){const{activating:s,callbackContext:i,view:r}=this;return r.setHost(e),Z(null==s?void 0:s.call(i,e,r),()=>this.activate(t,e,n))}activate(t,e,n){const{$controller:s,view:i}=this;return null!==t?Z(i.activate(null!=t?t:i,s,n,s.scope),()=>this.$activated(e)):(i.nodes.appendTo(e),this.$activated(e))}$activated(t){const{activated:e,callbackContext:n,view:s}=this;return null==e?void 0:e.call(n,t,s)}$deactivating(t,e,n){const{deactivating:s,callbackContext:i,view:r}=this;return Z(null==s?void 0:s.call(i,e,r),()=>this.deactivate(t,e,n))}deactivate(t,e,n){const{$controller:s,view:i}=this;return null!==t?Z(i.deactivate(t,s,n),()=>this.$deactivated(e)):(i.nodes.remove(),this.$deactivated(e))}$deactivated(t){const{deactivated:e,callbackContext:n,view:s}=this;return null==e?void 0:e.call(n,t,s)}resolveTarget(){const t=this.p,e=t.document;let n=this.target,s=this.renderContext;if(""===n){if(this.strict)throw new Error("Empty querySelector");return e.body}if("string"==typeof n){let i=e;"string"==typeof s&&(s=e.querySelector(s)),s instanceof t.Node&&(i=s),n=i.querySelector(n)}if(n instanceof t.Node)return n;if(null==n){if(this.strict)throw new Error("Portal target not found");return e.body}return n}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};Gu([Yr({primary:!0})],Zu.prototype,"target",void 0),Gu([Yr({callback:"targetChanged"})],Zu.prototype,"renderContext",void 0),Gu([Yr()],Zu.prototype,"strict",void 0),Gu([Yr()],Zu.prototype,"deactivating",void 0),Gu([Yr()],Zu.prototype,"activating",void 0),Gu([Yr()],Zu.prototype,"deactivated",void 0),Gu([Yr()],Zu.prototype,"activated",void 0),Gu([Yr()],Zu.prototype,"callbackContext",void 0),Zu=Gu([ya("portal"),Qu(0,xa),Qu(1,Rc),Qu(2,Po)],Zu);class Ju{constructor(t,e,n){this.factory=t,this.flags=n,this.id=B("au$component"),this.view=this.factory.create().setLocation(e)}attaching(t,e,n){const{$controller:s}=this;return this.view.activate(t,s,n|this.flags,s.scope,s.hostScope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}class Yu extends Ju{constructor(t,e){super(t,e,8192)}}Yu.inject=[xa,Rc];class Xu extends Ju{constructor(t,e){super(t,e,2048)}}Xu.inject=[xa,Rc],ya("frequent-mutations")(Yu),ya("observe-shallow")(Xu);var tp=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},ep=function(t,e){return function(n,s){e(n,s,t)}};let np=class{constructor(t,e){this.ifFactory=t,this.location=e,this.id=B("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1}attaching(t,e,n){const s=this.view=this.updateView(this.value,n);if(void 0!==s){const{$controller:e}=this;return s.activate(t,e,n,e.scope,e.hostScope)}}detaching(t,e,n){if(void 0!==this.view)return this.view.deactivate(t,this.$controller,n)}valueChanged(t,e,n){var s;const{$controller:i}=this;if(!i.isActive)return;const r=Z(null===(s=this.view)||void 0===s?void 0:s.deactivate(this.view,i,n),()=>{const t=this.view=this.updateView(this.value,n);if(void 0!==t)return t.activate(t,i,n,i.scope,i.hostScope)});r instanceof Promise&&r.catch(t=>{throw t})}updateView(t,e){return t?this.ifView=this.ensureView(this.ifView,this.ifFactory,e):null!=this.elseFactory?this.elseView=this.ensureView(this.elseView,this.elseFactory,e):void 0}ensureView(t,e,n){return void 0===t&&(t=e.create(n)),t.setLocation(this.location),t}dispose(){void 0!==this.ifView&&(this.ifView.dispose(),this.ifView=void 0),void 0!==this.elseView&&(this.elseView.dispose(),this.elseView=void 0),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};tp([Yr],np.prototype,"value",void 0),np=tp([ya("if"),ep(0,xa),ep(1,Rc)],np);let sp=class{constructor(t){this.factory=t,this.id=B("au$component")}link(t,e,n,s,i,r){const o=n.children,a=o[o.length-1];if(a instanceof np)a.elseFactory=this.factory;else{if(!(a.viewModel instanceof np))throw new Error("Unsupported IfBehavior");a.viewModel.elseFactory=this.factory}}};sp=tp([ya({name:"else"}),ep(0,xa)],sp);var ip=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},rp=function(t,e){return function(n,s){e(n,s,t)}};function op(t){t.dispose()}let ap=class{constructor(t,e,n){this.location=t,this.parent=e,this.factory=n,this.id=B("au$component"),this.hasPendingInstanceMutation=!1,this.observer=void 0,this.views=[],this.key=void 0,this.normalizedItems=void 0}binding(t,e,n){this.checkCollectionObserver(n);const s=this.parent.bindings;let i=void 0;for(let t=0,e=s.length;t<e;++t)if(i=s[t],i.target===this&&"items"===i.targetProperty){this.forOf=i.sourceExpression;break}this.local=this.forOf.declaration.evaluate(n,this.$controller.scope,null,i.locator,null)}attaching(t,e,n){return this.normalizeToArray(n),this.activateAllViews(t,n)}detaching(t,e,n){return this.checkCollectionObserver(n),this.deactivateAllViews(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.checkCollectionObserver(t),t|=8,this.normalizeToArray(t);const n=Z(this.deactivateAllViews(null,t),()=>this.activateAllViews(null,t));n instanceof Promise&&n.catch(t=>{throw t})}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive)if(e|=n.flags,e|=8,this.normalizeToArray(e),void 0===t){const t=Z(this.deactivateAllViews(null,e),()=>this.activateAllViews(null,e));t instanceof Promise&&t.catch(t=>{throw t})}else{const n=this.views.length;if(function(t){let e=0,n=0;const s=t.length;for(let i=0;i<s;++i){for(;t.deletedItems[n]<=i-e;)++n,--e;-2===t[i]?++e:t[i]+=e}}(t),t.deletedItems.length>0){t.deletedItems.sort(U);const s=Z(this.deactivateAndRemoveViewsByKey(t,e),()=>this.createAndActivateAndSortViewsByKey(n,t,e));s instanceof Promise&&s.catch(t=>{throw t})}else this.createAndActivateAndSortViewsByKey(n,t,e)}}checkCollectionObserver(t){const e=this.observer;if(64&t)void 0!==e&&e.unsubscribeFromCollection(this);else if(this.$controller.isActive){const t=this.observer=function(t,e){let n;return t instanceof Array?n=fi(t,e):t instanceof Map?n=Ti(t,e):t instanceof Set&&(n=Fi(t,e)),n}(this.items,this.$controller.lifecycle);e!==t&&e&&e.unsubscribeFromCollection(this),t&&t.subscribeToCollection(this)}}normalizeToArray(t){const e=this.items;if(e instanceof Array)return void(this.normalizedItems=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,(t,e,s)=>{n[e]=s}),this.normalizedItems=n}activateAllViews(t,e){let n,s,i,r=void 0;const{$controller:o,factory:a,local:c,location:l,items:h}=this,u=o.scope,p=o.hostScope,d=this.forOf.count(e,h),f=this.views=Array(d);if(this.forOf.iterate(e,h,(h,g,m)=>{s=f[g]=a.create(e).setLocation(l),s.nodes.unlink(),i=Ie.fromParent(u,Ee.create(c,m)),up(i.overrideContext,g,d),n=s.activate(null!=t?t:s,o,e,i,p),n instanceof Promise&&(null!=r?r:r=[]).push(n)}),void 0!==r)return 1===r.length?r[0]:Promise.all(r)}deactivateAllViews(t,e){let n,s,i=void 0;const{views:r,$controller:o}=this;for(let a=0,c=r.length;a<c;++a)s=r[a],s.release(),n=s.deactivate(null!=t?t:s,o,e),n instanceof Promise&&(null!=i?i:i=[]).push(n);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}deactivateAndRemoveViewsByKey(t,e){let n,s,i=void 0;const{$controller:r,views:o}=this,a=t.deletedItems,c=a.length;let l=0;for(;l<c;++l)s=o[a[l]],s.release(),n=s.deactivate(s,r,e),n instanceof Promise&&(null!=i?i:i=[]).push(n);l=0;let h=0;for(;l<c;++l)h=a[l]-l,o.splice(h,1);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}createAndActivateAndSortViewsByKey(t,e,n){var s;let i,r,o,a=void 0;const{$controller:c,factory:l,local:h,normalizedItems:u,location:p,views:d}=this,f=e.length;for(let t=0;t<f;++t)-2===e[t]&&(r=l.create(n),d.splice(t,0,r));if(d.length!==f)throw new Error(`viewsLen=${d.length}, mapLen=${f}`);const g=c.scope,m=c.hostScope,v=e.length;!function(t,e){const n=t.slice(),s=e.length;let i=0,r=0;for(;i<s;)r=e[i],-2!==r&&(t[i]=n[r]),++i}(d,e);const b=function(t){const e=t.length;e>cp&&(cp=e,lp=new Int32Array(e),hp=new Int32Array(e));let n=0,s=0,i=0,r=0,o=0,a=0,c=0,l=0;for(;r<e;r++)if(s=t[r],-2!==s){if(o=lp[n],i=t[o],-2!==i&&i<s){hp[r]=o,lp[++n]=r;continue}for(a=0,c=n;a<c;)l=a+c>>1,i=t[lp[l]],-2!==i&&i<s?a=l+1:c=l;i=t[lp[a]],(s<i||-2===i)&&(a>0&&(hp[r]=lp[a-1]),lp[a]=r)}r=++n;const h=new Int32Array(r);s=lp[n-1];for(;n-- >0;)h[n]=s,s=hp[s];for(;r-- >0;)lp[r]=0;return h}(e),y=b.length;let w,k=y-1,x=v-1;for(;x>=0;--x)r=d[x],w=d[x+1],r.nodes.link(null!==(s=null==w?void 0:w.nodes)&&void 0!==s?s:p),-2===e[x]?(o=Ie.fromParent(g,Ee.create(h,u[x])),up(o.overrideContext,x,v),r.setLocation(p),i=r.activate(r,c,n,o,m),i instanceof Promise&&(null!=a?a:a=[]).push(i)):k<0||1===y||x!==b[k]?(up(r.scope.overrideContext,x,v),r.nodes.insertBefore(r.location)):(t!==v&&up(r.scope.overrideContext,x,v),--k);if(void 0!==a)return 1===a.length?a[0]:Promise.all(a)}dispose(){this.views.forEach(op),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,s=e.length;n<s;++n)if(!0===e[n].accept(t))return!0}};ip([Yr],ap.prototype,"items",void 0),ap=ip([ya("repeat"),rp(0,Rc),rp(1,Ac),rp(2,xa)],ap);let cp=16,lp=new Int32Array(cp),hp=new Int32Array(cp);function up(t,e,n){const s=0===e,i=e===n-1,r=e%2==0;t.$index=e,t.$first=s,t.$last=i,t.$middle=!s&&!i,t.$even=r,t.$odd=!r,t.$length=n}var pp=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},dp=function(t,e){return function(n,s){e(n,s,t)}};let fp=class{constructor(t,e){this.factory=t,this.location=e,this.id=B("au$component"),this.id=B("au$component"),this.view=this.factory.create().setLocation(e)}valueChanged(t,e,n){this.$controller.isActive&&this.activateView(this.view,32)}attaching(t,e,n){return this.activateView(t,n)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}activateView(t,e){const{$controller:n,value:s}=this,i=Ie.fromParent(n.scope,void 0===s?{}:s);return this.view.activate(t,n,e,i,n.hostScope)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};pp([Yr],fp.prototype,"value",void 0),fp=pp([ya("with"),dp(0,xa),dp(1,Rc)],fp);var gp=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},mp=function(t,e){return function(n,s){e(n,s,t)}};let vp=class{constructor(t,e){this.factory=t,this.location=e,this.id=B("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,n,s,i,r){this.view=this.factory.create(t,this.$controller).setLocation(this.location)}attaching(t,e,n){const s=this.view,i=this.$controller;return this.queue(()=>s.activate(t,i,n,i.scope,i.hostScope)),this.queue(()=>this.swap(t,n,this.value)),this.promise}detaching(t,e,n){return this.queue(()=>this.view.deactivate(t,this.$controller,n)),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,n){this.$controller.isActive&&this.queue(()=>this.swap(null,n,this.value))}caseChanged(t,e){this.queue(()=>this.handleCaseChange(t,e))}handleCaseChange(t,e){const n=t.isMatch(this.value,e),s=this.activeCases,i=s.length;if(!n)return i>0&&s[0].id===t.id?this.clearActiveCases(null,e):void 0;if(i>0&&s[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases;for(let n=e.indexOf(t),s=e.length;n<s&&o;n++){const t=e[n];r.push(t),o=t.fallThrough}}else r.push(t);return Z(this.clearActiveCases(null,e,r),()=>(this.activeCases=r,this.activateCases(null,e)))}swap(t,e,n){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(n,e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const r=this.defaultCase;return 0===s.length&&void 0!==r&&s.push(r),Z(this.activeCases.length>0?this.clearActiveCases(t,e,s):void 0,()=>{if(this.activeCases=s,0!==s.length)return this.activateCases(t,e)})}activateCases(t,e){const n=this.$controller;if(!n.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const r=n.scope,o=n.hostScope;return 1===i?s[0].activate(t,e,r,o):J(...s.map(n=>n.activate(t,e,r,o)))}clearActiveCases(t,e,n=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return n.includes(i)?void 0:(s.length=0,i.deactivate(t,e))}return Z(J(...s.reduce((s,i)=>(n.includes(i)||s.push(i.deactivate(t,e)),s),[])),()=>{s.length=0})}}queue(t){const e=this.promise;let n=void 0;n=this.promise=Z(Z(e,t),()=>{this.promise===n&&(this.promise=void 0)})}accept(t){return!0===this.$controller.accept(t)||(!!this.activeCases.some(e=>e.accept(t))||void 0)}};gp([Yr],vp.prototype,"value",void 0),vp=gp([ya("switch"),mp(0,xa),mp(1,Rc)],vp);let bp=class{constructor(t,e,n,s){this.factory=t,this.locator=e,this.id=B("au$component"),this.fallThrough=!1,this.debug=s.config.level<=1,this.logger=s.scopeTo(`${this.constructor.name}-#${this.id}`),this.view=this.factory.create().setLocation(n)}link(t,e,n,s,i,r){const o=n.parent,a=null==o?void 0:o.viewModel;if(!(a instanceof vp))throw new Error("The parent switch not found; only `*[switch] > *[case|default-case]` relation is supported.");this.$switch=a,this.linkToSwitch(a)}detaching(t,e,n){return this.deactivate(t,n)}isMatch(t,e){this.debug&&this.logger.debug("isMatch()");const n=this.value;return Array.isArray(n)?(void 0===this.observer&&(this.observer=this.observeCollection(e,n)),n.includes(t)):n===t}valueChanged(t,e,n){var s;Array.isArray(t)?(null===(s=this.observer)||void 0===s||s.removeCollectionSubscriber(this),this.observer=this.observeCollection(n,t)):void 0!==this.observer&&this.observer.removeCollectionSubscriber(this),this.$switch.caseChanged(this,n)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,n,s){const i=this.view;if(!i.isActive)return i.activate(null!=t?t:i,this.$controller,e,n,s)}deactivate(t,e){const n=this.view;if(n.isActive)return n.deactivate(null!=t?t:n,this.$controller,e)}dispose(){var t,e;null===(t=this.observer)||void 0===t||t.removeCollectionSubscriber(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}observeCollection(t,e){const n=this.locator.getArrayObserver(e);return n.addCollectionSubscriber(this),n}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};gp([Yr],bp.prototype,"value",void 0),gp([Yr({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:Cs.oneTime})],bp.prototype,"fallThrough",void 0),bp=gp([ya("case"),mp(0,xa),mp(1,Gr),mp(2,Rc),mp(3,se)],bp);let yp=class extends bp{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("Multiple 'default-case's are not allowed.");t.defaultCase=this}};function wp(t,e,n,s){if("string"==typeof e)return function(t,e,n,s){const i=[],r=[],o=[],a=t.document.createElement(e);let c=!1;n&&Object.keys(n).forEach(t=>{const e=n[t];Yc(e)?(c=!0,i.push(e)):a.setAttribute(t,e)});c&&(a.className="au",r.push(i));s&&xp(t,a,s,r,o);return new kp(a,r,o)}(t,e,n,s);if(va.isType(e))return function(t,e,n,s){const i=va.getDefinition(e),r=i.name,o=[],a=[o],c=[],l=[],h=i.bindables,u=t.document.createElement(r);u.className="au",c.includes(e)||c.push(e);o.push(new rl(r,void 0,l,null)),n&&Object.keys(n).forEach(t=>{const e=n[t];if(Yc(e))l.push(e);else{void 0!==h[t]?l.push({type:"re",to:t,value:e}):l.push(new pl(e,t))}});s&&xp(t,u,s,a,c);return new kp(u,a,c)}(t,e,n,s);throw new Error("Invalid tagOrType.")}yp=gp([ya("default-case")],yp);class kp{constructor(t,e,n){this.node=t,this.instructions=e,this.dependencies=n,this.lazyDefinition=void 0}get definition(){return void 0===this.lazyDefinition&&(this.lazyDefinition=ga.create({name:va.generateName(),template:this.node,needsCompile:"string"==typeof this.node,instructions:this.instructions,dependencies:this.dependencies})),this.lazyDefinition}getContext(t){return Ma(this.definition,t)}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return this.getContext(t).getViewFactory()}mergeInto(t,e,n){t.appendChild(this.node),e.push(...this.instructions),n.push(...this.dependencies)}}function xp(t,e,n,s,i){for(let r=0,o=n.length;r<o;++r){const o=n[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,s,i)}}}var Cp=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Sp=function(t,e){return function(n,s){e(n,s,t)}};function Ap(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}let Tp=class{constructor(t,e){this.p=t,this.id=B("au$component"),this.subject=void 0,this.composing=!1,this.view=void 0,this.lastSubject=void 0,this.properties=e.instructions.reduce(Ap,{})}attaching(t,e,n){const{subject:s,view:i}=this;return void 0===i||this.lastSubject!==s?(this.lastSubject=s,this.composing=!0,this.compose(void 0,s,t,n)):this.compose(i,s,t,n)}detaching(t,e,n){return this.deactivate(this.view,t,n)}subjectChanged(t,e,n){const{$controller:s}=this;if(!s.isActive)return;if(this.lastSubject===t)return;this.lastSubject=t,this.composing=!0,n|=s.flags;const i=Z(this.deactivate(this.view,null,n),()=>this.compose(void 0,t,null,n));i instanceof Promise&&i.catch(t=>{throw t})}compose(t,e,n,s){return Z(void 0===t?Z(e,t=>this.resolveView(t,s)):t,t=>this.activate(t,n,s))}deactivate(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}activate(t,e,n){const{$controller:s}=this;return Z(null==t?void 0:t.activate(null!=e?e:t,s,n,s.scope,s.hostScope),()=>{this.composing=!1})}resolveView(t,e){const n=this.provideViewFor(t,e);if(n)return n.setLocation(this.$controller.location),n.lockScope(this.$controller.scope),n}provideViewFor(t,e){if(t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(this.$controller.context);if("create"in t)return t.create(e);if("template"in t){return Ma(ga.getOrCreate(t),this.$controller.context).getViewFactory().create(e)}return wp(this.p,t,this.properties,this.$controller.host.childNodes).createView(this.$controller.context)}}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};Cp([Yr],Tp.prototype,"subject",void 0),Cp([Yr({mode:Cs.fromView})],Tp.prototype,"composing",void 0),Tp=Cp([da({name:"au-compose",template:null,containerless:!0}),Sp(0,Po),Sp(1,Jc)],Tp);var Ep=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},_p=function(t,e){return function(n,s){e(n,s,t)}};const Ip=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Rp=lt.createInterface("ISanitizer").withDefault(t=>t.singleton(class{sanitize(t){return t.replace(Ip,"")}}));let Op=class{constructor(t){this.sanitizer=t}toView(t){return null==t?null:this.sanitizer.sanitize(t)}};Op=Ep([_p(0,Rp)],Op),qe("sanitize")(Op);var Pp=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},$p=function(t,e){return function(n,s){e(n,s,t)}};let jp=class{constructor(t){this.viewLocator=t}toView(t,e){return this.viewLocator.getViewComponentForObject(t,e)}};jp=Pp([$p(0,_a)],jp),qe("view")(jp);const Vp=[qh,Su],Dp=[Co,xo],Lp=[ph,ch,hh,lh,uh,dh,fh,kh,gh,mh,vh,wh,yh,bh],Fp=[Kh,Uh,zh,Hh,Zh,Jh,Wh,Op,jp,Yu,Xu,np,sp,ap,fp,vp,bp,yp,iu,au,Ou,Tp,Zu,zu,qu,Ku,La],qp=[Il,Rl,Tl,El,_l,kl,xl,Cl,Sl,Al,Vl,Nl,Dl,Ll,Fl,ql,jl],Np={register:t=>t.register(...Vp,...Fp,...Dp,...Lp,...qp),createContainer(){return this.register(lt.createContainer())}},Mp=lt.createInterface("IAurelia").noDefault();const Bp=0,Up=1,zp=2,Hp=3,Wp={maxRetries:3,interval:1e3,strategy:Bp};class Kp{constructor(t){if(this.retryConfig={...Wp,...void 0!==t?t:{}},this.retryConfig.strategy===zp&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return Reflect.deleteProperty(e,"retryConfig"),t}responseError(t,e,n){const{retryConfig:s}=e,{requestClone:i}=s;return Promise.resolve().then(()=>{if(s.counter<s.maxRetries){const r=void 0===s.doRetry||s.doRetry(t,e);return Promise.resolve(r).then(r=>{if(r){s.counter++;const t=function(t){const{interval:e,strategy:n,minRandomInterval:s,maxRandomInterval:i,counter:r}=t;if("function"==typeof n)return t.strategy(r);switch(n){case Bp:return Gp[Bp](e);case Up:return Gp[Up](r,e);case zp:return Gp[zp](r,e);case Hp:return Gp[Hp](r,e,s,i);default:throw new Error("Unrecognized retry strategy")}}(s);return new Promise(e=>setTimeout(e,isNaN(t)?0:t)).then(()=>{const t=i.clone();return"function"==typeof s.beforeRetry?s.beforeRetry(t,n):t}).then(t=>{const e={...t,retryConfig:s};return n.fetch(e)})}throw Reflect.deleteProperty(e,"retryConfig"),t})}throw Reflect.deleteProperty(e,"retryConfig"),t})}}const Gp=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,n=0,s=6e4)=>Math.random()*(s-n)+n];class Qp{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:Zp})}withRetry(t){const e=new Kp(t);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function Zp(t){if(!t.ok)throw t;return t}const Jp=/^([a-z][a-z0-9+\-.]*:)?\/\//i;lt.createInterface("IHttpClient").withDefault(t=>t.singleton(Yp));class Yp{constructor(){this.dispatcher=null,this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[]}configure(t){let e;if("object"==typeof t){e={defaults:t}}else{if("function"!=typeof t)throw new Error("invalid config");{e=new Qp,e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.interceptors,e.dispatcher=this.dispatcher;const n=t(e);Object.prototype.isPrototypeOf.call(Qp.prototype,n)&&(e=n)}}const n=e.defaults;if(void 0!==n&&Object.prototype.isPrototypeOf.call(Headers.prototype,n.headers))throw new Error("Default headers must be a plain object.");const s=e.interceptors;if(void 0!==s&&s.length){if(s.filter(t=>Object.prototype.isPrototypeOf.call(Kp.prototype,t)).length>1)throw new Error("Only one RetryInterceptor is allowed.");const t=s.findIndex(t=>Object.prototype.isPrototypeOf.call(Kp.prototype,t));if(t>=0&&t!==s.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=n,this.interceptors=void 0!==e.interceptors?e.interceptors:[],this.dispatcher=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.trackRequestStart();let n=this.buildRequest(t,e);return this.processRequest(n,this.interceptors).then(t=>{let e;if(Object.prototype.isPrototypeOf.call(Response.prototype,t))e=Promise.resolve(t);else{if(!Object.prototype.isPrototypeOf.call(Request.prototype,t))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);n=t,e=fetch(n)}return this.processResponse(e,this.interceptors,n)}).then(t=>Object.prototype.isPrototypeOf.call(Request.prototype,t)?this.fetch(t):t).then(t=>(this.trackRequestEnd(),t),t=>{throw this.trackRequestEnd(),t})}buildRequest(t,e){const n=null!==this.defaults?this.defaults:{};let s,i,r;const o=function(t){const e={},n=void 0!==t?t:{};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]="function"==typeof n[t]?n[t]():n[t]);return e}(n.headers);if(Object.prototype.isPrototypeOf.call(Request.prototype,t))s=t,r=new Headers(s.headers).get("Content-Type");else{e||(e={}),i=e.body;const o=void 0!==i?{body:i}:null,a={...n,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),s=new Request(function(t,e){if(Jp.test(e))return e;return(void 0!==t?t:"")+e}(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?s.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==i&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(i)&&s.headers.set("Content-Type","application/json")),function(t,e){const n=void 0!==e?e:{};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&!t.has(e)&&t.set(e,n[e])}(s.headers,o),void 0!==i&&Object.prototype.isPrototypeOf.call(Blob.prototype,i)&&i.type&&s.headers.set("Content-Type",i.type),s}get(t,e){return this.fetch(t,e)}post(t,e,n){return this.callFetch(t,e,n,"POST")}put(t,e,n){return this.callFetch(t,e,n,"PUT")}patch(t,e,n){return this.callFetch(t,e,n,"PATCH")}delete(t,e,n){return this.callFetch(t,e,n,"DELETE")}trackRequestStart(){if(this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});setTimeout(()=>{this.dispatcher.dispatchEvent(t)},1)}}trackRequestEnd(){if(this.isRequesting=!!--this.activeRequestCount,!this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout(()=>{this.dispatcher.dispatchEvent(t)},1)}}processRequest(t,e){return this.applyInterceptors(t,e,"request","requestError",this)}processResponse(t,e,n){return this.applyInterceptors(t,e,"response","responseError",n,this)}applyInterceptors(t,e,n,s,...i){return(void 0!==e?e:[]).reduce((t,e)=>{const r=e[n],o=e[s];return t.then(r?t=>r.call(e,t,...i):Xp,o?t=>o.call(e,t,...i):td)},Promise.resolve(t))}callFetch(t,e,n,s){return n||(n={}),n.method=s,e&&(n.body=e),this.fetch(t,n)}}function Xp(t){return t}function td(t){throw t}var ed=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},nd=function(t,e){return function(n,s){e(n,s,t)}};let sd=class t{constructor(e){this.options={useHref:!0,callback:()=>{}},this.isActive=!1,this.handler=e=>{const n=t.getEventInfo(e,this.window,this.options);n.shouldHandleEvent&&(e.preventDefault(),this.options.callback(n))},this.window=e.window,this.document=e.document}static getEventInfo(e,n,s){var i;const r={shouldHandleEvent:!1,instruction:null,anchor:null},o=r.anchor=e.currentTarget;if(!o||!t.targetIsThisWindow(o,n))return r;if(o.hasAttribute("external"))return r;if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return r;const a=ka.for(o,"goto"),c=void 0!==a?a.viewModel.value:null,l=ka.for(o,"load"),h=void 0!==l?l.viewModel.value:null,u=s.useHref&&o.hasAttribute("href")?o.getAttribute("href"):null;if(!(null!==c&&0!==c.length||null!==h&&0!==h.length||null!==u&&0!==u.length))return r;r.anchor=o,r.instruction=null!==(i=null!=h?h:c)&&void 0!==i?i:u;const p=0===e.button;return r.shouldHandleEvent=p,r}static targetIsThisWindow(t,e){const n=t.getAttribute("target");return!n||n===e.name||"_self"===n}start(t){if(this.isActive)throw new Error("Link handler has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Link handler has not been started");this.isActive=!1}};function id(t,e){const n=[];let s=t.findIndex(e);for(;s>=0;)n.push(t.splice(s,1)[0]),s=t.findIndex(e);return n}function rd(t,e){console.warn(`[Deprecated] The ${t} has been deprecated. Please use the ${e} instead.`)}function od(t){if(!t||!t.length)return{};const e={},n=t.replace("+"," ").split("&");for(const t of n){const[n,s]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(void 0!==s?s:n)}return e}sd=ed([nd(0,Po)],sd);class ad{constructor(t={instruction:"",fullStateInstruction:""}){var e;this.navigation=null!==(e=t.navigation)&&void 0!==e?e:{first:!1,new:!1,refresh:!1,forward:!1,back:!1,replace:!1},this.repeating=t.repeating,this.fromBrowser=t.fromBrowser,this.origin=t.origin,this.replacing=t.replacing,this.refreshing=t.refreshing,this.untracked=t.untracked,this.historyMovement=t.historyMovement,this.resolve=t.resolve,this.reject=t.reject,this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.route=t.route,this.path=t.path,this.title=t.title,this.query=t.query,this.parameters=t.parameters,this.data=t.data}get useFullStateInstruction(){var t,e;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e}toStored(){return{navigation:this.navigation,repeating:this.repeating,instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,route:this.route,path:this.path,title:this.title,query:this.query,parameters:this.parameters,data:this.data}}}class cd{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}get stop(){return this.isCancelled||this.isRejected}static run(...t){const e=new cd,n=cd.$run(e,...t);return n instanceof Promise&&(this.runners.set(n,e),n.then(()=>{e.isDone=!0,e.isAsync&&!e.stop&&(e.isResolved=!0),this.runners.delete(n)}).catch(t=>{throw t})),n}static runner(t){if(t instanceof Promise)return cd.runners.get(t)}static cancel(t){const e=cd.runner(t);void 0!==e&&e.cancel()}static runAll(t){const e=new cd,n=cd.$runAll(e,t);if(e.isAsync){const t=Promise.all(n);return this.runners.set(t,e),t.then(()=>{e.isDone=!0,e.isAsync&&!e.stop&&(e.isResolved=!0),this.runners.delete(t)}).catch(t=>{throw t}),t}return n}static runOne(t){let e;for(;t instanceof Function;)(t=t(e))instanceof Function||t instanceof Promise||(e=t);return t instanceof Function||t instanceof Promise||(e=t),t instanceof Promise?t.then(t=>cd.runOne(t)).catch(t=>{throw t}):e}cancel(){this.isCancelled=!0}static $run(t,...e){let n;for(;e.length>0&&!t.stop;){for(n=e.shift();n instanceof Function&&!t.stop;)n=n(t.value),n instanceof Function||n instanceof Promise||(t.value=n);if(n instanceof Function||n instanceof Promise||(t.value=n),n instanceof Promise)break}return n instanceof Promise&&!t.stop?(t.isAsync=!0,n.then(n=>cd.$run(t,n,...e)).catch(e=>{throw t.isRejected=!0,e})):t.value}static $runAll(t,e){const n=new Array(e.length);return e.forEach((e,s)=>{for(;e instanceof Function;)(e=e(n[s]))instanceof Function||e instanceof Promise||(n[s]=e);e instanceof Function||(n[s]=e),e instanceof Promise&&(t.isAsync=!0)}),n}}cd.runners=new WeakMap;class ld{constructor(){this.isPending=!0,this.promise=new Promise((t,e)=>{this.res=t,this.rej=e})}resolve(t){this.res(t),this.isPending=!1}reject(t){this.rej(t),this.isPending=!1}}class hd{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof ld&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof ld&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new ld;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof ld?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof ld)}clone(){const t=new hd;return t.map=new Map(this.map),t}}var ud,pd;!function(t){t[t.none=0]="none",t[t.created=1]="created",t[t.activated=3]="activated"}(ud||(ud={}));class dd{constructor(t=qd.create(null,""),e=new ad({instruction:"",fullStateInstruction:""}),n=null){var s;this.content=t,this.instruction=e,this.contentStates=new hd,this.loaded=!1,this.fromCache=!1,this.fromHistory=!1,this.reentry=!1,this.content.isComponentType()||null===(null!==(s=null==n?void 0:n.container)&&void 0!==s?s:null)||(this.content.componentType=this.toComponentType(n.container))}get componentInstance(){return this.content.componentInstance}get viewport(){return this.content.viewport}equalComponent(t){return this.content.sameComponent(t.content)}equalParameters(t){return this.content.sameComponent(t.content,!0)&&this.instruction.query===t.instruction.query}reentryBehavior(){return null!==this.content.componentInstance&&"reentryBehavior"in this.content.componentInstance&&void 0!==this.content.componentInstance.reentryBehavior?this.content.componentInstance.reentryBehavior:"default"}isCacheEqual(t){return this.content.sameComponent(t.content,!0)}contentController(t){return gc.forCustomElement(null,t.container,this.content.componentInstance,t.element,null,void 0)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.content.componentInstance=this.toComponentInstance(t.container)}catch(n){if(void 0===e)throw n;this.content.setParameters({id:this.content.componentName}),this.content.setComponent(e);try{this.content.componentInstance=this.toComponentInstance(t.container)}catch(t){throw n}}if(this.contentStates.set("created",void 0),!this.contentStates.has("loaded")&&this.content.componentInstance&&(!this.fromCache||!this.fromHistory)){this.contentController(t).parent=t.controller}}}canLoad(t,e){if(!this.contentStates.has("created")||this.contentStates.has("guarded")&&!this.reentry)return!0;if(this.contentStates.set("guarded",void 0),!this.content.componentInstance)return!1;if(!this.content.componentInstance.canLoad)return!0;const n=this.content.componentType?this.content.componentType.parameters:null;this.instruction.parameters=this.content.toSpecifiedParameters(n);const s={...od(this.instruction.query),...this.instruction.parameters},i=this.content.componentInstance.canLoad(s,this.instruction,e);return"boolean"==typeof i?i:"string"==typeof i?[t.router.createViewportInstruction(i,t)]:i}canUnload(t){return!this.content.componentInstance||!this.content.componentInstance.canUnload||(!this.contentStates.has("loaded")||this.content.componentInstance.canUnload(t,this.instruction))}load(t){return cd.run(()=>this.contentStates.await("guarded"),()=>{if(this.contentStates.has("created")&&(!this.contentStates.has("loaded")||this.reentry)&&(this.reentry=!1,this.contentStates.set("loaded",void 0),this.content.componentInstance&&this.content.componentInstance.load)){const e=this.content.componentType?this.content.componentType.parameters:null;this.instruction.parameters=this.content.toSpecifiedParameters(e);const n={...od(this.instruction.query),...this.instruction.parameters};return this.content.componentInstance.load(n,this.instruction,t)}})}unload(t){if(this.contentStates.has("loaded"))return this.contentStates.delete("loaded"),this.content.componentInstance&&this.content.componentInstance.unload?this.content.componentInstance.unload(t,this.instruction):void 0}activateComponent(t,e,n,s,i){return cd.run(()=>this.contentStates.await("loaded"),()=>{if(this.contentStates.has("activated"))return;this.contentStates.set("activated",void 0);const e=this.contentController(s);return e.activate(null!=t?t:e,null,n)},()=>{if(this.fromCache||this.fromHistory){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t){const t=e.getAttribute("au-element-scroll");if(t){const[n,s]=t.split(",");e.removeAttribute("au-element-scroll"),e.scrollTo(+s,+n)}}}})}deactivateComponent(t,e,n,s,i=!1){if(!this.contentStates.has("activated"))return;if(this.contentStates.delete("activated"),i&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}const r=this.contentController(s);return cd.run(()=>r.deactivate(null!=t?t:r,e,n))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")){if(!n){this.contentStates.delete("created");return this.contentController(t).dispose()}e.push(this)}}freeContent(t,e,n,s=!1){return cd.run(()=>this.unload(e),()=>this.deactivateComponent(null,t.controller,0,t,s),()=>this.disposeComponent(t,n,s))}toComponentName(){return this.content.componentName}toComponentType(t){return this.content.isEmpty()?null:this.content.toComponentType(t)}toComponentInstance(t){return this.content.isEmpty()?null:this.content.toComponentInstance(t)}}class fd{constructor(t,e,n,s,i,r=null,o={catches:[],source:null}){this.name=t,this.router=e,this.connectedCE=n,this.rootComponentType=r,this.options=o,this.path=null,this.content=null,this.nextContent=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.connectedScope=new Rd(e,i,s,null,this),this.catches.length>0&&(this.content=e.createViewportInstruction(this.catches[0],this.name))}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get enabled(){return this.connectedScope.enabled}set enabled(t){this.connectedScope.enabled=t}get isViewport(){return!1}get isViewportScope(){return!0}get isEmpty(){return null===this.content}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter(t=>t.isViewportScope&&t.viewportScope.name===this.name).map(t=>t.viewportScope)}get source(){return this.options.source||null}get catches(){let t=this.options.catches||[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}get nextContentActivated(){var t,e,n;return null!==(n=null===(e=null===(t=this.scope.parent)||void 0===t?void 0:t.owner)||void 0===e?void 0:e.nextContentActivated)&&void 0!==n&&n}get parentNextContentActivated(){var t,e,n;return null!==(n=null===(e=null===(t=this.scope.parent)||void 0===t?void 0:t.owner)||void 0===e?void 0:e.nextContentActivated)&&void 0!==n&&n}get nextContentAction(){return""}toString(){var t,e,n,s;const i=null!==(e=null===(t=this.content)||void 0===t?void 0:t.componentName)&&void 0!==e?e:"",r=null!==(s=null===(n=this.nextContent)||void 0===n?void 0:n.componentName)&&void 0!==s?s:"";return`vs:${this.name}[${i}->${r}]`}setNextContent(t,e){return t.viewportScope=this,this.remove=this.router.instructionResolver.isClearViewportInstruction(t)||this.router.instructionResolver.isClearAllViewportsInstruction(t),this.add=this.router.instructionResolver.isAddViewportInstruction(t)&&Array.isArray(this.source),this.add&&(t.componentName=null),void 0!==this.default&&null===t.componentName&&(t.componentName=this.default),this.nextContent=t,"swap"}transition(t){cd.run(()=>t.addEntityState(this,"guardedUnload"),()=>t.addEntityState(this,"guardedLoad"),()=>t.addEntityState(this,"guarded"),()=>t.addEntityState(this,"loaded"),()=>t.addEntityState(this,"unloaded"),()=>t.addEntityState(this,"routed"),()=>t.addEntityState(this,"swapped"),()=>{this.content=this.remove?null:this.nextContent,this.nextContent=null,t.addEntityState(this,"completed")})}canUnload(){return!0}canLoad(){return!0}unload(){}load(){}finalizeContentChange(){this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}abortContentChange(){if(this.nextContent=null,this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}return Promise.resolve()}acceptSegment(t){return null===t&&void 0===t||0===t.length||(t===this.router.instructionResolver.clearViewportInstruction||t===this.router.instructionResolver.addViewportInstruction||t===this.name||(0===this.catches.length||(!!this.catches.includes(t)||!!this.catches.filter(t=>t.includes("*")).length)))}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&id(this.source,t=>t===this.sourceItem),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every(t=>t.sourceItem!==e))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){return null!==this.rootComponentType?this.rootComponentType.routes:null}}class gd{constructor(t=null,e="",n=[],s="",i={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=s,this.params=i}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return null!==this.remaining&&this.remaining.length>0}}class md extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){id(this,e=>e===t)}}class vd{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class bd{constructor(t,e){this.route=t,this.paramNames=e}}class yd{constructor(t,e){this.endpoint=t,this.params=e}}class wd{constructor(t,e,n,s){var i;this.chars=t,this.states=e,this.skippedStates=n,this.result=s,this.head=e[e.length-1],this.endpoint=null===(i=this.head)||void 0===i?void 0:i.endpoint}advance(t){const{chars:e,states:n,skippedStates:s,result:i}=this;let r=null,o=0;const a=n[n.length-1];function c(l,h){if(l.isMatch(t)&&(1==++o?r=l:i.add(new wd(e.concat(t),n.concat(l),null===h?s:s.concat(h),i))),null===a.segment&&l.isOptional&&null!==l.nextStates){if(l.nextStates.length>1)throw new Error(l.nextStates.length+" nextStates");const t=l.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)c(e,l)}}if(a.isDynamic&&c(a,null),null!==a.nextStates)for(const t of a.nextStates)c(t,null);null!==r&&(n.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&i.remove(this)}finalize(){!function t(e,n){const s=n.nextStates;if(null!==s)if(1===s.length&&null===s[0].segment)t(e,s[0]);else for(const n of s)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const s of n.nextStates)t(e,s);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,s={};for(const t of n.paramNames)s[t]=void 0;for(let n=0,i=t.length;n<i;++n){const i=t[n];if(i.isDynamic){const t=i.segment.name;void 0===s[t]?s[t]=e[n]:s[t]+=e[n]}}return s}compareTo(t){const e=this.states,n=t.states;for(let t=0,s=0,i=Math.max(e.length,n.length);t<i;++t){let i=e[t];if(void 0===i)return 1;let r=n[s];if(void 0===r)return-1;let o=i.segment,a=r.segment;if(null===o){if(null===a){++s;continue}if(void 0===(i=e[++t]))return 1;o=i.segment}else if(null===a){if(void 0===(r=n[++s]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++s}const s=this.skippedStates,i=t.skippedStates,r=s.length,o=i.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=s[t],n=i[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function kd(t){return null!==t.head.endpoint}function xd(t,e){return t.compareTo(e)}class Cd{constructor(t){this.candidates=[],this.candidates=[new wd([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(kd);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(xd),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class Sd{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,s=this.nextStates;return null===s?(n=void 0,s=this.nextStates=[]):n=null===t?s.find(t=>t.value===e):s.find(e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)}),void 0===n&&s.push(n=new Sd(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function Ad(t){return t.length>0}!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(pd||(pd={}));class Td{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let s=0;s<n;++s)t=t.append(this,e.charAt(s));else for(let s=0;s<n;++s){const n=e.charAt(s);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Ed{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t=t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class _d{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t=t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const Id=class{constructor(){this.rootState=new Sd(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,n=new vd(t.path,!0===t.caseSensitive,t.handler),s=""===e?[""]:e.split("/").filter(Ad),i=[];let r=this.rootState;for(const t of s)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);i.push(n),r=new Ed(n,e).appendTo(r);break}case"*":{const e=t.slice(1);i.push(e),r=new _d(e).appendTo(r);break}default:r=new Td(t,n.caseSensitive).appendTo(r)}const o=new bd(n,i);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t="/"+t),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new Cd(this.rootState);for(let n=0,s=t.length;n<s;++n){const s=t.charAt(n);if(e.advance(s),e.isEmpty)return null}const n=e.getSolution();if(null===n)return null;const{endpoint:s}=n,i=n.getParams();return new yd(s,i)}};class Rd{constructor(t,e,n,s=null,i=null,r=null){this.router=t,this.hasScope=e,this.owningScope=n,this.viewport=s,this.viewportScope=i,this.rootComponentType=r,this.id=".",this.parent=null,this.children=[],this.replacedChildren=[],this.path=null,this.enabled=!0,this.childCollections={},this.owningScope=null!=n?n:this,this.scope=this.hasScope?this:this.owningScope.scope}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.owner.toString()}`+(t?"\n"+this.children.map(t=>t.toString(!0)).join(""):"")}get isViewport(){return null!==this.viewport}get isViewportScope(){return null!==this.viewportScope}get passThroughScope(){return this.isViewportScope&&this.viewportScope.passThroughScope}get owner(){return this.isViewport?this.viewport:this.isViewportScope?this.viewportScope:null}get enabledChildren(){return this.children.filter(t=>t.enabled)}get hoistedChildren(){const t=this.enabledChildren;for(;t.some(t=>t.passThroughScope);)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get enabledViewports(){return this.children.filter(t=>t.isViewport&&t.enabled).map(t=>t.viewport)}get viewportInstruction(){return this.isViewportScope?this.viewportScope.content:this.isViewport?this.viewport.content.content:null}get parentNextContentAction(){if(null===this.parent)return"";const t=this.parent.owner.nextContentAction;return"swap"===t||"skip"===t?t:this.parent.parentNextContentAction}getEnabledViewports(t){return t.filter(t=>!t.isViewportScope).map(t=>t.viewport).reduce((t,e)=>(t[e.name]=e,t),{})}getOwnedViewports(t=!1){return this.allViewports(t).filter(t=>t.owningScope===this)}getOwnedScopes(t=!1){const e=this.allScopes(t).filter(t=>t.owningScope===this);for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}findInstructions(t){var e,n;let s=new gd;if("string"==typeof t){const i=this.router.instructionResolver.parseViewportInstructions(t);if(this.router.options.useConfiguredRoutes&&!this.router.hasSiblingInstructions(i)){const r=this.findMatchingRoute(t);if(null!==(e=null==r?void 0:r.foundConfiguration)&&void 0!==e&&e)s=r;else if(this.router.options.useDirectRoutes&&(s.instructions=i,s.instructions.length>0)){const t=null!==(n=s.instructions[0].nextScopeInstructions)&&void 0!==n?n:[];s.remaining=this.router.instructionResolver.stringifyViewportInstructions(t),s.instructions[0].nextScopeInstructions=null}}else this.router.options.useDirectRoutes&&(s.instructions=i)}else s.instructions=t;for(const t of s.instructions)null===t.scope&&(t.scope=this);return s}findViewports(t,e,n=!1){var s;const i=[];let r=[];const o=this.getOwnedScopes(),a=o.filter(t=>t.isViewportScope).map(t=>t.viewportScope),c=a.filter(t=>e.every(e=>e.viewportScope!==t)),l={...this.getEnabledViewports(o)};for(const t of e.filter(t=>t.scope===this))l[t.viewportName]=null;const h=new md(...t.slice());let u=null;for(;null!==(u=h.next());)null===u.viewportScope||this.router.instructionResolver.isAddViewportInstruction(u)||(r.push(...this.foundViewportScope(u,u.viewportScope)),i.push(u),id(c,t=>t===u.viewportScope),h.removeCurrent());if(!n)for(;null!==(u=h.next());)null!==u.viewport&&(r.push(...this.foundViewport(u,u.viewport,n)),i.push(u),l[u.viewport.name]=null,h.removeCurrent());for(;null!==(u=h.next());)for(let t of a)if(t.acceptSegment(u.componentName)){if(Array.isArray(t.source)){let e=c.find(e=>e.name===t.name);if(void 0===e||this.router.instructionResolver.isAddViewportInstruction(u)){const n=t.addSourceItem();e=this.getOwnedScopes().filter(t=>t.isViewportScope).map(t=>t.viewportScope).find(t=>t.sourceItem===n)}t=e}r.push(...this.foundViewportScope(u,t)),i.push(u),id(c,t=>t===u.viewportScope),h.removeCurrent();break}for(;null!==(u=h.next());){u.needsViewportDescribed=!0;for(const t in l){const e=l[t];if(null==e?void 0:e.wantComponent(u.componentName)){const s=this.foundViewport(u,e,n,!0);i.push(u),r.push(...s),l[t]=null,h.removeCurrent();break}}}if(!n)for(;null!==(u=h.next());){const t=u.viewportName;if(!t||!t.length)continue;u.ownsScope;if(!this.getEnabledViewports(o)[t])continue;const e=l[t];if(null==e?void 0:e.acceptComponent(u.componentName)){const s=this.foundViewport(u,e,n,!0);i.push(u),r.push(...s),l[t]=null,h.removeCurrent()}}for(;null!==(u=h.next());){const t=[];for(const e in l){const n=l[e];(null==n?void 0:n.acceptComponent(u.componentName))&&t.push(n)}if(1===t.length){const e=t.shift(),s=this.foundViewport(u,e,n,!0);i.push(u),r.push(...s),l[e.name]=null,h.removeCurrent()}}if(n)for(;null!==(u=h.next());){let t=u.viewport;if(!t){const e=u.viewportName;if(0===(null!==(s=null==e?void 0:e.length)&&void 0!==s?s:0))continue;u.ownsScope;if(!this.getEnabledViewports(o)[e])continue;t=l[e]}if(null==t?void 0:t.acceptComponent(u.componentName)){const e=this.foundViewport(u,t,n);i.push(u),r.push(...e),l[t.name]=null,h.removeCurrent()}}return r=[...h,...r],{foundViewports:i,remainingInstructions:r}}foundViewportScope(t,e){var n,s;t.viewportScope=e,t.needsViewportDescribed=!1;const i=null!==(s=null===(n=t.nextScopeInstructions)||void 0===n?void 0:n.slice())&&void 0!==s?s:[];for(const t of i)null===t.scope&&(t.scope=e.scope.scope);return i}foundViewport(t,e,n,s=!1){var i,r;t.setViewport(e),s&&(t.needsViewportDescribed=!1);const o=null!==(r=null===(i=t.nextScopeInstructions)||void 0===i?void 0:i.slice())&&void 0!==r?r:[];for(const t of o)null===t.scope&&(t.scope=e.scope);return o}addViewport(t,e,n={}){var s,i;let r=this.getEnabledViewports(this.getOwnedScopes())[t];return null!==(null!=e?e:null)&&null!==(null!==(s=null==r?void 0:r.connectedCE)&&void 0!==s?s:null)&&r.connectedCE!==e&&(r.enabled=!1,r=null!==(i=this.getOwnedViewports(!0).find(n=>n.name===t&&n.connectedCE===e))&&void 0!==i?i:null,null!==(null!=r?r:null)&&(r.enabled=!0)),null===(null!=r?r:null)&&(r=new Od(this.router,t,e,this.scope,!!n.scope,n),this.addChild(r.connectedScope)),null!==(null!=e?e:null)&&r.setConnectedCE(e,n),r}removeViewport(t,e){return!(null===(null!=e?e:null)&&!t.remove(e))&&(this.removeChild(t.connectedScope),!0)}addViewportScope(t,e,n={}){const s=new fd(t,this.router,e,this.scope,!0,null,n);return this.addChild(s.connectedScope),s}removeViewportScope(t){return this.removeChild(t.connectedScope),!0}addChild(t){this.children.some(e=>e===t)||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}clearReplacedChildren(){this.replacedChildren=[]}disableReplacedChildren(){this.replacedChildren=this.enabledChildren;for(const t of this.replacedChildren)t.enabled=!1}reenableReplacedChildren(){for(const t of this.replacedChildren)t.enabled=!0}allViewports(t=!1,e=!1){return this.allScopes(t,e).filter(t=>t.isViewport).map(t=>t.viewport)}allScopes(t=!1,e=!1){const n=t?this.children.slice():this.enabledChildren;for(const s of n.slice())n.push(...s.allScopes(t,e));return n}reparentViewportInstructions(){const t=this.hoistedChildren.filter(t=>null!==t.viewportInstruction&&t.viewportInstruction.componentName);if(!t.length)return null;for(const e of t){const t=e.reparentViewportInstructions();e.viewportInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map(t=>t.viewportInstruction)}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.viewportScope.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.viewport.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}canLoad(t){const e=cd.runAll(this.children.map(e=>null!==e.viewport?e.viewport.canLoad(t):e.canLoad(t)));return e instanceof Promise?e.then(t=>t.every(t=>t)):e.every(t=>t)}canUnload(){const t=cd.runAll(this.children.map(t=>null!==t.viewport?t.viewport.canUnload():t.canUnload()));return t instanceof Promise?t.then(t=>t.every(t=>t)):t.every(t=>t)}load(t){const e=cd.runAll(this.children.map(e=>null!==e.viewport?e.viewport.load(t):e.load(t)));if(e instanceof Promise)return e}unload(t){const e=cd.runAll(this.children.map(e=>null!==e.viewport?e.viewport.unload(t):e.unload(t)));if(e instanceof Promise)return e}removeContent(){const t=cd.runAll(this.children.map(t=>null!==t.viewport?t.viewport.removeContent():t.removeContent()));if(t instanceof Promise)return t}findMatchingRouteInRoutes(t,e){if(!Array.isArray(e))return null;const n=(e=e.map(t=>this.ensureProperRoute(t))).map(t=>({path:t.path,handler:t}));for(let t=0,e=n.length;t<e;++t){const e=n[t];n.push({...e,path:e.path+"/*remainingPath"})}const s=new gd;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const i=new Id;i.add(n);const r=i.recognize(t);if(null!==r){s.match=r.endpoint.route.handler,s.matching=t;const e={...r.params};void 0!==e.remainingPath&&(s.remaining=e.remainingPath,Reflect.deleteProperty(e,"remainingPath"),s.matching=s.matching.slice(0,s.matching.indexOf(s.remaining))),s.params=e}if(s.foundConfiguration){s.instructions=this.router.instructionResolver.cloneViewportInstructions(s.match.instructions,!1,!0);const t=s.instructions.slice();for(;t.length>0;){const e=t.shift();e.addParameters(s.params),e.route="",null!==e.nextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}s.instructions.length>0&&(s.instructions[0].route=s)}return s}ensureProperRoute(t){return void 0===t.id&&(t.id=t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),t.instructions=jd.toViewportInstructions(this.router,t.instructions),t}}class Od{constructor(t,e,n,s,i,r={}){this.router=t,this.name=e,this.connectedCE=n,this.options=r,this.nextContent=null,this.nextContentAction="",this.forceRemove=!1,this.path=null,this.clear=!1,this.connectionResolve=null,this.previousViewportState=null,this.cache=[],this.historyCache=[],this.content=new dd,this.connectedScope=new Rd(t,i,s,this)}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get enabled(){return this.connectedScope.enabled}set enabled(t){this.connectedScope.enabled=t}get isViewport(){return!0}get isViewportScope(){return!1}get isEmpty(){return null===this.content.componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(null!==t.viewport&&t.viewport.forceRemove)return!0;t=t.parent}return!1}get activeContent(){var t;return null!==(t=this.nextContent)&&void 0!==t?t:this.content}get nextContentActivated(){var t,e;return null!==(e=null===(t=this.nextContent)||void 0===t?void 0:t.contentStates.has("activated"))&&void 0!==e&&e}get parentNextContentActivated(){var t,e,n;return null!==(n=null===(e=null===(t=this.scope.parent)||void 0===t?void 0:t.owner)||void 0===e?void 0:e.nextContentActivated)&&void 0!==n&&n}get performLoad(){return!0}get performSwap(){return!0}toString(){var t,e,n,s;const i=null!==(e=null===(t=this.content)||void 0===t?void 0:t.content.componentName)&&void 0!==e?e:"",r=null!==(s=null===(n=this.nextContent)||void 0===n?void 0:n.content.componentName)&&void 0!==s?s:"";return`v:${this.name}[${i}->${r}]`}setNextContent(t,e){var n;if(t.setViewport(this),this.clear=this.router.instructionResolver.isClearViewportInstruction(t),this.nextContent=new dd(this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null),this.nextContent.fromHistory=!(!this.nextContent.componentInstance||!e.navigation)&&(!!e.navigation.back||!!e.navigation.forward),this.options.stateful){const t=this.cache.find(t=>this.nextContent.isCacheEqual(t));t?(this.nextContent=t,this.nextContent.fromCache=!0):this.cache.push(this.nextContent)}return this.connectedScope.clearReplacedChildren(),null!==this.nextContent.componentInstance&&this.content.componentInstance===this.nextContent.componentInstance?(this.nextContent=null,this.nextContentAction="skip"):!this.content.equalComponent(this.nextContent)||"swap"===this.connectedScope.parentNextContentAction||e.navigation.refresh||"refresh"===this.content.reentryBehavior()?(this.connectedScope.disableReplacedChildren(),this.nextContentAction="swap"):"disallow"===this.content.reentryBehavior()?(this.nextContent=null,this.nextContentAction="skip"):"load"===this.content.reentryBehavior()?(this.content.reentry=!0,this.nextContent.content.setComponent(this.content.componentInstance),this.nextContent.contentStates=this.content.contentStates.clone(),this.nextContent.reentry=this.content.reentry,this.nextContentAction="reload"):this.options.stateful&&this.content.equalParameters(this.nextContent)?(this.nextContent=null,this.nextContentAction="skip"):this.content.equalParameters(this.nextContent)?"skip":(this.connectedScope.disableReplacedChildren(),this.nextContentAction="swap")}setConnectedCE(t,e){if(e=e||{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,e.usedBy&&(this.options.usedBy=e.usedBy),e.default&&(this.options.default=e.default),e.fallback&&(this.options.fallback=e.fallback),e.noLink&&(this.options.noLink=e.noLink),e.noTitle&&(this.options.noTitle=e.noTitle),e.noHistory&&(this.options.noHistory=e.noHistory),e.stateful&&(this.options.stateful=e.stateful),this.connectionResolve&&this.connectionResolve()),!this.content.componentInstance&&(!this.nextContent||!this.nextContent.componentInstance)&&this.options.default){const t=this.router.instructionResolver.parseViewportInstructions(this.options.default);for(const e of t)e.setViewport(this.name),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch(t=>{throw t})}}remove(t){return this.connectedCE===t&&cd.run(()=>{if(this.content.componentInstance)return this.content.freeContent(this.connectedCE,this.nextContent?this.nextContent.instruction:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))},()=>{if(this.doForceRemove){const t=[];for(const e of this.historyCache)t.push(()=>e.freeContent(null,null,this.historyCache,!1));return t.push(()=>{this.historyCache=[]}),cd.run(...t)}return!0})}transition(t){const e=t.checkingSyncState("guarded"),n=this.performLoad||!e,s=this.performSwap||!e,i=[()=>!n||this.canUnload(),e=>{if(!e)return cd.cancel(void 0),void t.cancel();this.router.isRestrictedNavigation&&this.nextContent.createComponent(this.connectedCE,this.options.fallback),t.addEntityState(this,"guardedUnload")},()=>t.syncState("guardedUnload",this),()=>!n||this.canLoad(e),e=>{if("boolean"==typeof e){if(!e)return cd.cancel(void 0),void t.cancel();t.addEntityState(this,"guardedLoad"),t.addEntityState(this,"guarded")}else cd.run(()=>this.router.load(e,{append:!0}),()=>this.abortContentChange())}],r=[()=>t.syncState("guarded",this),()=>!n||this.unload(!0),()=>t.addEntityState(this,"unloaded"),()=>t.syncState("unloaded",this),()=>!n||this.load(t.checkingSyncState("routed")),()=>t.addEntityState(this,"loaded"),()=>t.addEntityState(this,"routed")],o=[()=>t.syncState("routed",this)];s&&(this.router.options.swapStrategy.includes("parallel")?o.push(()=>this.router.options.swapStrategy.includes("add")?cd.run(this.addContent(),this.removeContent()):cd.run(this.removeContent(),this.addContent())):o.push(()=>s?this.router.options.swapStrategy.includes("add")?this.addContent():this.removeContent():void 0,()=>s?this.router.options.swapStrategy.includes("add")?this.removeContent():this.addContent():void 0)),o.push(()=>t.addEntityState(this,"swapped")),cd.run(...i,...r,...o,()=>t.addEntityState(this,"completed"))}canUnload(){return cd.run(()=>this.connectedScope.canUnload(),t=>{var e,n;return!!t&&this.content.canUnload(null!==(n=null===(e=this.nextContent)||void 0===e?void 0:e.instruction)&&void 0!==n?n:null)})}canLoad(t){var e,n;return!!this.clear||(null===(null!==(n=null===(e=this.nextContent)||void 0===e?void 0:e.content)&&void 0!==n?n:null)||cd.run(()=>this.waitForConnected(),()=>(this.nextContent.createComponent(this.connectedCE,this.options.fallback),this.nextContent.canLoad(this,this.content.instruction))))}load(t){var e,n;if(!this.clear&&null!==(null!==(n=null===(e=this.nextContent)||void 0===e?void 0:e.componentInstance)&&void 0!==n?n:null))return cd.run(()=>{var t;return null===(t=this.nextContent)||void 0===t?void 0:t.load(this.content.instruction)})}addContent(){return cd.run(()=>this.activate(null,this.connectedController,0,this.parentNextContentActivated))}removeContent(){if(!this.isEmpty)return cd.run(()=>this.connectedScope.removeContent(),()=>this.deactivate(null,null,0),()=>this.dispose())}removeChildrenContent(){return cd.run(()=>this.isEmpty?void 0:this.connectedScope.removeContent())}activate(t,e,n,s){if(null!==this.activeContent.componentInstance)return this.connectedScope.reenableReplacedChildren(),cd.run(()=>this.activeContent.load(this.activeContent.instruction),()=>this.activeContent.activateComponent(t,e,n,this.connectedCE,s))}deactivate(t,e,n){var s;if(this.content.componentInstance&&!this.content.reentry&&this.content.componentInstance!==(null===(s=this.nextContent)||void 0===s?void 0:s.componentInstance))return cd.run(()=>{var t;return null===(t=this.content)||void 0===t?void 0:t.unload(this.content.instruction)},()=>{var s;return null===(s=this.content)||void 0===s?void 0:s.deactivateComponent(t,e,n,this.connectedCE,this.router.statefulHistory||this.options.stateful)})}unload(t){return cd.run(()=>!t||this.connectedScope.unload(t),()=>{var t,e;if(this.content.componentInstance)return this.content.unload(null!==(e=null===(t=this.nextContent)||void 0===t?void 0:t.instruction)&&void 0!==e?e:null)})}dispose(){var t;if(this.content.componentInstance&&!this.content.reentry&&this.content.componentInstance!==(null===(t=this.nextContent)||void 0===t?void 0:t.componentInstance))return cd.run(()=>this.content.disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful))}finalizeContentChange(){this.nextContent.componentInstance&&(this.content=this.nextContent,this.content.reentry=!1),this.clear&&(this.content=new dd(void 0,this.nextContent.instruction)),this.nextContent=null,this.nextContentAction="",this.previousViewportState=null,this.connectedScope.clearReplacedChildren()}abortContentChange(){return this.connectedScope.reenableReplacedChildren(),cd.run(()=>this.nextContent.freeContent(this.connectedCE,this.nextContent.instruction,this.historyCache,this.router.statefulHistory||this.options.stateful),()=>{this.previousViewportState&&Object.assign(this,this.previousViewportState),this.nextContentAction=""})}wantComponent(t){let e=this.options.usedBy||[];return"string"==typeof e&&(e=e.split(",")),e.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;let e=this.options.usedBy;return!e||!e.length||("string"==typeof e&&(e=e.split(",")),!!e.includes(t)||!!e.filter(t=>t.includes("*")).length)}freeContent(t){const e=this.historyCache.find(e=>e.componentInstance===t);if(void 0!==e)return cd.run(()=>(this.forceRemove=!0,e.freeContent(null,null,this.historyCache,!1)),()=>{this.forceRemove=!1,id(this.historyCache,t=>t===e)})}getRoutes(){const t=this.getComponentType();if(null===t)return null;const e=t.routes;return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const s=this.getComponentType();if(null===s)return"";let i="";const r=s.title;if(void 0!==r)if("string"==typeof r)i=r;else{const e=this.getComponentInstance();i=r.call(e,e,t)}else if(this.router.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().componentName)&&void 0!==e?e:"";const s=null!==(n=this.router.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(s)&&(t=t.slice(s.length)),t=t.replace("-"," "),i=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return void 0!==this.router.options.title.transformTitle&&(i=this.router.options.title.transformTitle.call(this,i,this.getContentInstruction())),i}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().componentType)&&void 0!==t?t:null;if(null===e){e=va.for(this.connectedCE.element).context.componentType}return null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().componentInstance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.nextContent)||void 0===t?void 0:t.content)&&void 0!==e?e:this.content.content)&&void 0!==n?n:null}clearState(){this.options={},this.content=new dd,this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise(t=>{this.connectionResolve=t})}}const Pd={isName:t=>"string"==typeof t,isType:t=>va.isType(t),isInstance:t=>!Pd.isName(t)&&!Pd.isType(t),getName:t=>Pd.isName(t)?t:Pd.isType(t)?va.getDefinition(t).name:Pd.getName(t.constructor),getType:t=>Pd.isName(t)?null:Pd.isType(t)?t:t.constructor,getInstance:t=>Pd.isName(t)||Pd.isType(t)?null:t},$d={isName:t=>"string"==typeof t,isInstance:t=>t instanceof Od,getName:t=>$d.isName(t)?t:t?t.name:null,getInstance:t=>$d.isName(t)?null:t},jd={createViewportInstructions(t,e,n){let s=null;if((n=n||{}).context)if(s=t.findScope(n.context),"string"==typeof e)if(e.startsWith("/"))s=t.rootScope.scope;else{if(e.startsWith("."))for(e.startsWith("./")&&(e=e.slice(2));e.startsWith("../");)s=s.parent||s,e=e.slice(3);null!==s.path&&(e=`${s.path}/${e}`,s=t.rootScope.scope)}else{e=jd.toViewportInstructions(t,e);for(const t of e)null===t.scope&&(t.scope=s)}return{instructions:e,scope:s}},toViewportInstructions(t,e){if(!Array.isArray(e))return jd.toViewportInstructions(t,[e]);const n=[];for(const s of e)if("string"==typeof s)n.push(...t.instructionResolver.parseViewportInstructions(s));else if(s instanceof qd)n.push(s);else if(s.component){const e=s,i=t.createViewportInstruction(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(i.nextScopeInstructions=jd.toViewportInstructions(t,e.children)),n.push(i)}else n.push(t.createViewportInstruction(s));return n}};class Vd{constructor(){this.separators={viewport:"@",sibling:"+",scope:"/",scopeStart:"(",scopeEnd:")",noScope:"!",parameters:"(",parametersEnd:")",parameterSeparator:",",parameterKeySeparator:"=",parameter:"&",add:"+",clear:"-",action:"."},this.useUrlFragmentHash=!0,this.useHref=!0,this.statefulHistoryLength=0,this.useDirectRoutes=!0,this.useConfiguredRoutes=!0,this.additiveInstructionDefault=!0,this.title={appTitle:"${componentTitles}${appTitleSeparator}Aurelia",appTitleSeparator:" | ",componentTitleOrder:"top-down",componentTitleSeparator:" > ",useComponentNames:!0,componentPrefix:"app-"},this.navigationSyncStates=["guardedUnload","swapped","completed"],this.swapStrategy="add-first-sequential",this.routingHookIntegration="integrated"}}var Dd,Ld,Fd;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(Dd||(Dd={}));class qd{constructor(){this.componentName=null,this.componentType=null,this.componentInstance=null,this.viewportName=null,this.viewport=null,this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none",this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.context="",this.viewportScope=null,this.needsViewportDescribed=!1,this.route=null,this.default=!1,this.topInstruction=!1,this.instructionResolver=null}static create(t,e,n,s,i=!0,r=null){const o=new qd;return o.setComponent(e),o.setViewport(n),o.setParameters(s),o.ownsScope=i,o.nextScopeInstructions=r,o.setInstructionResolver(t),o}get owner(){var t,e;return null!==(e=null!==(t=this.viewport)&&void 0!==t?t:this.viewportScope)&&void 0!==e?e:null}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}get parameters(){return null!==this.instructionResolver?this.instructionResolver.parseComponentParameters(this.typedParameters):[]}get normalizedParameters(){return null!==this.instructionResolver&&null!==this.typedParameters?this.instructionResolver.stringifyComponentParameters(this.parameters):""}setComponent(t){Pd.isName(t)?(this.componentName=Pd.getName(t),this.componentType=null,this.componentInstance=null):Pd.isType(t)?(this.componentName=this.getNewName(t),this.componentType=Pd.getType(t),this.componentInstance=null):Pd.isInstance(t)&&(this.componentName=this.getNewName(Pd.getType(t)),this.componentType=Pd.getType(t),this.componentInstance=Pd.getInstance(t))}setViewport(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.viewportName=t,this.viewport=null):(this.viewport=t,null!==t&&(this.viewportName=t.name,this.scope=t.owningScope))}setParameters(t){null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}addParameters(t){if("none"===this.parametersType)return this.setParameters(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.setParameters({...this.parametersRecord,...t})}setInstructionResolver(t){this.instructionResolver=t}isEmpty(){return!this.isComponentName()&&!this.isComponentType()&&!this.isComponentInstance()}isComponentName(){return!!this.componentName&&!this.isComponentType()&&!this.isComponentInstance()}isComponentType(){return null!==this.componentType&&!this.isComponentInstance()}isComponentInstance(){return null!==this.componentInstance}toComponentType(t){if(null!==this.componentType)return this.componentType;if(null!==this.componentName&&"string"==typeof this.componentName&&null!==t&&t.has(va.keyFrom(this.componentName),!0)){const e=t.getResolver(va.keyFrom(this.componentName));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}return null}toComponentInstance(t){if(null!==this.componentInstance)return this.componentInstance;if(null!=t){const e=this.isComponentType()?t.get(this.componentType):t.get(va.keyFrom(this.componentName));return!this.isComponentType()||e instanceof this.componentType||console.warn("Failed to instantiate",this.componentType,e),null!=e?e:null}return null}toViewportInstance(t){return null!==this.viewport?this.viewport:t.getViewport(this.viewportName)}toSpecifiedParameters(t){t=t||[];const e=this.parameters,n={};for(const s of t){let t=e.findIndex(t=>t.key===s);if(t>=0){const[i]=e.splice(t,1);n[s]=i.value}else if(t=e.findIndex(t=>void 0===t.key),t>=0){const[i]=e.splice(t,1);n[s]=i.value}}for(const t of e.filter(t=>void 0!==t.key))n[t.key]=t.value;let s=t.length;for(const t of e.filter(t=>void 0===t.key))n[s++]=t.value;return n}toSortedParameters(t){t=t||[];const e=this.parameters,n=[];for(const s of t){let t=e.findIndex(t=>t.key===s);if(t>=0){const s={...e.splice(t,1)[0]};s.key=void 0,n.push(s)}else if(t=e.findIndex(t=>void 0===t.key),t>=0){const s={...e.splice(t,1)[0]};n.push(s)}else n.push({value:void 0})}const s=e.filter(t=>void 0!==t.key);return s.sort((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0),n.push(...s),n.push(...e.filter(t=>void 0===t.key)),n}sameComponent(t,e=!1,n=!1){return!(e&&!this.sameParameters(t,n))&&(n?this.componentType===t.componentType:this.componentName===t.componentName)}sameParameters(t,e=!1){if(!this.sameComponent(t,!1,e))return!1;const n=this.componentType?this.componentType.parameters:[],s=this.toSpecifiedParameters(n),i=t.toSpecifiedParameters(n);return Object.keys(s).every(t=>s[t]===i[t])&&Object.keys(i).every(t=>i[t]===s[t])}sameViewport(t){return null!==this.viewport&&null!==t.viewport?this.viewport===t.viewport:this.scope===t.scope&&(this.viewport?this.viewport.name:this.viewportName)===(t.viewport?t.viewport.name:t.viewportName)}getNewName(t){return null===this.componentName?Pd.getName(t):this.componentName}}qd.inject=[Vd];!function(t){t.default="default",t.disallow="disallow",t.load="load",t.refresh="refresh"}(Ld||(Ld={}));class Nd{constructor(t,e,n){this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include||[])this.includeTargets.push(new Md(t));for(const t of e.exclude||[])this.excludeTargets.push(new Md(t))}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some(e=>e.matches(t)))&&(!this.excludeTargets.length||!this.excludeTargets.some(e=>e.matches(t)))}invoke(t,e){return this.hook(e,t)}}class Md{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(Pd.isType(t))this.componentType=t,this.componentName=Pd.getName(t);else{const e=t;e.component&&(this.componentType=Pd.isType(e.component)?Pd.getType(e.component):null,this.componentName=Pd.getName(e.component)),e.viewport&&(this.viewport=$d.isInstance(e.viewport)?e.viewport:null,this.viewportName=$d.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(qd.create(null,""));for(const t of e)if(null!==this.componentName&&this.componentName===t.componentName||null!==this.componentType&&this.componentType===t.componentType||null!==this.viewportName&&this.viewportName===t.viewportName||null!==this.viewport&&this.viewport===t.viewport)return!0;return!1}}!function(t){t.BeforeNavigation="beforeNavigation",t.TransformFromUrl="transformFromUrl",t.TransformToUrl="transformToUrl",t.SetTitle="setTitle"}(Fd||(Fd={}));class Bd{constructor(t,e){this.nav=t,this.instructions=[],this.link=null,this.linkVisible=null,this.linkActive=null,this.compareParameters=!1,this.children=null,this.visible=!0,this.active="",this.title=e.title,this.meta=e.meta,e.route&&(this.instructions=this.parseRoute(e.route),this.link=this.computeLink(this.instructions)),this.linkActive=null!==e.consideredActive&&void 0!==e.consideredActive?e.consideredActive:this.link,null===this.linkActive||this.linkActive instanceof Function&&!Pd.isType(this.linkActive)||(this.linkActive=jd.toViewportInstructions(this.nav.router,this.linkActive)),this.execute=e.execute,this.compareParameters=!!e.compareParameters,this.linkVisible=void 0===e.condition||e.condition,this.update()}get hasChildren(){return this.children&&this.children.length?"nav-has-children":""}update(){this.visible=this.computeVisible(),this.link&&this.link.length||this.execute?this.active=this.computeActive():this.active="nav-active"===this.active?"nav-active":this.activeChild()?"nav-active-child":""}executeAction(t){this.execute&&this.execute(this),t.stopPropagation()}toggleActive(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}parseRoute(t){return jd.toViewportInstructions(this.nav.router,t)}computeVisible(){return this.linkVisible instanceof Function?this.linkVisible(this):!!this.linkVisible}computeActive(){if(!Array.isArray(this.linkActive))return this.linkActive(this)?"nav-active":"";const t=this.linkActive,e=this.nav.router.instructionResolver.flattenViewportInstructions(this.nav.router.activeComponents);for(const n of t)if(e.every(t=>!t.sameComponent(n,this.compareParameters&&null!==n.typedParameters)))return"";return"nav-active"}computeLink(t){return this.nav.router.instructionResolver.stringifyViewportInstructions(t)}activeChild(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.activeChild())return!0;return!1}}class Ud{constructor(t,e,n=[],s={}){this.router=t,this.name=e,this.routes=n,this.classes=s,this.update()}addRoutes(t){for(const e of t)this.addRoute(this.routes,e);this.update()}update(){this.updateRoutes(this.routes),this.routes=this.routes.slice()}addRoute(t,e){const n=new Bd(this,e);if(t.push(n),e.children){n.children=[];for(const t of e.children)this.addRoute(n.children,t)}}updateRoutes(t){for(const e of t)e.update(),e.children&&e.children.length&&this.updateRoutes(e.children)}}var zd=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};class Hd{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){if(this.isActive)throw new Error("Queue has already been started");this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){if(!this.isActive)throw new Error("Queue has not been started");this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),s=n?t:[t],i=s.map((t,n)=>Array.isArray(e)?e[n]:e).map(t=>void 0!==t?t:1),r=[];for(const t of s){const e={...t};e.cost=i.shift(),r.push(new Promise((t,n)=>{e.resolve=()=>{t(),this.processing=null,this.dequeue()},e.reject=t=>{n(t),this.processing=null,this.dequeue()}})),this.pending.push(e)}return this.dequeue(),n?r:r[0]}dequeue(t){null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost||0,this.callback(this.processing)))))}clear(){this.pending.splice(0,this.pending.length)}}zd([z],Hd.prototype,"dequeue",null);var Wd=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};class Kd{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}})}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class Gd{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){if(this.isActive)throw new Error("TaskQueue has already been started");this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){if(!this.isActive)throw new Error("TaskQueue has not been started");this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),s=n?t:[t],i=s.map((t,n)=>Array.isArray(e)?e[n]:e).map(t=>void 0!==t?t:1),r=[];for(const t of s)r.push(t instanceof Kd?t:this.createQueueTask(t,i.shift()));return this.pending.push(...r),this.dequeue(),n?r:r[0]}createQueueTask(t,e){return new Kd(this,t,e)}dequeue(t){var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch(t=>{throw t})))))}clear(){this.pending.splice(0,this.pending.length)}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}Wd([z],Gd.prototype,"dequeue",null);var Qd=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Zd=function(t,e){return function(n,s){e(n,s,t)}};let Jd=class{constructor(t,e,n,s){this.platform=t,this.window=e,this.history=n,this.location=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0,callback:()=>{}},this.forwardedState={eventTask:null,suppressPopstate:!1},this.handlePopstate=async t=>{const{eventTask:e,suppressPopstate:n}=this.forwardedState;return this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue(async s=>{const i=t,r=e,o=n;await this.popstate(i,r,o),s.resolve()},1).wait()},this.pendingCalls=new Gd}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,this.options.callback=t.callback,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this.handlePopstate)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this.handlePopstate),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0,callback:()=>{}},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:n}=this.location;return{path:t,query:e,hash:n,instruction:this.options.useUrlFragmentHash?n.slice(1):t}}async go(t,e=!1){const n=this.pendingCalls.createQueueTask(t=>t.resolve(),1);return this.pendingCalls.enqueue([t=>{const s=n,i=e;this.forwardState({eventTask:s,suppressPopstate:i}),t.resolve()},e=>{const n=this.history,s=t;n.go(s),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.currentEntry,s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(i=>{const r=this.history,o=t,a=e||"",c=`${s}${n}`;r.pushState(o,a,c),i.resolve()},1).wait()}async replaceNavigatorState(t){const{title:e,path:n}=t.currentEntry,s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(i=>{const r=this.history,o=t,a=e||"",c=`${s}${n}`;r.replaceState(o,a,c),i.resolve()},1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask(t=>t.resolve(),1);return this.pendingCalls.enqueue(async e=>{const n=t;await this.popState(n),e.resolve()},1),t.wait()}async popState(t){await this.go(-1,!0);const e=this.history.state;e&&e.currentEntry&&!e.currentEntry.firstEntry&&(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}async popstate(t,e,n=!1){n||this.options.callback({...this.viewerState,event:t,state:this.history.state}),null!==e&&await e.execute()}setTitle(t){this.window.document.title=t}};Jd=Qd([Zd(0,Po),Zd(1,Lc),Zd(2,qc),Zd(3,Fc)],Jd);class Yd{constructor(t){this.entity=t,this.running=!1,this.states=[],this.checkedStates=[],this.syncState=null,this.syncPromise=null}}class Xd extends class{constructor(){this.entities=[],this.hasAllEntities=!1,this.syncStates=new Map,this.checkedSyncStates=new Set}addSyncState(t){const e=new ld;this.syncStates.set(t,e)}addEntity(t){const e=new Yd(t);return this.entities.push(e),this.resetSyncStates(),e}addEntityState(t,e){let n=this.entities.find(e=>e.entity===t);void 0===n&&(n=this.addEntity(t)),n.states.push(e),this.checkSyncState(e)}syncState(t,e=null){const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const s=this.entities.find(t=>t.entity===e);if(null===(null==s?void 0:s.syncPromise)&&n.isPending)return s.syncState=t,s.syncPromise=new ld,s.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then(()=>{this.checkSyncState(t)}).catch(t=>{throw t}),s.syncPromise.promise}return n.promise}}checkingSyncState(t){return this.syncStates.has(t)}finalEntity(){this.hasAllEntities=!0,this.syncStates.forEach((t,e)=>this.checkSyncState(e))}finalize(){}cancel(){}cancelReplaced(t){}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEntities&&n.isPending&&this.entities.every(e=>e.states.includes(t))&&(!this.checkedSyncStates.has(t)||this.entities.every(e=>e.checkedStates.includes(t)))){for(const n of this.entities)n.syncState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncState=null);n.resolve()}}resetSyncStates(){this.syncStates.forEach((t,e)=>{t.isPending||this.entities.every(t=>t.states.includes(e))||this.addSyncState(e)})}}{constructor(){super(...arguments),this.running=!1}static create(t,e,n){const s=new Xd;return s.router=t,s.navigation=e,n.syncStates.forEach(t=>s.addSyncState(t)),s}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.entity.transition(this))}}addEntity(t){const e=super.addEntity(t);return this.running&&e.entity.transition(this),e}finalize(){this.entities.forEach(t=>t.entity.finalizeContentChange())}cancel(){this.entities.forEach(t=>{const e=t.entity.abortContentChange();e instanceof Promise&&e.catch(t=>{throw t})}),this.router.navigator.cancel(this.navigation).then(()=>{this.router.processingNavigation=null,this.navigation.resolve()}).catch(t=>{throw t})}cancelReplaced(t){}}const tf=lt.createInterface("IRouter").withDefault(t=>t.singleton(nf));class ef{}class nf{constructor(t,e,n,s,i,r,o){this.container=t,this.navigator=e,this.navigation=n,this.linkHandler=s,this.instructionResolver=i,this.hookManager=r,this.options=o,this.rootScope=null,this.navs={},this.activeComponents=[],this.appendedInstructions=[],this.processingNavigation=null,this.isActive=!1,this.pendingConnects=new Map,this.loadedFirst=!1,this.lastNavigation=null,this.staleChecks={},this.starters=[],this.linkCallback=t=>{let e=t.instruction||"";"string"==typeof e&&e.startsWith("#")&&(e=e.slice(1),e.startsWith("/")||(e="/"+e)),this.load(e,{origin:t.anchor}).catch(t=>{throw t})},this.navigatorCallback=t=>{this.processNavigations(t).catch(t=>{throw t})},this.navigatorSerializeCallback=async(t,e)=>{let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...this.instructionResolver.flattenViewportInstructions(t.instruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance)),"string"!=typeof t.fullStateInstruction&&n.push(...this.instructionResolver.flattenViewportInstructions(t.fullStateInstruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance));n=n.filter((t,e,n)=>null!==t&&n.indexOf(t)===e);const s={...t};let i=[];s.fullStateInstruction&&"string"!=typeof s.fullStateInstruction&&(i.push(...s.fullStateInstruction),s.fullStateInstruction=this.instructionResolver.stringifyViewportInstructions(s.fullStateInstruction)),s.instruction&&"string"!=typeof s.instruction&&(i.push(...s.instruction),s.instruction=this.instructionResolver.stringifyViewportInstructions(s.instruction)),i=i.filter((t,e,n)=>null!==t&&null!==t.componentInstance&&n.indexOf(t)===e);const r=[];for(const t of i)await this.freeComponents(t,n,r);return s},this.browserNavigatorCallback=t=>{var e;const n=new ad(null===(e=t.state)||void 0===e?void 0:e.currentEntry);n.instruction=t.instruction,n.fromBrowser=!0,this.navigator.navigate(n).catch(t=>{throw t})},this.processNavigations=async t=>{var e,n,s;const i=this.processingNavigation=t;this.pendingConnects.clear(),this.options.reportCallback&&this.options.reportCallback(i);const r=Xd.create(this,i,{syncStates:this.options.navigationSyncStates});let o="string"!=typeof i.instruction||i.useFullStateInstruction?i.instruction:await this.hookManager.invokeTransformFromUrl(i.instruction,this.processingNavigation);"/"===o&&(o=""),i.scope=null!==(e=i.scope)&&void 0!==e?e:this.rootScope.scope;let a=i.scope.findInstructions(o),c=null;i.instruction.length>0&&!a.foundConfiguration&&!a.foundInstructions&&this.unknownRoute(a.remaining);let l=a.instructions;if(a.foundConfiguration&&(i.path=i.instruction.startsWith("/")?i.instruction.slice(1):i.instruction,c=(null!=c?c:"")+a.matching,this.rootScope.path=c),!this.options.additiveInstructionDefault&&l.length>0&&!this.instructionResolver.isAddAllViewportsInstruction(l[0])&&!this.instructionResolver.isClearAllViewportsInstruction(l[0])){const t=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction);t.scope=l[0].scope,l.unshift(t)}const h=[];let u=[];for(const t of l.filter(t=>this.instructionResolver.isClearAllViewportsInstruction(t))){const e=t.scope||this.rootScope.scope,n=e.allScopes().filter(t=>!t.owner.isEmpty).map(t=>t.owner);h.push(...n),null!==e.viewportScope&&e.viewportScope!==this.rootScope&&u.push(e.viewportScope)}l=l.filter(t=>!this.instructionResolver.isClearAllViewportsInstruction(t));for(const t of l.filter(t=>this.instructionResolver.isAddAllViewportsInstruction(t)))t.setViewport((t.scope||this.rootScope.scope).viewportScope.name),t.scope=t.scope.owningScope;for(const t of l)t.topInstruction=!0;const p=[],d=[];let{found:f,remaining:g}=this.findViewports(l,d),m=100;do{if(!m--){const t=new Error(g.length+" remaining instructions after 100 iterations; there is likely an infinite loop.");throw t.remainingInstructions=g,console.log("remainingInstructions",g),t}const t=[],e=await this.hookManager.invokeBeforeNavigation(f,i);if(!1===e)return void r.cancel();f=e;for(const e of f){const n=e.owner;if(null!==n){n.path=c;const s=n.setNextContent(e,i);"skip"!==s&&(t.push(n),r.addEntity(n));const o=[n];"swap"===s&&o.push(...n.scope.allScopes(!0,!0).map(t=>t.owner)),id(h,t=>o.includes(t)),!this.instructionResolver.isClearViewportInstruction(e)&&null!==e.scope&&null!==e.scope.parent&&e.scope.parent.isViewportScope&&id(u,t=>t===e.scope.parent.viewportScope)}}this.isRestrictedNavigation||r.finalEntity(),r.run();for(const e of t)p.every(t=>t!==e)&&p.push(e);if(d.push(...f),({found:f,remaining:g}=this.findViewports(g,d)),a.hasRemaining&&0===f.length&&0===g.length){let t=new gd;const e=d.filter(t=>null!==t.owner&&t.owner.path===c).map(t=>t.owner).filter((t,e,n)=>n.indexOf(t)===e);this.isRestrictedNavigation||await r.syncState("swapped");for(const n of e)if(t=n.scope.findInstructions(a.remaining),t.foundConfiguration)break;t.foundInstructions?(a=t,c=(null!=c?c:"")+"/"+a.matching):this.unknownRoute(t.remaining),this.appendInstructions(t.instructions)}i.useFullStateInstruction&&(this.appendedInstructions=this.appendedInstructions.filter(t=>!t.default));let n=this.appendedInstructions.filter(t=>!t.default);if(this.appendedInstructions=this.appendedInstructions.filter(t=>t.default),0===n.length){const t=this.appendedInstructions.findIndex(t=>t.default);t>=0&&(n=this.appendedInstructions.splice(t,1))}for(;n.length>0;){const t=n.shift(),e=d.some(e=>e.sameViewport(t)),s=f.find(e=>e.sameViewport(t)),i=g.find(e=>e.sameViewport(t));t.default&&(e||void 0!==s&&!s.default||void 0!==i&&!i.default)||(void 0!==s&&id(f,t=>t===s),void 0!==i&&id(g,t=>t===i),null!==t.viewport?f.push(t):g.push(t))}0===f.length&&0===g.length&&(f=h.map(t=>{const e=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction,t.isViewport?t:void 0);return t.isViewportScope&&(e.viewportScope=t),e}),f.push(...u.map(t=>{const e=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction);return e.viewportScope=t,e})),u=[])}while(f.length>0||g.length>0);r.finalEntity(),await r.syncState("completed"),r.finalize(),await this.replacePaths(i),i.navigation.new&&!i.navigation.first&&!i.repeating&&p.every(t=>t.options.noHistory)&&(i.untracked=!0),this.lastNavigation=this.processingNavigation,null!==(s=null===(n=this.lastNavigation)||void 0===n?void 0:n.repeating)&&void 0!==s&&s&&(this.lastNavigation.repeating=!1),this.processingNavigation=null,await this.navigator.finalize(i)}}get isNavigating(){return null!==this.processingNavigation}get isRestrictedNavigation(){const t=this.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.options.statefulHistoryLength&&this.options.statefulHistoryLength>0}start(t){var e;if(this.isActive)throw new Error("Router has already been started");this.isActive=!0,t=null!=t?t:{};const n={...this.options.title,..."string"==typeof t.title?{appTitle:t.title}:t.title};t.title=n;const s={...this.options.separators,...null!==(e=t.separators)&&void 0!==e?e:{}};t.separators=s,Object.assign(this.options,t),void 0!==this.options.hooks&&this.addHooks(this.options.hooks),this.instructionResolver.start({separators:this.options.separators}),this.navigator.start(this,{callback:this.navigatorCallback,store:this.navigation,statefulHistoryLength:this.options.statefulHistoryLength,serializeCallback:this.statefulHistory?this.navigatorSerializeCallback:void 0}),this.linkHandler.start({callback:this.linkCallback,useHref:this.options.useHref}),this.navigation.start({callback:this.browserNavigatorCallback,useUrlFragmentHash:this.options.useUrlFragmentHash}),this.ensureRootScope();for(const t of this.starters)t()}async loadUrl(){const t=new ad({...this.navigation.viewerState,fullStateInstruction:"",replacing:!0,fromBrowser:!1}),e=this.navigator.navigate(t);return this.loadedFirst=!0,e}stop(){if(!this.isActive)throw new Error("Router has not been started");this.linkHandler.stop(),this.navigator.stop(),this.navigation.stop()}findScope(t){return null==t?this.rootScope.scope:t instanceof Rd||t instanceof Od?t.scope:this.getClosestScope(t)||this.rootScope.scope}findParentScope(t){return null===t||t.has(ef,!1)&&null===(t=t.parent)?this.rootScope.scope:t.has(ef,!0)?t.get(ef):this.rootScope.scope}getViewport(t){return this.allViewports().find(e=>e.name===t)||null}addViewport(...t){throw new Error("Not implemented")}findViewportScope(...t){throw new Error("Not implemented")}addViewportScope(...t){throw new Error("Not implemented")}setClosestScope(t,e){const n=this.getContainer(t);Rt.instance(ef,e).register(n)}getClosestScope(t){const e="resourceResolvers"in t?t:this.getClosestContainer(t);return null===e?null:e.has(ef,!0)&&e.get(ef)||null}unsetClosestScope(t){this.getContainer(t).resolvers.delete(ef)}connectViewport(t,e,n,s){var i,r,o;const a=this.findParentScope(e.container),c=(null!==(r=null===(i=e.parentViewport)||void 0===i?void 0:i.viewport)&&void 0!==r?r:this.rootScope).scope;return a!==c&&console.error("Viewport parentScope !== parentViewportScope",a.toString(!0),c.toString(!0),e.getClosestCustomElement()),null===t?(t=a.addViewport(n,e,s),this.setClosestScope(e.container,t.connectedScope),this.isRestrictedNavigation||this.pendingConnects.set(e,new ld)):null===(o=this.pendingConnects.get(e))||void 0===o||o.resolve(),t}disconnectViewport(t,e){if(!t.connectedScope.parent.removeViewport(t,e))throw new Error("Failed to remove viewport: "+t.name);this.unsetClosestScope(e.container)}connectViewportScope(t,e,n,s){const i=this.findParentScope(e.container);return null===t&&(t=i.addViewportScope(n,e,s),this.setClosestScope(e.container,t.connectedScope)),t}disconnectViewportScope(t,e){if(!t.connectedScope.parent.removeViewportScope(t))throw new Error("Failed to remove viewport scope: "+t.path);this.unsetClosestScope(e.container)}allViewports(t=!1,e=!1){return this.rootScope.scope.allViewports(t,e)}async goto(t,e){return rd('"goto" method','"load" method'),this.load(t,e)}async load(t,e){if(e=e||{},"string"==typeof t&&!e.query){const[n,s]=t.split("?");t=n,e.query=s}const n={};e.origin&&(n.context=e.origin);let s=null;if(({instructions:t,scope:s}=jd.createViewportInstructions(this,t,n)),e.append&&this.processingNavigation)return t=jd.toViewportInstructions(this,t),this.appendInstructions(t,s),Promise.resolve();const i=new ad({instruction:t,fullStateInstruction:"",scope:s,title:e.title,data:e.data,query:e.query,replacing:e.replace,repeating:e.append,fromBrowser:!1,origin:e.origin});return this.navigator.navigate(i)}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t){for(const e of t){const t=this.instructionResolver.matchScope(this.activeComponents,e.scope).filter(t=>t.sameComponent(e,!0));if(0===t.length)return!1;if(Array.isArray(e.nextScopeInstructions)&&e.nextScopeInstructions.length>0&&!1===this.instructionResolver.matchChildren(e.nextScopeInstructions,t.map(t=>Array.isArray(t.nextScopeInstructions)?t.nextScopeInstructions:[]).flat()))return!1}return!0}setNav(t,e,n){const s=this.findNav(t);null!=s&&(s.routes=[]),this.addNav(t,e,n)}addNav(t,e,n){let s=this.navs[t];null==s&&(s=this.navs[t]=new Ud(this,t,[],n)),s.addRoutes(e),s.update()}updateNav(t){const e=t?[t]:Object.keys(this.navs);for(const t of e)void 0!==this.navs[t]&&null!==this.navs[t]&&this.navs[t].update()}findNav(t){return this.navs[t]}addRoutes(t,e){return[]}removeRoutes(t,e){}addHooks(t){return t.map(t=>this.addHook(t.hook,t.options))}addHook(t,e){return this.hookManager.addHook(t,e)}removeHooks(t){}createViewportInstruction(t,e,n,s=!0,i=null){return this.instructionResolver.createViewportInstruction(t,e,n,s,i)}hasSiblingInstructions(t){return null!==t&&(t.length>1||t.some(t=>this.hasSiblingInstructions(t.nextScopeInstructions)))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);this.appendedInstructions.push(...t)}checkStale(t,e){const n=this.staleChecks[t];if(void 0===n)return this.staleChecks[t]=e.slice(),!1;if(n.length!==e.length)return this.staleChecks[t]=e.slice(),!1;for(let s=0,i=e.length;s<i;s++)if(n[s]!==e[s])return this.staleChecks[t]=e.slice(),!1;return!0}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.options.useConfiguredRoutes&&this.options.useDirectRoutes?new Error("No matching configured route or component found for '"+t+"'"):this.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}findViewports(t,e,n=!1){const s=[],i=[];for(;t.length;){null===t[0].scope&&(t[0].scope=this.rootScope.scope);const r=t[0].scope,{foundViewports:o,remainingInstructions:a}=r.findViewports(t.filter(t=>t.scope===r),e,n);s.push(...o),i.push(...a),t=t.filter(t=>t.scope!==r)}return{found:s.slice(),remaining:i}}async cancelNavigation(t,e){t.forEach(t=>{const e=t.abortContentChange();e instanceof Promise&&e.catch(t=>{throw t})}),await this.navigator.cancel(e),this.processingNavigation=null,e.resolve()}ensureRootScope(){if(!this.rootScope){const t=this.container.get(Tc);this.rootScope=new fd("rootScope",this,t.controller.viewModel,null,!0,t.config.component)}return this.rootScope}async replacePaths(t){var e;this.rootScope.scope.reparentViewportInstructions();let n=this.rootScope.scope.hoistedChildren.filter(t=>null!==t.viewportInstruction&&!t.viewportInstruction.isEmpty()).map(t=>t.viewportInstruction);n=this.instructionResolver.cloneViewportInstructions(n,!0);const s=[];let{found:i,remaining:r}=this.findViewports(n,s,!0),o=100;for(;r.length>0;){if(0==o--)throw new Error("Failed to find viewport when updating viewer paths.");s.push(...i),({found:i,remaining:r}=this.findViewports(r,s,!0))}this.activeComponents=n,this.activeRoute=t.route;let a=await this.hookManager.invokeTransformToUrl(n,t);"string"!=typeof a&&(a=this.instructionResolver.stringifyViewportInstructions(a,!1,!0)),a=await this.hookManager.invokeTransformToUrl(a,t);const c=t.query&&t.query.length?"?"+t.query:"";t.path=a+c;const l=[this.createViewportInstruction(this.instructionResolver.clearViewportInstruction)];if(l.push(...this.instructionResolver.cloneViewportInstructions(n,this.statefulHistory)),t.fullStateInstruction=l,null===(null!==(e=t.title)&&void 0!==e?e:null)){const e=await this.getTitle(n,t);null!==e&&(t.title=e)}return Promise.resolve()}async getTitle(t,e){let n=await this.hookManager.invokeSetTitle(t,e);if("string"!=typeof n){const t=this.stringifyTitles(n,e);n=this.options.title.appTitle,n=n.replace("${componentTitles}",t),n=n.replace("${appTitleSeparator}",""!==t?this.options.title.appTitleSeparator:"")}return n=await this.hookManager.invokeSetTitle(n,e),n}stringifyTitles(t,e){return t.map(t=>this.stringifyTitle(t,e)).filter(t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}).join(" + ")}stringifyTitle(t,e){var n;if("string"==typeof t)return this.resolveTitle(t,e);const s=null!==(n=t.route)&&void 0!==n?n:null,i=t.nextScopeInstructions;let r="";if(null!==s){if(""===s)return Array.isArray(i)?this.stringifyTitles(i,e):"";r+=this.resolveTitle(s,e)}else r+=this.resolveTitle(t,e);if(Array.isArray(i)&&i.length>0){let t=this.stringifyTitles(i,e);t.length>0&&(1!==i.length&&(t="[ "+t+" ]"),r=r.length>0?"top-down"===this.options.title.componentTitleOrder?r+this.options.title.componentTitleSeparator+t:t+this.options.title.componentTitleSeparator+r:t)}return r}resolveTitle(t,e){var n;let s="";if("string"==typeof t)s=t;else{if(t instanceof qd)return t.viewport.getTitle(e);if(t instanceof gd){const i=null===(n=t.match)||void 0===n?void 0:n.title;void 0!==i&&(s="string"==typeof i?i:i.call(t,t,e))}}return void 0!==this.options.title.transformTitle&&(s=this.options.title.transformTitle.call(this,s,t)),s}async freeComponents(t,e,n){const s=t.componentInstance,i=t.viewport;if(null!==s&&null!==i&&!n.some(t=>t===s)){if(!e.some(t=>t===s))return await i.freeContent(s),void n.push(s);if(null!==t.nextScopeInstructions)for(const s of t.nextScopeInstructions)await this.freeComponents(s,e,n)}}getClosestContainer(t){if("context"in t)return t.context;if("$controller"in t)return t.$controller.context;const e=this.CustomElementFor(t);return void 0===e?null:e.context}getContainer(t){return"resourceResolvers"in t?t:t instanceof Ua?t.get(ht):"$controller"in t?t.$controller.context.get(ht):null}CustomElementFor(t){let e=t;for(;null!==e;){const t=e.nodeName.toLowerCase(),n=T.getOwn(va.name+":"+t,e)||T.getOwn(va.name,e);if(void 0!==n)return n;e=$c(e)}}}nf.inject=[ht,class{constructor(){this.entries=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.processNavigations=t=>{const e=t,n={first:!1,new:!1,refresh:!1,forward:!1,back:!1,replace:!1};this.currentEntry===this.uninitializedEntry&&(this.loadState(),this.currentEntry!==this.uninitializedEntry?n.refresh=!0:(n.first=!0,n.new=!0,this.currentEntry=new ad({index:0,instruction:"",fullStateInstruction:""}),this.entries=[])),void 0===e.index||e.replacing||e.refreshing?e.refreshing||n.refresh?e.index=this.currentEntry.index:e.replacing?(n.replace=!0,n.new=!0,e.index=this.currentEntry.index):(n.new=!0,e.index=void 0!==this.currentEntry.index?this.currentEntry.index+1:this.entries.length):(e.historyMovement=e.index-(void 0!==this.currentEntry.index?this.currentEntry.index:0),e.instruction=void 0!==this.entries[e.index]&&null!==this.entries[e.index]?this.entries[e.index].fullStateInstruction:e.fullStateInstruction,e.replacing=!0,e.historyMovement>0?n.forward=!0:e.historyMovement<0&&(n.back=!0)),this.invokeCallback(e,n,this.currentEntry)},this.uninitializedEntry=new ad({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:""}),this.currentEntry=this.uninitializedEntry,this.pendingNavigations=new Hd(this.processNavigations)}get queued(){return this.pendingNavigations.length}start(t,e){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.router=t,this.options={...e}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.pendingNavigations.clear(),this.isActive=!1}async navigate(t){return this.pendingNavigations.enqueue(t)}async refresh(){const t=this.currentEntry;return t===this.uninitializedEntry?Promise.reject():(t.replacing=!0,t.refreshing=!0,this.navigate(t))}async go(t){const e=(void 0!==this.currentEntry.index?this.currentEntry.index:0)+t;if(e>=this.entries.length)return Promise.reject();const n=this.entries[e];return this.navigate(n)}async setEntryTitle(t){return this.currentEntry.title=t,this.saveState()}get titles(){if(this.currentEntry===this.uninitializedEntry)return[];const t=void 0!==this.currentEntry.index?this.currentEntry.index:0;return this.entries.slice(0,t+1).filter(t=>!!t.title).map(t=>t.title?t.title:"")}getState(){var t,e;const n=this.options.store?{...this.options.store.state}:{};return{state:n,entries:null!==(t=n.entries)&&void 0!==t?t:[],currentEntry:null!==(e=n.currentEntry)&&void 0!==e?e:null}}loadState(){const t=this.getState();this.entries=t.entries.map(t=>new ad(t)),this.currentEntry=null!==t.currentEntry?new ad(t.currentEntry):this.uninitializedEntry}async saveState(t=!1){var e;if(this.currentEntry===this.uninitializedEntry)return Promise.resolve();const n=this.currentEntry.toStored();if(this.entries[void 0!==n.index?n.index:0]=new ad(n),this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(let e=0;e<t;e++){const n=this.entries[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeEntry(n,this.entries.slice(t))}}if(!this.options.store)return Promise.resolve();const s={entries:(null!==(e=this.entries)&&void 0!==e?e:[]).map(t=>this.toStoreableEntry(t)),currentEntry:this.toStoreableEntry(n)};return void 0!==s.currentEntry.title&&this.options.store.setTitle(s.currentEntry.title),t?this.options.store.pushNavigatorState(s):this.options.store.replaceNavigatorState(s)}toStoredEntry(t){const{previous:e,fromBrowser:n,origin:s,replacing:i,refreshing:r,untracked:o,historyMovement:a,navigation:c,scope:l,resolve:h,reject:u,...p}=t;return p}async finalize(t){this.currentEntry=t;let e=void 0!==this.currentEntry.index?this.currentEntry.index:0;if(this.currentEntry.untracked)t.fromBrowser&&this.options.store&&await this.options.store.popNavigatorState(),e--,this.currentEntry.index=e,this.entries[e]=this.currentEntry,await this.saveState();else if(this.currentEntry.replacing)this.entries[e]=this.currentEntry,await this.saveState();else{if(void 0!==this.options.serializeCallback&&this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(const n of this.entries.slice(e))"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.options.serializeCallback(n,this.entries.slice(t,e))}this.entries=this.entries.slice(0,e),this.entries.push(this.currentEntry),await this.saveState(!0)}this.currentEntry.resolve&&this.currentEntry.resolve()}async cancel(t){t.fromBrowser&&this.options.store&&(t.navigation&&t.navigation.new?await this.options.store.popNavigatorState():await this.options.store.go(-(t.historyMovement||0),!0)),this.currentEntry.resolve&&this.currentEntry.resolve()}invokeCallback(t,e,n){const s=new ad({...t});s.navigation=e,s.previous=n,this.options.callback&&this.options.callback(s)}toStoreableEntry(t){const e=t instanceof ad?t.toStored():t;return e.instruction=this.router.instructionResolver.stringifyViewportInstructions(e.instruction),e.fullStateInstruction=this.router.instructionResolver.stringifyViewportInstructions(e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeEntry(t,e){const n=this.router.instructionResolver;let s=[];for(const t of e)"string"!=typeof t.instruction&&s.push(...n.flattenViewportInstructions(t.instruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance)),"string"!=typeof t.fullStateInstruction&&s.push(...n.flattenViewportInstructions(t.fullStateInstruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance));s=s.filter((t,e,n)=>null!==t&&n.indexOf(t)===e);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=n.stringifyViewportInstructions(t.fullStateInstruction)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=n.stringifyViewportInstructions(t.instruction)),i=i.filter((t,e,n)=>null!==t&&null!==t.componentInstance&&n.indexOf(t)===e);const r=[];for(const t of i)await this.freeInstructionComponents(t,s,r)}freeInstructionComponents(t,e,n){const s=t.componentInstance,i=t.viewport;if(null!==s&&null!==i&&!n.some(t=>t===s)){if(!e.some(t=>t===s))return cd.run(()=>i.freeContent(s),()=>{n.push(s)});if(null!==t.nextScopeInstructions)for(const s of t.nextScopeInstructions)return cd.run(()=>this.freeInstructionComponents(s,e,n))}}},Jd,sd,class{constructor(){this.separators={viewport:"@",sibling:"+",scope:"/",scopeStart:"(",scopeEnd:")",noScope:"!",parameters:"(",parametersEnd:")",parameterSeparator:",",parameterKeySeparator:"=",parameter:"&",add:"+",clear:"-",action:"."}}start(t){t=t||{},this.separators={...this.separators,...t.separators}}get clearViewportInstruction(){return this.separators.clear}get addViewportInstruction(){return this.separators.add}isClearViewportInstruction(t){return t instanceof qd?t.componentName===this.clearViewportInstruction&&!!t.viewportName:t.startsWith(this.clearViewportInstruction)&&t!==this.clearViewportInstruction}isAddViewportInstruction(t){return t instanceof qd?t.componentName===this.addViewportInstruction:t===this.addViewportInstruction||t.startsWith(`${this.separators.add}${this.separators.viewport}`)}isClearViewportScopeInstruction(t){return t instanceof qd?t.componentName===this.clearViewportInstruction&&!!t.viewportScope:t.startsWith(this.clearViewportInstruction)&&t!==this.clearViewportInstruction}isClearAllViewportsInstruction(t){return t instanceof qd?t.componentName===this.clearViewportInstruction&&!t.viewportName:t===this.clearViewportInstruction}isAddAllViewportsInstruction(t){return t instanceof qd?t.componentName===this.addViewportInstruction&&!t.viewportName:t===this.addViewportInstruction}createViewportInstruction(t,e,n,s=!0,i=null){return t instanceof Promise?t.then(t=>this.createViewportInstruction(t,e,n,s,i)):qd.create(this,t,e,n,s,i)}parseViewportInstructions(t){const e=/^[./]+/.exec(t);let n="";Array.isArray(e)&&e.length>0&&(n=e[0],t=t.slice(n.length));const s=this.parseViewportInstructionsWorker(t,!0).instructions;for(const t of s)t.context=n;return s}parseViewportInstruction(t){const e=this.parseViewportInstructions(t);return e.length?e[0]:this.createViewportInstruction("")}stringifyViewportInstructions(t,e=!1,n=!1){return"string"==typeof t?t:t.map(t=>this.stringifyViewportInstruction(t,e,n)).filter(t=>t&&t.length).join(this.separators.sibling)}stringifyViewportInstruction(t,e=!1,n=!1){var s;if("string"==typeof t)return this.stringifyAViewportInstruction(t,e);{let i=e,r=!1;if(n){if(t.viewport&&t.viewport.options.noLink)return"";t.needsViewportDescribed||!t.viewport||t.viewport.options.forceDescription||(i=!0),t.viewport&&t.viewport.options.fallback===t.componentName&&(r=!0),!t.needsViewportDescribed&&t.viewportScope&&(i=!0)}let o=null!==(s=t.route)&&void 0!==s?s:null;const a=t.nextScopeInstructions;let c=t.context;if(null!==o){if(""===o)return Array.isArray(a)?this.stringifyViewportInstructions(a,e,n):"";o=o.matching,c+=o.endsWith(this.separators.scope)?o.slice(0,-this.separators.scope.length):o}else c+=this.stringifyAViewportInstruction(t,i,r);if(Array.isArray(a)&&a.length){const t=this.stringifyViewportInstructions(a,e,n);t.length>0&&(c+=1===a.length?`${this.separators.scope}${t}`:`${this.separators.scope}${this.separators.scopeStart}${t}${this.separators.scopeEnd}`)}return c}}stringifyScopedViewportInstructions(t){return Array.isArray(t)?t.map(t=>this.stringifyViewportInstruction(t)).join(this.separators.scope):this.stringifyScopedViewportInstructions([t])}encodeViewportInstructions(t){return encodeURIComponent(this.stringifyViewportInstructions(t)).replace(/\(/g,"%28").replace(/\)/g,"%29")}decodeViewportInstructions(t){return this.parseViewportInstructions(decodeURIComponent(t))}buildScopedLink(t,e){return t&&(e=`/${t}${this.separators.scope}${e}`),e}shouldClearViewports(t){return{clearViewports:t===this.separators.clear||t.startsWith(this.separators.clear+this.separators.add),newPath:t.startsWith(this.separators.clear)?t.slice(2):t}}mergeViewportInstructions(t){const e=[];for(let n of t){"string"==typeof n&&(n=this.parseViewportInstruction(n));const t=e.findIndex(t=>t.sameViewport(n));t>=0?e.splice(t,1,n):e.push(n)}return e}flattenViewportInstructions(t){const e=[];for(const n of t)e.push(n),n.nextScopeInstructions&&e.push(...this.flattenViewportInstructions(n.nextScopeInstructions));return e}cloneViewportInstructions(t,e=!1,n=!1){var s,i,r;const o=[];for(const a of t){const t=this.createViewportInstruction(a.componentName,a.viewportName,null!==a.typedParameters?a.typedParameters:void 0);e&&(t.setComponent(null!==(i=null!==(s=a.componentInstance)&&void 0!==s?s:a.componentType)&&void 0!==i?i:a.componentName),t.setViewport(null!==(r=a.viewport)&&void 0!==r?r:a.viewportName)),t.needsViewportDescribed=a.needsViewportDescribed,t.route=a.route,n&&(t.context=a.context),t.viewportScope=e?a.viewportScope:null,t.scope=e?a.scope:null,a.nextScopeInstructions&&(t.nextScopeInstructions=this.cloneViewportInstructions(a.nextScopeInstructions,e,n)),o.push(t)}return o}parseComponentParameters(t,e=!1){if(null==t||0===t.length)return[];if("string"==typeof t){const n=[],s=t.split(this.separators.parameterSeparator);for(const t of s){let s,i;[s,i]=t.split(this.separators.parameterKeySeparator),void 0===i?(i=e?decodeURIComponent(s):s,s=void 0):e&&(s=decodeURIComponent(s),i=decodeURIComponent(i)),n.push({key:s,value:i})}return n}if(Array.isArray(t))return t.map(t=>({key:void 0,value:t}));const n=Object.keys(t);return n.sort(),n.map(e=>({key:e,value:t[e]}))}stringifyComponentParameters(t,e=!1){if(!Array.isArray(t)||0===t.length)return"";const n=this.separators;return t.map(t=>{const s=void 0!==t.key&&e?encodeURIComponent(t.key):t.key,i=e?encodeURIComponent(t.value):t.value;return void 0!==s&&s!==i?s+n.parameterKeySeparator+i:i}).join(n.parameterSeparator)}matchScope(t,e){const n=[];return n.push(...t.filter(t=>t.scope===e)),n.push(...t.filter(t=>t.scope!==e).map(t=>Array.isArray(t.nextScopeInstructions)?this.matchScope(t.nextScopeInstructions,e):[]).flat()),n}matchChildren(t,e){for(const n of t){const t=e.filter(t=>t.sameComponent(n));if(0===t.length)return!1;if(Array.isArray(n.nextScopeInstructions)&&n.nextScopeInstructions.length>0&&!1===this.matchChildren(n.nextScopeInstructions,t.map(t=>Array.isArray(t.nextScopeInstructions)?t.nextScopeInstructions:[]).flat()))return!1}return!0}parseViewportInstructionsWorker(t,e=!1){if(!t)return{instructions:[],remaining:""};t.startsWith(this.separators.scopeStart)&&(t=`${this.separators.scope}${t}`);const n=[];let s=1e3;for(;t.length&&s;)if(s--,t.startsWith(this.separators.scope)){const e=(t=t.slice(this.separators.scope.length)).startsWith(this.separators.scopeStart);e&&(t=t.slice(this.separators.scopeStart.length));const{instructions:s,remaining:i}=this.parseViewportInstructionsWorker(t,e);n.length?n[n.length-1].nextScopeInstructions=s:n.push(...s),t=i}else{if(t.startsWith(this.separators.scopeEnd))return e&&(t=t.slice(this.separators.scopeEnd.length)),{instructions:n,remaining:t};if(t.startsWith(this.separators.sibling)&&!this.isAddViewportInstruction(t)){if(!e)return{instructions:n,remaining:t};t=t.slice(this.separators.sibling.length)}else{const{instruction:e,remaining:s}=this.parseAViewportInstruction(t);n.push(e),t=s}}return{instructions:n,remaining:t}}findNextToken(t,e){const n={};for(const s of e){t.indexOf(s)>-1&&(n[s]=t.indexOf(s))}const s=Math.min(...Object.values(n));for(const t in n)if(n[t]===s)return{token:t,pos:s};return{token:"",pos:-1}}parseAViewportInstruction(t){const e=this.separators,n=[e.parameters,e.viewport,e.noScope,e.scopeEnd,e.scope,e.sibling];let s,i,r=void 0,o=void 0,a=void 0,c=!0;const l=[e.add,e.clear];for(const i of l)if(t===i){r=t,t="",n.shift(),n.shift(),s=e.viewport;break}if(void 0===r)for(const i of l)if(t.startsWith(`${i}${e.viewport}`)){r=i,t=t.slice(`${i}${e.viewport}`.length),n.shift(),n.shift(),s=e.viewport;break}void 0===r&&(({token:s,pos:i}=this.findNextToken(t,n)),r=-1!==i?t.slice(0,i):t,t=-1!==i?t.slice(i+s.length):"",n.shift(),s===e.parameters&&(({token:s,pos:i}=this.findNextToken(t,[e.parametersEnd])),o=t.slice(0,i),t=t.slice(i+s.length),({token:s}=this.findNextToken(t,n)),t=t.slice(s.length)),n.shift()),s===e.viewport&&(({token:s,pos:i}=this.findNextToken(t,n)),a=-1!==i?t.slice(0,i):t,t=-1!==i?t.slice(i+s.length):""),n.shift(),s===e.noScope&&(c=!1),s!==e.scopeEnd&&s!==e.scope&&s!==e.sibling||(t=`${s}${t}`);return{instruction:this.createViewportInstruction(r,a,o,c),remaining:t}}stringifyAViewportInstruction(t,e=!1,n=!1){if("string"==typeof t)return this.stringifyViewportInstruction(this.parseViewportInstruction(t),e,n);{let s=n?"":t.componentName;const i=t.componentType?t.componentType.parameters:null,r=this.stringifyComponentParameters(t.toSortedParameters(i));return r.length>0&&(s+=n?r:`${this.separators.parameters}${r}${this.separators.parametersEnd}`),null===t.viewportName||e||(s+=this.separators.viewport+t.viewportName),t.ownsScope||(s+=this.separators.noScope),s||""}}},class{constructor(){this.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],setTitle:[]},this.lastIdentity=0}addHook(t,e){const n=new Nd(t,e||{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}removeHook(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex(e=>e.id===t);n>=0&&this.hooks[e].splice(n,1)}}async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}async invokeSetTitle(t,e){return this.invoke("setTitle",e,t)}async invoke(t,e,n){for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(n)){const t=await s.invoke(e,n);if("boolean"==typeof t){if(!t)return!1}else n=t}return n}},Vd];var sf=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},rf=function(t,e){return function(n,s){e(n,s,t)}};let of=class{constructor(t){this.router=t,this.name=null,this.routes=null,this.level=0,this.classes={}}get navRoutes(){const t=this.router.navs[this.name];return null!=t?t.routes:[]}get navClasses(){const t=this.router.navs[this.name];return{nav:"",ul:"",li:"",a:"",ulActive:"",liActive:"nav-active",aActive:"",...null!=t?t.classes:{}}}active(t){return"Active"}};sf([Yr],of.prototype,"name",void 0),sf([Yr],of.prototype,"routes",void 0),sf([Yr],of.prototype,"level",void 0),sf([Yr],of.prototype,"classes",void 0),of=sf([da({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name} ${navClasses.nav}">\n    <au-nav routes.bind="navRoutes" classes.bind="navClasses" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level} ${classes.ul}">\n    <li repeat.for="route of routes" if.bind="route.visible" class="${route.active ? classes.liActive : \'\'} ${route.hasChildren} ${classes.li}">\n      <a if.bind="route.link && route.link.length" load="${route.link}" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <a if.bind="route.execute" click.trigger="route.executeAction($event)" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <span if.bind="(!route.link || !route.link.length) && !route.execute && !route.children" class="${route.active ? classes.aActive : \'\'} ${classes.span} nav-separator" innerhtml.bind="route.title"></span>\n      <a if.bind="(!route.link || !route.link.length) && !route.execute && route.children" click.delegate="route.toggleActive()" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" classes.bind="classes" containerless></au-nav>\n    </li>\n  </ul>\n</template>'}),rf(0,tf)],of);var af,cf=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},lf=function(t,e){return function(n,s){e(n,s,t)}};const hf=va.createInjectable();let uf=af=class{constructor(t,e,n,s,i){this.router=t,this.element=e,this.container=n,this.parent=s,this.parentController=i,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,n){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}afterUnbind(t,e,n){return this.disconnect(),Promise.resolve()}afterUnbound(){this.isBound=!1}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.controller.routingContainer=this.container,this.viewportScope=this.router.connectViewportScope(this.viewportScope,this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectViewportScope(this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}isCustomElementController(t){return function(t){return t instanceof gc&&0===t.vmKind}(t)}isCustomElementViewModel(t){return function(t){return o(t)&&va.isType(t.constructor)}(t)}getClosestCustomElement(){let t=this.controller.parent,e=null;for(;null!==t&&null===e;)(t.viewModel instanceof mf||t.viewModel instanceof af)&&(e=t.viewModel),t=t.parent;return e}};cf([Yr],uf.prototype,"name",void 0),cf([Yr],uf.prototype,"catches",void 0),cf([Yr],uf.prototype,"collection",void 0),cf([Yr],uf.prototype,"source",void 0),uf=af=cf([da({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:hf}),lf(0,tf),lf(1,_c),lf(2,ht),lf(3,hf),lf(4,Ac)],uf);var pf,df=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},ff=function(t,e){return function(n,s){e(n,s,t)}};const gf=va.createInjectable();let mf=pf=class{constructor(t,e,n,s){this.router=t,this.element=e,this.container=n,this.parentViewport=s,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.viewport=null,this.isBound=!1}hydrated(t){return this.controller=t,this.container=t.context.get(ht),cd.run(()=>this.waitForRouterStart(),()=>{this.router.isRestrictedNavigation&&this.connect()})}binding(t,e,n){return this.isBound=!0,cd.run(()=>this.waitForRouterStart(),()=>{this.router.isRestrictedNavigation||this.connect()})}attaching(t,e,n){var s;if(null!==this.viewport&&null===(null!==(s=this.viewport.nextContent)&&void 0!==s?s:null))return this.viewport.enabled=!0,this.viewport.activate(t,this.$controller,n,!0)}unbinding(t,e,n){var s;if(null!==this.viewport&&null===(null!==(s=this.viewport.nextContent)&&void 0!==s?s:null))return cd.run(()=>this.viewport.deactivate(t,e,n),()=>{this.isBound=!1,this.viewport.enabled=!1})}dispose(){if(null!==this.viewport)return cd.run(()=>{var t,e,n;return null===(null!==(e=null===(t=this.viewport)||void 0===t?void 0:t.nextContent)&&void 0!==e?e:null)?null===(n=this.viewport)||void 0===n?void 0:n.dispose():void 0},()=>this.disconnect())}connect(){if(null===this.router.rootScope||null!==this.viewport&&this.router.isRestrictedNavigation)return;const t=this.getAttribute("name",this.name);let e=this.getAttribute("no-scope",this.noScope);const n={scope:void 0===e||!e};e=this.getAttribute("used-by",this.usedBy),void 0!==e&&(n.usedBy=e),e=this.getAttribute("default",this.default),void 0!==e&&(n.default=e),e=this.getAttribute("fallback",this.fallback),void 0!==e&&(n.fallback=e),e=this.getAttribute("no-link",this.noLink,!0),void 0!==e&&(n.noLink=e),e=this.getAttribute("no-title",this.noTitle,!0),void 0!==e&&(n.noTitle=e),e=this.getAttribute("no-history",this.noHistory,!0),void 0!==e&&(n.noHistory=e),e=this.getAttribute("stateful",this.stateful,!0),void 0!==e&&(n.stateful=e),this.controller.routingContainer=this.container,this.viewport=this.router.connectViewport(this.viewport,this,t,n)}disconnect(){this.viewport&&this.router.disconnectViewport(this.viewport,this),this.viewport=null}getAttribute(t,e,n=!1){if(this.isBound&&!n)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}return e}getClosestCustomElement(){let t=this.controller.parent,e=null;for(;null!==t&&null===e;)(t.viewModel instanceof pf||t.viewModel instanceof uf)&&(e=t.viewModel),t=t.parent;return e}waitForRouterStart(){if(!this.router.isActive)return new Promise(t=>{this.router.starters.push(t)})}};df([Yr],mf.prototype,"name",void 0),df([Yr],mf.prototype,"usedBy",void 0),df([Yr],mf.prototype,"default",void 0),df([Yr],mf.prototype,"fallback",void 0),df([Yr],mf.prototype,"noScope",void 0),df([Yr],mf.prototype,"noLink",void 0),df([Yr],mf.prototype,"noTitle",void 0),df([Yr],mf.prototype,"noHistory",void 0),df([Yr],mf.prototype,"stateful",void 0),mf=pf=df([da({name:"au-viewport",injectable:gf}),ff(0,tf),ff(1,_c),ff(2,ht),ff(3,gf)],mf);var vf=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},bf=function(t,e){return function(n,s){e(n,s,t)}};let yf=class{constructor(t,e){this.element=t,this.router=e,this.hasHref=null,this.activeClass="goto-active",rd('"goto" custom attribute','"load" custom attribute')}binding(){this.element.addEventListener("click",this.router.linkHandler.handler),this.updateValue();const t=this.router.container.get(Gr);this.observer=t.getObserver(this.router,"activeComponents"),this.observer.subscribe(this)}unbinding(){this.element.removeEventListener("click",this.router.linkHandler.handler),this.observer.unsubscribe(this)}valueChanged(t){this.updateValue()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){const t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.element.setAttribute("href",t)}}handleChange(){const t=ka.for(this.element,"goto").parent,e=jd.createViewportInstructions(this.router,this.value,{context:t}),n=jd.toViewportInstructions(this.router,e.instructions);for(const t of n)null===t.scope&&(t.scope=e.scope);this.router.checkActive(n)?this.element.classList.add(this.activeClass):this.element.classList.remove(this.activeClass)}};vf([Yr({mode:Cs.toView})],yf.prototype,"value",void 0),yf=vf([ba("goto"),bf(0,_c),bf(1,tf)],yf);var wf=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},kf=function(t,e){return function(n,s){e(n,s,t)}};let xf=class{constructor(t,e){this.element=t,this.router=e,this.hasHref=null,this.activeClass="load-active"}binding(){this.element.addEventListener("click",this.router.linkHandler.handler),this.updateValue();const t=this.router.container.get(Gr);this.observer=t.getObserver(this.router,"activeComponents"),this.observer.subscribe(this)}unbinding(){this.element.removeEventListener("click",this.router.linkHandler.handler),this.observer.unsubscribe(this)}valueChanged(t){this.updateValue()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){const t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.element.setAttribute("href",t)}}handleChange(){const t=ka.for(this.element,"load").parent,e=jd.createViewportInstructions(this.router,this.value,{context:t}),n=jd.toViewportInstructions(this.router,e.instructions);for(const t of n)null===t.scope&&(t.scope=e.scope);this.router.checkActive(n)?this.element.classList.add(this.activeClass):this.element.classList.remove(this.activeClass)}};wf([Yr({mode:Cs.toView})],xf.prototype,"value",void 0),xf=wf([ba("load"),kf(0,_c),kf(1,tf)],xf);var Cf=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Sf=function(t,e){return function(n,s){e(n,s,t)}};let Af=class{constructor(t,e){this.element=t,this.router=e}binding(){this.router.options.useHref&&!this.hasGoto()&&this.element.addEventListener("click",this.router.linkHandler.handler),this.updateValue()}unbinding(){this.element.removeEventListener("click",this.router.linkHandler.handler)}valueChanged(){this.updateValue()}updateValue(){this.element.setAttribute("href",this.value)}hasGoto(){const t=this.$controller.parent.children;return null!==t&&t.some(t=>1===t.vmKind&&t.viewModel instanceof yf)}};Cf([Yr({mode:Cs.toView})],Af.prototype,"value",void 0),Af=Cf([ba({name:"href",noMultiBindings:!0}),Sf(0,_c),Sf(1,tf)],Af);const Tf=[tf],Ef=[mf,uf,of,yf,xf,Af];let _f={},If=t=>{t.start(_f)};const Rf={register:t=>t.register(...Tf,...Ef,Xo.with(tf).beforeActivate().call(If),Xo.with(tf).afterActivate().call(t=>t.loadUrl()),Xo.with(tf).afterDeactivate().call(t=>t.stop())),createContainer(){return this.register(lt.createContainer())}},Of={customize:t=>(void 0===t?(_f={},If=t=>{t.start(_f)}):t instanceof Function?If=t:_f=t,{...Rf}),...Rf},Pf=Se.getOrCreate(globalThis);class $f extends class{constructor(t=lt.createContainer()){if(this.container=t,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this.startPromise=void 0,this.stopPromise=void 0,t.has(Mp,!0))throw new Error("An instance of Aurelia is already registered with the container or an ancestor of it.");t.register(Rt.instance(Mp,this)),t.registerResolver(Tc,this.rootProvider=new Ot("IAppRoot"))}get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(null==this._root){if(null==this.next)throw new Error("root is not defined");return this.next}return this._root}register(...t){return this.container.register(...t),this}app(t){return this.next=new Ec(t,this.initPlatform(t.host),this.container,this.rootProvider,!1),this}enhance(t){return this.next=new Ec(t,this.initPlatform(t.host),this.container,this.rootProvider,!0),this}initPlatform(t){let e;if(this.container.has(Po,!1))e=this.container.get(Po);else{if(null===t.ownerDocument.defaultView)throw new Error("Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView");e=new Se(t.ownerDocument.defaultView),this.container.register(Rt.instance(Po,e))}return e}start(t=this.next){if(null==t)throw new Error("There is no composition root");return this.startPromise instanceof Promise?this.startPromise:this.startPromise=Z(this.stop(),()=>(Reflect.set(t.host,"$aurelia",this),this.rootProvider.prepare(this._root=t),this._isStarting=!0,Z(t.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this.startPromise=void 0,this.dispatchEvent(t,"au-started",t.host)})))}stop(t=!1){if(this.stopPromise instanceof Promise)return this.stopPromise;if(!0===this._isRunning){const e=this._root;return this._isRunning=!1,this._isStopping=!0,this.stopPromise=Z(e.deactivate(),()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this._root=void 0,this.rootProvider.dispose(),this._isStopping=!1,this.dispatchEvent(e,"au-stopped",e.host)})}}dispose(){if(this._isRunning||this._isStopping)throw new Error("The aurelia instance must be fully stopped before it can be disposed");this.container.dispose()}dispatchEvent(t,e,n){const s=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});n.dispatchEvent(s)}}{constructor(t=function(){return lt.createContainer().register(Rt.instance(Po,Pf),Np)}()){super(t)}static start(t){return(new $f).start(t)}static app(t){return(new $f).app(t)}static enhance(t){return(new $f).enhance(t)}static register(...t){return(new $f).register(...t)}app(t){if(va.isType(t)){const e=va.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}var jf=$f,Vf=n(14);const Df="markdown-preview",Lf='<div innerhtml.bind="markdownPreview"></div>';var Ff=Lf;const qf=[],Nf={mode:"open"};let Mf;function Bf(t){Mf||(Mf=va.define({name:Df,template:Lf,dependencies:qf,shadowOptions:Nf})),t.register(Mf)}var Uf=n(5),zf=n.n(Uf),Hf=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},Wf=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Kf=class{constructor(){this.content="",this.markdownPreview=""}attached(){this.markdownPreview=zf()().render(this.content)}contentChanged(t,e){this.markdownPreview=zf()().render(t)}};Hf([Yr({mode:Cs.twoWay}),Wf("design:type",String)],Kf.prototype,"content",void 0),Kf=Hf([da(s)],Kf);const Gf="my-app",Qf='\n\n<main>\n  <markdown-preview content.bind="text"></markdown-preview>\n</main>\n\n';var Zf=Qf;const Jf=[i,function(...t){return new Ja(t)}(Vf.a)],Yf={mode:"open"};let Xf;function tg(t){Xf||(Xf=va.define({name:Gf,template:Qf,dependencies:Jf,shadowOptions:Yf})),t.register(Xf)}var eg=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let ng=class{constructor(){this.text="## Foo \n\n*better* be gone"}};ng=eg([da(r)],ng);var sg=n(15);(async()=>{await jf.register(ic.shadowDOM({sharedStyles:[sg.a]})).register(Of).app(ng).start(),[...document.querySelectorAll('[data-ssr="serialized"]')].forEach(t=>{t.childNodes.forEach(t=>{t.parentElement.removeChild(t)}),t.setAttribute("data-ssr","hydrated")})})()}]);
//# sourceMappingURL=entry-bundle.js.map